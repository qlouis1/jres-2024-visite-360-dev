/*! For license information please see main.bundle.js.LICENSE.txt */
(()=>{var t={170:(t,e,i)=>{"use strict";i.r(e),i.d(e,{afterMain:()=>x,afterRead:()=>y,afterWrite:()=>T,applyStyles:()=>R,arrow:()=>Q,auto:()=>a,basePlacements:()=>l,beforeMain:()=>b,beforeRead:()=>_,beforeWrite:()=>E,bottom:()=>r,clippingParents:()=>u,computeStyles:()=>it,createPopper:()=>Rt,createPopperBase:()=>Ot,createPopperLite:()=>It,detectOverflow:()=>gt,end:()=>h,eventListeners:()=>rt,flip:()=>yt,hide:()=>xt,left:()=>s,main:()=>w,modifierPhases:()=>L,offset:()=>Et,placements:()=>v,popper:()=>d,popperGenerator:()=>Pt,popperOffsets:()=>Mt,preventOverflow:()=>Tt,read:()=>g,reference:()=>f,right:()=>o,start:()=>c,top:()=>n,variationPlacements:()=>m,viewport:()=>p,write:()=>M});var n="top",r="bottom",o="right",s="left",a="auto",l=[n,r,o,s],c="start",h="end",u="clippingParents",p="viewport",d="popper",f="reference",m=l.reduce((function(t,e){return t.concat([e+"-"+c,e+"-"+h])}),[]),v=[].concat(l,[a]).reduce((function(t,e){return t.concat([e,e+"-"+c,e+"-"+h])}),[]),_="beforeRead",g="read",y="afterRead",b="beforeMain",w="main",x="afterMain",E="beforeWrite",M="write",T="afterWrite",L=[_,g,y,b,w,x,E,M,T];function S(t){return t?(t.nodeName||"").toLowerCase():null}function A(t){if(null==t)return window;if("[object Window]"!==t.toString()){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function C(t){return t instanceof A(t).Element||t instanceof Element}function P(t){return t instanceof A(t).HTMLElement||t instanceof HTMLElement}function O(t){return"undefined"!=typeof ShadowRoot&&(t instanceof A(t).ShadowRoot||t instanceof ShadowRoot)}const R={name:"applyStyles",enabled:!0,phase:"write",fn:function(t){var e=t.state;Object.keys(e.elements).forEach((function(t){var i=e.styles[t]||{},n=e.attributes[t]||{},r=e.elements[t];P(r)&&S(r)&&(Object.assign(r.style,i),Object.keys(n).forEach((function(t){var e=n[t];!1===e?r.removeAttribute(t):r.setAttribute(t,!0===e?"":e)})))}))},effect:function(t){var e=t.state,i={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,i.popper),e.styles=i,e.elements.arrow&&Object.assign(e.elements.arrow.style,i.arrow),function(){Object.keys(e.elements).forEach((function(t){var n=e.elements[t],r=e.attributes[t]||{},o=Object.keys(e.styles.hasOwnProperty(t)?e.styles[t]:i[t]).reduce((function(t,e){return t[e]="",t}),{});P(n)&&S(n)&&(Object.assign(n.style,o),Object.keys(r).forEach((function(t){n.removeAttribute(t)})))}))}},requires:["computeStyles"]};function I(t){return t.split("-")[0]}var k=Math.max,D=Math.min,z=Math.round;function j(){var t=navigator.userAgentData;return null!=t&&t.brands&&Array.isArray(t.brands)?t.brands.map((function(t){return t.brand+"/"+t.version})).join(" "):navigator.userAgent}function N(){return!/^((?!chrome|android).)*safari/i.test(j())}function H(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=!1);var n=t.getBoundingClientRect(),r=1,o=1;e&&P(t)&&(r=t.offsetWidth>0&&z(n.width)/t.offsetWidth||1,o=t.offsetHeight>0&&z(n.height)/t.offsetHeight||1);var s=(C(t)?A(t):window).visualViewport,a=!N()&&i,l=(n.left+(a&&s?s.offsetLeft:0))/r,c=(n.top+(a&&s?s.offsetTop:0))/o,h=n.width/r,u=n.height/o;return{width:h,height:u,top:c,right:l+h,bottom:c+u,left:l,x:l,y:c}}function F(t){var e=H(t),i=t.offsetWidth,n=t.offsetHeight;return Math.abs(e.width-i)<=1&&(i=e.width),Math.abs(e.height-n)<=1&&(n=e.height),{x:t.offsetLeft,y:t.offsetTop,width:i,height:n}}function q(t,e){var i=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(i&&O(i)){var n=e;do{if(n&&t.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function Y(t){return A(t).getComputedStyle(t)}function W(t){return["table","td","th"].indexOf(S(t))>=0}function B(t){return((C(t)?t.ownerDocument:t.document)||window.document).documentElement}function V(t){return"html"===S(t)?t:t.assignedSlot||t.parentNode||(O(t)?t.host:null)||B(t)}function X(t){return P(t)&&"fixed"!==Y(t).position?t.offsetParent:null}function $(t){for(var e=A(t),i=X(t);i&&W(i)&&"static"===Y(i).position;)i=X(i);return i&&("html"===S(i)||"body"===S(i)&&"static"===Y(i).position)?e:i||function(t){var e=/firefox/i.test(j());if(/Trident/i.test(j())&&P(t)&&"fixed"===Y(t).position)return null;var i=V(t);for(O(i)&&(i=i.host);P(i)&&["html","body"].indexOf(S(i))<0;){var n=Y(i);if("none"!==n.transform||"none"!==n.perspective||"paint"===n.contain||-1!==["transform","perspective"].indexOf(n.willChange)||e&&"filter"===n.willChange||e&&n.filter&&"none"!==n.filter)return i;i=i.parentNode}return null}(t)||e}function G(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function U(t,e,i){return k(t,D(e,i))}function K(t){return Object.assign({},{top:0,right:0,bottom:0,left:0},t)}function Z(t,e){return e.reduce((function(e,i){return e[i]=t,e}),{})}const Q={name:"arrow",enabled:!0,phase:"main",fn:function(t){var e,i=t.state,a=t.name,c=t.options,h=i.elements.arrow,u=i.modifiersData.popperOffsets,p=I(i.placement),d=G(p),f=[s,o].indexOf(p)>=0?"height":"width";if(h&&u){var m=function(t,e){return K("number"!=typeof(t="function"==typeof t?t(Object.assign({},e.rects,{placement:e.placement})):t)?t:Z(t,l))}(c.padding,i),v=F(h),_="y"===d?n:s,g="y"===d?r:o,y=i.rects.reference[f]+i.rects.reference[d]-u[d]-i.rects.popper[f],b=u[d]-i.rects.reference[d],w=$(h),x=w?"y"===d?w.clientHeight||0:w.clientWidth||0:0,E=y/2-b/2,M=m[_],T=x-v[f]-m[g],L=x/2-v[f]/2+E,S=U(M,L,T),A=d;i.modifiersData[a]=((e={})[A]=S,e.centerOffset=S-L,e)}},effect:function(t){var e=t.state,i=t.options.element,n=void 0===i?"[data-popper-arrow]":i;null!=n&&("string"!=typeof n||(n=e.elements.popper.querySelector(n)))&&q(e.elements.popper,n)&&(e.elements.arrow=n)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function J(t){return t.split("-")[1]}var tt={top:"auto",right:"auto",bottom:"auto",left:"auto"};function et(t){var e,i=t.popper,a=t.popperRect,l=t.placement,c=t.variation,u=t.offsets,p=t.position,d=t.gpuAcceleration,f=t.adaptive,m=t.roundOffsets,v=t.isFixed,_=u.x,g=void 0===_?0:_,y=u.y,b=void 0===y?0:y,w="function"==typeof m?m({x:g,y:b}):{x:g,y:b};g=w.x,b=w.y;var x=u.hasOwnProperty("x"),E=u.hasOwnProperty("y"),M=s,T=n,L=window;if(f){var S=$(i),C="clientHeight",P="clientWidth";if(S===A(i)&&"static"!==Y(S=B(i)).position&&"absolute"===p&&(C="scrollHeight",P="scrollWidth"),l===n||(l===s||l===o)&&c===h)T=r,b-=(v&&S===L&&L.visualViewport?L.visualViewport.height:S[C])-a.height,b*=d?1:-1;if(l===s||(l===n||l===r)&&c===h)M=o,g-=(v&&S===L&&L.visualViewport?L.visualViewport.width:S[P])-a.width,g*=d?1:-1}var O,R=Object.assign({position:p},f&&tt),I=!0===m?function(t,e){var i=t.x,n=t.y,r=e.devicePixelRatio||1;return{x:z(i*r)/r||0,y:z(n*r)/r||0}}({x:g,y:b},A(i)):{x:g,y:b};return g=I.x,b=I.y,d?Object.assign({},R,((O={})[T]=E?"0":"",O[M]=x?"0":"",O.transform=(L.devicePixelRatio||1)<=1?"translate("+g+"px, "+b+"px)":"translate3d("+g+"px, "+b+"px, 0)",O)):Object.assign({},R,((e={})[T]=E?b+"px":"",e[M]=x?g+"px":"",e.transform="",e))}const it={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(t){var e=t.state,i=t.options,n=i.gpuAcceleration,r=void 0===n||n,o=i.adaptive,s=void 0===o||o,a=i.roundOffsets,l=void 0===a||a,c={placement:I(e.placement),variation:J(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:r,isFixed:"fixed"===e.options.strategy};null!=e.modifiersData.popperOffsets&&(e.styles.popper=Object.assign({},e.styles.popper,et(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:s,roundOffsets:l})))),null!=e.modifiersData.arrow&&(e.styles.arrow=Object.assign({},e.styles.arrow,et(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})},data:{}};var nt={passive:!0};const rt={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(t){var e=t.state,i=t.instance,n=t.options,r=n.scroll,o=void 0===r||r,s=n.resize,a=void 0===s||s,l=A(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return o&&c.forEach((function(t){t.addEventListener("scroll",i.update,nt)})),a&&l.addEventListener("resize",i.update,nt),function(){o&&c.forEach((function(t){t.removeEventListener("scroll",i.update,nt)})),a&&l.removeEventListener("resize",i.update,nt)}},data:{}};var ot={left:"right",right:"left",bottom:"top",top:"bottom"};function st(t){return t.replace(/left|right|bottom|top/g,(function(t){return ot[t]}))}var at={start:"end",end:"start"};function lt(t){return t.replace(/start|end/g,(function(t){return at[t]}))}function ct(t){var e=A(t);return{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function ht(t){return H(B(t)).left+ct(t).scrollLeft}function ut(t){var e=Y(t),i=e.overflow,n=e.overflowX,r=e.overflowY;return/auto|scroll|overlay|hidden/.test(i+r+n)}function pt(t){return["html","body","#document"].indexOf(S(t))>=0?t.ownerDocument.body:P(t)&&ut(t)?t:pt(V(t))}function dt(t,e){var i;void 0===e&&(e=[]);var n=pt(t),r=n===(null==(i=t.ownerDocument)?void 0:i.body),o=A(n),s=r?[o].concat(o.visualViewport||[],ut(n)?n:[]):n,a=e.concat(s);return r?a:a.concat(dt(V(s)))}function ft(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function mt(t,e,i){return e===p?ft(function(t,e){var i=A(t),n=B(t),r=i.visualViewport,o=n.clientWidth,s=n.clientHeight,a=0,l=0;if(r){o=r.width,s=r.height;var c=N();(c||!c&&"fixed"===e)&&(a=r.offsetLeft,l=r.offsetTop)}return{width:o,height:s,x:a+ht(t),y:l}}(t,i)):C(e)?function(t,e){var i=H(t,!1,"fixed"===e);return i.top=i.top+t.clientTop,i.left=i.left+t.clientLeft,i.bottom=i.top+t.clientHeight,i.right=i.left+t.clientWidth,i.width=t.clientWidth,i.height=t.clientHeight,i.x=i.left,i.y=i.top,i}(e,i):ft(function(t){var e,i=B(t),n=ct(t),r=null==(e=t.ownerDocument)?void 0:e.body,o=k(i.scrollWidth,i.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),s=k(i.scrollHeight,i.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),a=-n.scrollLeft+ht(t),l=-n.scrollTop;return"rtl"===Y(r||i).direction&&(a+=k(i.clientWidth,r?r.clientWidth:0)-o),{width:o,height:s,x:a,y:l}}(B(t)))}function vt(t,e,i,n){var r="clippingParents"===e?function(t){var e=dt(V(t)),i=["absolute","fixed"].indexOf(Y(t).position)>=0&&P(t)?$(t):t;return C(i)?e.filter((function(t){return C(t)&&q(t,i)&&"body"!==S(t)})):[]}(t):[].concat(e),o=[].concat(r,[i]),s=o[0],a=o.reduce((function(e,i){var r=mt(t,i,n);return e.top=k(r.top,e.top),e.right=D(r.right,e.right),e.bottom=D(r.bottom,e.bottom),e.left=k(r.left,e.left),e}),mt(t,s,n));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function _t(t){var e,i=t.reference,a=t.element,l=t.placement,u=l?I(l):null,p=l?J(l):null,d=i.x+i.width/2-a.width/2,f=i.y+i.height/2-a.height/2;switch(u){case n:e={x:d,y:i.y-a.height};break;case r:e={x:d,y:i.y+i.height};break;case o:e={x:i.x+i.width,y:f};break;case s:e={x:i.x-a.width,y:f};break;default:e={x:i.x,y:i.y}}var m=u?G(u):null;if(null!=m){var v="y"===m?"height":"width";switch(p){case c:e[m]=e[m]-(i[v]/2-a[v]/2);break;case h:e[m]=e[m]+(i[v]/2-a[v]/2)}}return e}function gt(t,e){void 0===e&&(e={});var i=e,s=i.placement,a=void 0===s?t.placement:s,c=i.strategy,h=void 0===c?t.strategy:c,m=i.boundary,v=void 0===m?u:m,_=i.rootBoundary,g=void 0===_?p:_,y=i.elementContext,b=void 0===y?d:y,w=i.altBoundary,x=void 0!==w&&w,E=i.padding,M=void 0===E?0:E,T=K("number"!=typeof M?M:Z(M,l)),L=b===d?f:d,S=t.rects.popper,A=t.elements[x?L:b],P=vt(C(A)?A:A.contextElement||B(t.elements.popper),v,g,h),O=H(t.elements.reference),R=_t({reference:O,element:S,strategy:"absolute",placement:a}),I=ft(Object.assign({},S,R)),k=b===d?I:O,D={top:P.top-k.top+T.top,bottom:k.bottom-P.bottom+T.bottom,left:P.left-k.left+T.left,right:k.right-P.right+T.right},z=t.modifiersData.offset;if(b===d&&z){var j=z[a];Object.keys(D).forEach((function(t){var e=[o,r].indexOf(t)>=0?1:-1,i=[n,r].indexOf(t)>=0?"y":"x";D[t]+=j[i]*e}))}return D}const yt={name:"flip",enabled:!0,phase:"main",fn:function(t){var e=t.state,i=t.options,h=t.name;if(!e.modifiersData[h]._skip){for(var u=i.mainAxis,p=void 0===u||u,d=i.altAxis,f=void 0===d||d,_=i.fallbackPlacements,g=i.padding,y=i.boundary,b=i.rootBoundary,w=i.altBoundary,x=i.flipVariations,E=void 0===x||x,M=i.allowedAutoPlacements,T=e.options.placement,L=I(T),S=_||(L===T||!E?[st(T)]:function(t){if(I(t)===a)return[];var e=st(t);return[lt(t),e,lt(e)]}(T)),A=[T].concat(S).reduce((function(t,i){return t.concat(I(i)===a?function(t,e){void 0===e&&(e={});var i=e,n=i.placement,r=i.boundary,o=i.rootBoundary,s=i.padding,a=i.flipVariations,c=i.allowedAutoPlacements,h=void 0===c?v:c,u=J(n),p=u?a?m:m.filter((function(t){return J(t)===u})):l,d=p.filter((function(t){return h.indexOf(t)>=0}));0===d.length&&(d=p);var f=d.reduce((function(e,i){return e[i]=gt(t,{placement:i,boundary:r,rootBoundary:o,padding:s})[I(i)],e}),{});return Object.keys(f).sort((function(t,e){return f[t]-f[e]}))}(e,{placement:i,boundary:y,rootBoundary:b,padding:g,flipVariations:E,allowedAutoPlacements:M}):i)}),[]),C=e.rects.reference,P=e.rects.popper,O=new Map,R=!0,k=A[0],D=0;D<A.length;D++){var z=A[D],j=I(z),N=J(z)===c,H=[n,r].indexOf(j)>=0,F=H?"width":"height",q=gt(e,{placement:z,boundary:y,rootBoundary:b,altBoundary:w,padding:g}),Y=H?N?o:s:N?r:n;C[F]>P[F]&&(Y=st(Y));var W=st(Y),B=[];if(p&&B.push(q[j]<=0),f&&B.push(q[Y]<=0,q[W]<=0),B.every((function(t){return t}))){k=z,R=!1;break}O.set(z,B)}if(R)for(var V=function(t){var e=A.find((function(e){var i=O.get(e);if(i)return i.slice(0,t).every((function(t){return t}))}));if(e)return k=e,"break"},X=E?3:1;X>0;X--){if("break"===V(X))break}e.placement!==k&&(e.modifiersData[h]._skip=!0,e.placement=k,e.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function bt(t,e,i){return void 0===i&&(i={x:0,y:0}),{top:t.top-e.height-i.y,right:t.right-e.width+i.x,bottom:t.bottom-e.height+i.y,left:t.left-e.width-i.x}}function wt(t){return[n,o,r,s].some((function(e){return t[e]>=0}))}const xt={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(t){var e=t.state,i=t.name,n=e.rects.reference,r=e.rects.popper,o=e.modifiersData.preventOverflow,s=gt(e,{elementContext:"reference"}),a=gt(e,{altBoundary:!0}),l=bt(s,n),c=bt(a,r,o),h=wt(l),u=wt(c);e.modifiersData[i]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:h,hasPopperEscaped:u},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":h,"data-popper-escaped":u})}};const Et={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(t){var e=t.state,i=t.options,r=t.name,a=i.offset,l=void 0===a?[0,0]:a,c=v.reduce((function(t,i){return t[i]=function(t,e,i){var r=I(t),a=[s,n].indexOf(r)>=0?-1:1,l="function"==typeof i?i(Object.assign({},e,{placement:t})):i,c=l[0],h=l[1];return c=c||0,h=(h||0)*a,[s,o].indexOf(r)>=0?{x:h,y:c}:{x:c,y:h}}(i,e.rects,l),t}),{}),h=c[e.placement],u=h.x,p=h.y;null!=e.modifiersData.popperOffsets&&(e.modifiersData.popperOffsets.x+=u,e.modifiersData.popperOffsets.y+=p),e.modifiersData[r]=c}};const Mt={name:"popperOffsets",enabled:!0,phase:"read",fn:function(t){var e=t.state,i=t.name;e.modifiersData[i]=_t({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})},data:{}};const Tt={name:"preventOverflow",enabled:!0,phase:"main",fn:function(t){var e=t.state,i=t.options,a=t.name,l=i.mainAxis,h=void 0===l||l,u=i.altAxis,p=void 0!==u&&u,d=i.boundary,f=i.rootBoundary,m=i.altBoundary,v=i.padding,_=i.tether,g=void 0===_||_,y=i.tetherOffset,b=void 0===y?0:y,w=gt(e,{boundary:d,rootBoundary:f,padding:v,altBoundary:m}),x=I(e.placement),E=J(e.placement),M=!E,T=G(x),L="x"===T?"y":"x",S=e.modifiersData.popperOffsets,A=e.rects.reference,C=e.rects.popper,P="function"==typeof b?b(Object.assign({},e.rects,{placement:e.placement})):b,O="number"==typeof P?{mainAxis:P,altAxis:P}:Object.assign({mainAxis:0,altAxis:0},P),R=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,z={x:0,y:0};if(S){if(h){var j,N="y"===T?n:s,H="y"===T?r:o,q="y"===T?"height":"width",Y=S[T],W=Y+w[N],B=Y-w[H],V=g?-C[q]/2:0,X=E===c?A[q]:C[q],K=E===c?-C[q]:-A[q],Z=e.elements.arrow,Q=g&&Z?F(Z):{width:0,height:0},tt=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},et=tt[N],it=tt[H],nt=U(0,A[q],Q[q]),rt=M?A[q]/2-V-nt-et-O.mainAxis:X-nt-et-O.mainAxis,ot=M?-A[q]/2+V+nt+it+O.mainAxis:K+nt+it+O.mainAxis,st=e.elements.arrow&&$(e.elements.arrow),at=st?"y"===T?st.clientTop||0:st.clientLeft||0:0,lt=null!=(j=null==R?void 0:R[T])?j:0,ct=Y+ot-lt,ht=U(g?D(W,Y+rt-lt-at):W,Y,g?k(B,ct):B);S[T]=ht,z[T]=ht-Y}if(p){var ut,pt="x"===T?n:s,dt="x"===T?r:o,ft=S[L],mt="y"===L?"height":"width",vt=ft+w[pt],_t=ft-w[dt],yt=-1!==[n,s].indexOf(x),bt=null!=(ut=null==R?void 0:R[L])?ut:0,wt=yt?vt:ft-A[mt]-C[mt]-bt+O.altAxis,xt=yt?ft+A[mt]+C[mt]-bt-O.altAxis:_t,Et=g&&yt?function(t,e,i){var n=U(t,e,i);return n>i?i:n}(wt,ft,xt):U(g?wt:vt,ft,g?xt:_t);S[L]=Et,z[L]=Et-ft}e.modifiersData[a]=z}},requiresIfExists:["offset"]};function Lt(t,e,i){void 0===i&&(i=!1);var n,r,o=P(e),s=P(e)&&function(t){var e=t.getBoundingClientRect(),i=z(e.width)/t.offsetWidth||1,n=z(e.height)/t.offsetHeight||1;return 1!==i||1!==n}(e),a=B(e),l=H(t,s,i),c={scrollLeft:0,scrollTop:0},h={x:0,y:0};return(o||!o&&!i)&&(("body"!==S(e)||ut(a))&&(c=(n=e)!==A(n)&&P(n)?{scrollLeft:(r=n).scrollLeft,scrollTop:r.scrollTop}:ct(n)),P(e)?((h=H(e,!0)).x+=e.clientLeft,h.y+=e.clientTop):a&&(h.x=ht(a))),{x:l.left+c.scrollLeft-h.x,y:l.top+c.scrollTop-h.y,width:l.width,height:l.height}}function St(t){var e=new Map,i=new Set,n=[];function r(t){i.add(t.name),[].concat(t.requires||[],t.requiresIfExists||[]).forEach((function(t){if(!i.has(t)){var n=e.get(t);n&&r(n)}})),n.push(t)}return t.forEach((function(t){e.set(t.name,t)})),t.forEach((function(t){i.has(t.name)||r(t)})),n}var At={placement:"bottom",modifiers:[],strategy:"absolute"};function Ct(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return!e.some((function(t){return!(t&&"function"==typeof t.getBoundingClientRect)}))}function Pt(t){void 0===t&&(t={});var e=t,i=e.defaultModifiers,n=void 0===i?[]:i,r=e.defaultOptions,o=void 0===r?At:r;return function(t,e,i){void 0===i&&(i=o);var r,s,a={placement:"bottom",orderedModifiers:[],options:Object.assign({},At,o),modifiersData:{},elements:{reference:t,popper:e},attributes:{},styles:{}},l=[],c=!1,h={state:a,setOptions:function(i){var r="function"==typeof i?i(a.options):i;u(),a.options=Object.assign({},o,a.options,r),a.scrollParents={reference:C(t)?dt(t):t.contextElement?dt(t.contextElement):[],popper:dt(e)};var s,c,p=function(t){var e=St(t);return L.reduce((function(t,i){return t.concat(e.filter((function(t){return t.phase===i})))}),[])}((s=[].concat(n,a.options.modifiers),c=s.reduce((function(t,e){var i=t[e.name];return t[e.name]=i?Object.assign({},i,e,{options:Object.assign({},i.options,e.options),data:Object.assign({},i.data,e.data)}):e,t}),{}),Object.keys(c).map((function(t){return c[t]}))));return a.orderedModifiers=p.filter((function(t){return t.enabled})),a.orderedModifiers.forEach((function(t){var e=t.name,i=t.options,n=void 0===i?{}:i,r=t.effect;if("function"==typeof r){var o=r({state:a,name:e,instance:h,options:n}),s=function(){};l.push(o||s)}})),h.update()},forceUpdate:function(){if(!c){var t=a.elements,e=t.reference,i=t.popper;if(Ct(e,i)){a.rects={reference:Lt(e,$(i),"fixed"===a.options.strategy),popper:F(i)},a.reset=!1,a.placement=a.options.placement,a.orderedModifiers.forEach((function(t){return a.modifiersData[t.name]=Object.assign({},t.data)}));for(var n=0;n<a.orderedModifiers.length;n++)if(!0!==a.reset){var r=a.orderedModifiers[n],o=r.fn,s=r.options,l=void 0===s?{}:s,u=r.name;"function"==typeof o&&(a=o({state:a,options:l,name:u,instance:h})||a)}else a.reset=!1,n=-1}}},update:(r=function(){return new Promise((function(t){h.forceUpdate(),t(a)}))},function(){return s||(s=new Promise((function(t){Promise.resolve().then((function(){s=void 0,t(r())}))}))),s}),destroy:function(){u(),c=!0}};if(!Ct(t,e))return h;function u(){l.forEach((function(t){return t()})),l=[]}return h.setOptions(i).then((function(t){!c&&i.onFirstUpdate&&i.onFirstUpdate(t)})),h}}var Ot=Pt(),Rt=Pt({defaultModifiers:[rt,Mt,it,R,Et,yt,Tt,Q,xt]}),It=Pt({defaultModifiers:[rt,Mt,it,R]})},836:function(t,e,i){t.exports=function(t){"use strict";function e(t){const e=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(t)for(const i in t)if("default"!==i){const n=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(e,i,n.get?n:{enumerable:!0,get:()=>t[i]})}return e.default=t,Object.freeze(e)}const i=e(t),n=new Map,r={set(t,e,i){n.has(t)||n.set(t,new Map);const r=n.get(t);r.has(e)||0===r.size?r.set(e,i):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(r.keys())[0]}.`)},get:(t,e)=>n.has(t)&&n.get(t).get(e)||null,remove(t,e){if(!n.has(t))return;const i=n.get(t);i.delete(e),0===i.size&&n.delete(t)}},o="transitionend",s=t=>(t&&window.CSS&&window.CSS.escape&&(t=t.replace(/#([^\s"#']+)/g,((t,e)=>`#${CSS.escape(e)}`))),t),a=t=>{t.dispatchEvent(new Event(o))},l=t=>!(!t||"object"!=typeof t)&&(void 0!==t.jquery&&(t=t[0]),void 0!==t.nodeType),c=t=>l(t)?t.jquery?t[0]:t:"string"==typeof t&&t.length>0?document.querySelector(s(t)):null,h=t=>{if(!l(t)||0===t.getClientRects().length)return!1;const e="visible"===getComputedStyle(t).getPropertyValue("visibility"),i=t.closest("details:not([open])");if(!i)return e;if(i!==t){const e=t.closest("summary");if(e&&e.parentNode!==i)return!1;if(null===e)return!1}return e},u=t=>!t||t.nodeType!==Node.ELEMENT_NODE||!!t.classList.contains("disabled")||(void 0!==t.disabled?t.disabled:t.hasAttribute("disabled")&&"false"!==t.getAttribute("disabled")),p=t=>{if(!document.documentElement.attachShadow)return null;if("function"==typeof t.getRootNode){const e=t.getRootNode();return e instanceof ShadowRoot?e:null}return t instanceof ShadowRoot?t:t.parentNode?p(t.parentNode):null},d=()=>{},f=t=>{t.offsetHeight},m=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,v=[],_=()=>"rtl"===document.documentElement.dir,g=t=>{var e;e=()=>{const e=m();if(e){const i=t.NAME,n=e.fn[i];e.fn[i]=t.jQueryInterface,e.fn[i].Constructor=t,e.fn[i].noConflict=()=>(e.fn[i]=n,t.jQueryInterface)}},"loading"===document.readyState?(v.length||document.addEventListener("DOMContentLoaded",(()=>{for(const t of v)t()})),v.push(e)):e()},y=(t,e=[],i=t)=>"function"==typeof t?t(...e):i,b=(t,e,i=!0)=>{if(!i)return void y(t);const n=(t=>{if(!t)return 0;let{transitionDuration:e,transitionDelay:i}=window.getComputedStyle(t);const n=Number.parseFloat(e),r=Number.parseFloat(i);return n||r?(e=e.split(",")[0],i=i.split(",")[0],1e3*(Number.parseFloat(e)+Number.parseFloat(i))):0})(e)+5;let r=!1;const s=({target:i})=>{i===e&&(r=!0,e.removeEventListener(o,s),y(t))};e.addEventListener(o,s),setTimeout((()=>{r||a(e)}),n)},w=(t,e,i,n)=>{const r=t.length;let o=t.indexOf(e);return-1===o?!i&&n?t[r-1]:t[0]:(o+=i?1:-1,n&&(o=(o+r)%r),t[Math.max(0,Math.min(o,r-1))])},x=/[^.]*(?=\..*)\.|.*/,E=/\..*/,M=/::\d+$/,T={};let L=1;const S={mouseenter:"mouseover",mouseleave:"mouseout"},A=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function C(t,e){return e&&`${e}::${L++}`||t.uidEvent||L++}function P(t){const e=C(t);return t.uidEvent=e,T[e]=T[e]||{},T[e]}function O(t,e,i=null){return Object.values(t).find((t=>t.callable===e&&t.delegationSelector===i))}function R(t,e,i){const n="string"==typeof e,r=n?i:e||i;let o=z(t);return A.has(o)||(o=t),[n,r,o]}function I(t,e,i,n,r){if("string"!=typeof e||!t)return;let[o,s,a]=R(e,i,n);if(e in S){const t=t=>function(e){if(!e.relatedTarget||e.relatedTarget!==e.delegateTarget&&!e.delegateTarget.contains(e.relatedTarget))return t.call(this,e)};s=t(s)}const l=P(t),c=l[a]||(l[a]={}),h=O(c,s,o?i:null);if(h)return void(h.oneOff=h.oneOff&&r);const u=C(s,e.replace(x,"")),p=o?function(t,e,i){return function n(r){const o=t.querySelectorAll(e);for(let{target:s}=r;s&&s!==this;s=s.parentNode)for(const a of o)if(a===s)return N(r,{delegateTarget:s}),n.oneOff&&j.off(t,r.type,e,i),i.apply(s,[r])}}(t,i,s):function(t,e){return function i(n){return N(n,{delegateTarget:t}),i.oneOff&&j.off(t,n.type,e),e.apply(t,[n])}}(t,s);p.delegationSelector=o?i:null,p.callable=s,p.oneOff=r,p.uidEvent=u,c[u]=p,t.addEventListener(a,p,o)}function k(t,e,i,n,r){const o=O(e[i],n,r);o&&(t.removeEventListener(i,o,Boolean(r)),delete e[i][o.uidEvent])}function D(t,e,i,n){const r=e[i]||{};for(const[o,s]of Object.entries(r))o.includes(n)&&k(t,e,i,s.callable,s.delegationSelector)}function z(t){return t=t.replace(E,""),S[t]||t}const j={on(t,e,i,n){I(t,e,i,n,!1)},one(t,e,i,n){I(t,e,i,n,!0)},off(t,e,i,n){if("string"!=typeof e||!t)return;const[r,o,s]=R(e,i,n),a=s!==e,l=P(t),c=l[s]||{},h=e.startsWith(".");if(void 0===o){if(h)for(const i of Object.keys(l))D(t,l,i,e.slice(1));for(const[i,n]of Object.entries(c)){const r=i.replace(M,"");a&&!e.includes(r)||k(t,l,s,n.callable,n.delegationSelector)}}else{if(!Object.keys(c).length)return;k(t,l,s,o,r?i:null)}},trigger(t,e,i){if("string"!=typeof e||!t)return null;const n=m();let r=null,o=!0,s=!0,a=!1;e!==z(e)&&n&&(r=n.Event(e,i),n(t).trigger(r),o=!r.isPropagationStopped(),s=!r.isImmediatePropagationStopped(),a=r.isDefaultPrevented());const l=N(new Event(e,{bubbles:o,cancelable:!0}),i);return a&&l.preventDefault(),s&&t.dispatchEvent(l),l.defaultPrevented&&r&&r.preventDefault(),l}};function N(t,e={}){for(const[i,n]of Object.entries(e))try{t[i]=n}catch(e){Object.defineProperty(t,i,{configurable:!0,get:()=>n})}return t}function H(t){if("true"===t)return!0;if("false"===t)return!1;if(t===Number(t).toString())return Number(t);if(""===t||"null"===t)return null;if("string"!=typeof t)return t;try{return JSON.parse(decodeURIComponent(t))}catch(e){return t}}function F(t){return t.replace(/[A-Z]/g,(t=>`-${t.toLowerCase()}`))}const q={setDataAttribute(t,e,i){t.setAttribute(`data-bs-${F(e)}`,i)},removeDataAttribute(t,e){t.removeAttribute(`data-bs-${F(e)}`)},getDataAttributes(t){if(!t)return{};const e={},i=Object.keys(t.dataset).filter((t=>t.startsWith("bs")&&!t.startsWith("bsConfig")));for(const n of i){let i=n.replace(/^bs/,"");i=i.charAt(0).toLowerCase()+i.slice(1,i.length),e[i]=H(t.dataset[n])}return e},getDataAttribute:(t,e)=>H(t.getAttribute(`data-bs-${F(e)}`))};class Y{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(t){return t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t}_mergeConfigObj(t,e){const i=l(e)?q.getDataAttribute(e,"config"):{};return{...this.constructor.Default,..."object"==typeof i?i:{},...l(e)?q.getDataAttributes(e):{},..."object"==typeof t?t:{}}}_typeCheckConfig(t,e=this.constructor.DefaultType){for(const[n,r]of Object.entries(e)){const e=t[n],o=l(e)?"element":null==(i=e)?`${i}`:Object.prototype.toString.call(i).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(r).test(o))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${n}" provided type "${o}" but expected type "${r}".`)}var i}}class W extends Y{constructor(t,e){super(),(t=c(t))&&(this._element=t,this._config=this._getConfig(e),r.set(this._element,this.constructor.DATA_KEY,this))}dispose(){r.remove(this._element,this.constructor.DATA_KEY),j.off(this._element,this.constructor.EVENT_KEY);for(const t of Object.getOwnPropertyNames(this))this[t]=null}_queueCallback(t,e,i=!0){b(t,e,i)}_getConfig(t){return t=this._mergeConfigObj(t,this._element),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}static getInstance(t){return r.get(c(t),this.DATA_KEY)}static getOrCreateInstance(t,e={}){return this.getInstance(t)||new this(t,"object"==typeof e?e:null)}static get VERSION(){return"5.3.3"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(t){return`${t}${this.EVENT_KEY}`}}const B=t=>{let e=t.getAttribute("data-bs-target");if(!e||"#"===e){let i=t.getAttribute("href");if(!i||!i.includes("#")&&!i.startsWith("."))return null;i.includes("#")&&!i.startsWith("#")&&(i=`#${i.split("#")[1]}`),e=i&&"#"!==i?i.trim():null}return e?e.split(",").map((t=>s(t))).join(","):null},V={find:(t,e=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(e,t)),findOne:(t,e=document.documentElement)=>Element.prototype.querySelector.call(e,t),children:(t,e)=>[].concat(...t.children).filter((t=>t.matches(e))),parents(t,e){const i=[];let n=t.parentNode.closest(e);for(;n;)i.push(n),n=n.parentNode.closest(e);return i},prev(t,e){let i=t.previousElementSibling;for(;i;){if(i.matches(e))return[i];i=i.previousElementSibling}return[]},next(t,e){let i=t.nextElementSibling;for(;i;){if(i.matches(e))return[i];i=i.nextElementSibling}return[]},focusableChildren(t){const e=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map((t=>`${t}:not([tabindex^="-"])`)).join(",");return this.find(e,t).filter((t=>!u(t)&&h(t)))},getSelectorFromElement(t){const e=B(t);return e&&V.findOne(e)?e:null},getElementFromSelector(t){const e=B(t);return e?V.findOne(e):null},getMultipleElementsFromSelector(t){const e=B(t);return e?V.find(e):[]}},X=(t,e="hide")=>{const i=`click.dismiss${t.EVENT_KEY}`,n=t.NAME;j.on(document,i,`[data-bs-dismiss="${n}"]`,(function(i){if(["A","AREA"].includes(this.tagName)&&i.preventDefault(),u(this))return;const r=V.getElementFromSelector(this)||this.closest(`.${n}`);t.getOrCreateInstance(r)[e]()}))},$=".bs.alert",G=`close${$}`,U=`closed${$}`;class K extends W{static get NAME(){return"alert"}close(){if(j.trigger(this._element,G).defaultPrevented)return;this._element.classList.remove("show");const t=this._element.classList.contains("fade");this._queueCallback((()=>this._destroyElement()),this._element,t)}_destroyElement(){this._element.remove(),j.trigger(this._element,U),this.dispose()}static jQueryInterface(t){return this.each((function(){const e=K.getOrCreateInstance(this);if("string"==typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t](this)}}))}}X(K,"close"),g(K);const Z='[data-bs-toggle="button"]';class Q extends W{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(t){return this.each((function(){const e=Q.getOrCreateInstance(this);"toggle"===t&&e[t]()}))}}j.on(document,"click.bs.button.data-api",Z,(t=>{t.preventDefault();const e=t.target.closest(Z);Q.getOrCreateInstance(e).toggle()})),g(Q);const J=".bs.swipe",tt=`touchstart${J}`,et=`touchmove${J}`,it=`touchend${J}`,nt=`pointerdown${J}`,rt=`pointerup${J}`,ot={endCallback:null,leftCallback:null,rightCallback:null},st={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class at extends Y{constructor(t,e){super(),this._element=t,t&&at.isSupported()&&(this._config=this._getConfig(e),this._deltaX=0,this._supportPointerEvents=Boolean(window.PointerEvent),this._initEvents())}static get Default(){return ot}static get DefaultType(){return st}static get NAME(){return"swipe"}dispose(){j.off(this._element,J)}_start(t){this._supportPointerEvents?this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX):this._deltaX=t.touches[0].clientX}_end(t){this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX-this._deltaX),this._handleSwipe(),y(this._config.endCallback)}_move(t){this._deltaX=t.touches&&t.touches.length>1?0:t.touches[0].clientX-this._deltaX}_handleSwipe(){const t=Math.abs(this._deltaX);if(t<=40)return;const e=t/this._deltaX;this._deltaX=0,e&&y(e>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(j.on(this._element,nt,(t=>this._start(t))),j.on(this._element,rt,(t=>this._end(t))),this._element.classList.add("pointer-event")):(j.on(this._element,tt,(t=>this._start(t))),j.on(this._element,et,(t=>this._move(t))),j.on(this._element,it,(t=>this._end(t))))}_eventIsPointerPenTouch(t){return this._supportPointerEvents&&("pen"===t.pointerType||"touch"===t.pointerType)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const lt=".bs.carousel",ct=".data-api",ht="next",ut="prev",pt="left",dt="right",ft=`slide${lt}`,mt=`slid${lt}`,vt=`keydown${lt}`,_t=`mouseenter${lt}`,gt=`mouseleave${lt}`,yt=`dragstart${lt}`,bt=`load${lt}${ct}`,wt=`click${lt}${ct}`,xt="carousel",Et="active",Mt=".active",Tt=".carousel-item",Lt=Mt+Tt,St={ArrowLeft:dt,ArrowRight:pt},At={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},Ct={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Pt extends W{constructor(t,e){super(t,e),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=V.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===xt&&this.cycle()}static get Default(){return At}static get DefaultType(){return Ct}static get NAME(){return"carousel"}next(){this._slide(ht)}nextWhenVisible(){!document.hidden&&h(this._element)&&this.next()}prev(){this._slide(ut)}pause(){this._isSliding&&a(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval((()=>this.nextWhenVisible()),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?j.one(this._element,mt,(()=>this.cycle())):this.cycle())}to(t){const e=this._getItems();if(t>e.length-1||t<0)return;if(this._isSliding)return void j.one(this._element,mt,(()=>this.to(t)));const i=this._getItemIndex(this._getActive());if(i===t)return;const n=t>i?ht:ut;this._slide(n,e[t])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(t){return t.defaultInterval=t.interval,t}_addEventListeners(){this._config.keyboard&&j.on(this._element,vt,(t=>this._keydown(t))),"hover"===this._config.pause&&(j.on(this._element,_t,(()=>this.pause())),j.on(this._element,gt,(()=>this._maybeEnableCycle()))),this._config.touch&&at.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const t of V.find(".carousel-item img",this._element))j.on(t,yt,(t=>t.preventDefault()));const t={leftCallback:()=>this._slide(this._directionToOrder(pt)),rightCallback:()=>this._slide(this._directionToOrder(dt)),endCallback:()=>{"hover"===this._config.pause&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout((()=>this._maybeEnableCycle()),500+this._config.interval))}};this._swipeHelper=new at(this._element,t)}_keydown(t){if(/input|textarea/i.test(t.target.tagName))return;const e=St[t.key];e&&(t.preventDefault(),this._slide(this._directionToOrder(e)))}_getItemIndex(t){return this._getItems().indexOf(t)}_setActiveIndicatorElement(t){if(!this._indicatorsElement)return;const e=V.findOne(Mt,this._indicatorsElement);e.classList.remove(Et),e.removeAttribute("aria-current");const i=V.findOne(`[data-bs-slide-to="${t}"]`,this._indicatorsElement);i&&(i.classList.add(Et),i.setAttribute("aria-current","true"))}_updateInterval(){const t=this._activeElement||this._getActive();if(!t)return;const e=Number.parseInt(t.getAttribute("data-bs-interval"),10);this._config.interval=e||this._config.defaultInterval}_slide(t,e=null){if(this._isSliding)return;const i=this._getActive(),n=t===ht,r=e||w(this._getItems(),i,n,this._config.wrap);if(r===i)return;const o=this._getItemIndex(r),s=e=>j.trigger(this._element,e,{relatedTarget:r,direction:this._orderToDirection(t),from:this._getItemIndex(i),to:o});if(s(ft).defaultPrevented)return;if(!i||!r)return;const a=Boolean(this._interval);this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(o),this._activeElement=r;const l=n?"carousel-item-start":"carousel-item-end",c=n?"carousel-item-next":"carousel-item-prev";r.classList.add(c),f(r),i.classList.add(l),r.classList.add(l),this._queueCallback((()=>{r.classList.remove(l,c),r.classList.add(Et),i.classList.remove(Et,c,l),this._isSliding=!1,s(mt)}),i,this._isAnimated()),a&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return V.findOne(Lt,this._element)}_getItems(){return V.find(Tt,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(t){return _()?t===pt?ut:ht:t===pt?ht:ut}_orderToDirection(t){return _()?t===ut?pt:dt:t===ut?dt:pt}static jQueryInterface(t){return this.each((function(){const e=Pt.getOrCreateInstance(this,t);if("number"!=typeof t){if("string"==typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t]()}}else e.to(t)}))}}j.on(document,wt,"[data-bs-slide], [data-bs-slide-to]",(function(t){const e=V.getElementFromSelector(this);if(!e||!e.classList.contains(xt))return;t.preventDefault();const i=Pt.getOrCreateInstance(e),n=this.getAttribute("data-bs-slide-to");return n?(i.to(n),void i._maybeEnableCycle()):"next"===q.getDataAttribute(this,"slide")?(i.next(),void i._maybeEnableCycle()):(i.prev(),void i._maybeEnableCycle())})),j.on(window,bt,(()=>{const t=V.find('[data-bs-ride="carousel"]');for(const e of t)Pt.getOrCreateInstance(e)})),g(Pt);const Ot=".bs.collapse",Rt=`show${Ot}`,It=`shown${Ot}`,kt=`hide${Ot}`,Dt=`hidden${Ot}`,zt=`click${Ot}.data-api`,jt="show",Nt="collapse",Ht="collapsing",Ft=`:scope .${Nt} .${Nt}`,qt='[data-bs-toggle="collapse"]',Yt={parent:null,toggle:!0},Wt={parent:"(null|element)",toggle:"boolean"};class Bt extends W{constructor(t,e){super(t,e),this._isTransitioning=!1,this._triggerArray=[];const i=V.find(qt);for(const t of i){const e=V.getSelectorFromElement(t),i=V.find(e).filter((t=>t===this._element));null!==e&&i.length&&this._triggerArray.push(t)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return Yt}static get DefaultType(){return Wt}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let t=[];if(this._config.parent&&(t=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter((t=>t!==this._element)).map((t=>Bt.getOrCreateInstance(t,{toggle:!1})))),t.length&&t[0]._isTransitioning)return;if(j.trigger(this._element,Rt).defaultPrevented)return;for(const e of t)e.hide();const e=this._getDimension();this._element.classList.remove(Nt),this._element.classList.add(Ht),this._element.style[e]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const i=`scroll${e[0].toUpperCase()+e.slice(1)}`;this._queueCallback((()=>{this._isTransitioning=!1,this._element.classList.remove(Ht),this._element.classList.add(Nt,jt),this._element.style[e]="",j.trigger(this._element,It)}),this._element,!0),this._element.style[e]=`${this._element[i]}px`}hide(){if(this._isTransitioning||!this._isShown())return;if(j.trigger(this._element,kt).defaultPrevented)return;const t=this._getDimension();this._element.style[t]=`${this._element.getBoundingClientRect()[t]}px`,f(this._element),this._element.classList.add(Ht),this._element.classList.remove(Nt,jt);for(const t of this._triggerArray){const e=V.getElementFromSelector(t);e&&!this._isShown(e)&&this._addAriaAndCollapsedClass([t],!1)}this._isTransitioning=!0,this._element.style[t]="",this._queueCallback((()=>{this._isTransitioning=!1,this._element.classList.remove(Ht),this._element.classList.add(Nt),j.trigger(this._element,Dt)}),this._element,!0)}_isShown(t=this._element){return t.classList.contains(jt)}_configAfterMerge(t){return t.toggle=Boolean(t.toggle),t.parent=c(t.parent),t}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const t=this._getFirstLevelChildren(qt);for(const e of t){const t=V.getElementFromSelector(e);t&&this._addAriaAndCollapsedClass([e],this._isShown(t))}}_getFirstLevelChildren(t){const e=V.find(Ft,this._config.parent);return V.find(t,this._config.parent).filter((t=>!e.includes(t)))}_addAriaAndCollapsedClass(t,e){if(t.length)for(const i of t)i.classList.toggle("collapsed",!e),i.setAttribute("aria-expanded",e)}static jQueryInterface(t){const e={};return"string"==typeof t&&/show|hide/.test(t)&&(e.toggle=!1),this.each((function(){const i=Bt.getOrCreateInstance(this,e);if("string"==typeof t){if(void 0===i[t])throw new TypeError(`No method named "${t}"`);i[t]()}}))}}j.on(document,zt,qt,(function(t){("A"===t.target.tagName||t.delegateTarget&&"A"===t.delegateTarget.tagName)&&t.preventDefault();for(const t of V.getMultipleElementsFromSelector(this))Bt.getOrCreateInstance(t,{toggle:!1}).toggle()})),g(Bt);const Vt="dropdown",Xt=".bs.dropdown",$t=".data-api",Gt="ArrowUp",Ut="ArrowDown",Kt=`hide${Xt}`,Zt=`hidden${Xt}`,Qt=`show${Xt}`,Jt=`shown${Xt}`,te=`click${Xt}${$t}`,ee=`keydown${Xt}${$t}`,ie=`keyup${Xt}${$t}`,ne="show",re='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',oe=`${re}.${ne}`,se=".dropdown-menu",ae=_()?"top-end":"top-start",le=_()?"top-start":"top-end",ce=_()?"bottom-end":"bottom-start",he=_()?"bottom-start":"bottom-end",ue=_()?"left-start":"right-start",pe=_()?"right-start":"left-start",de={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},fe={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class me extends W{constructor(t,e){super(t,e),this._popper=null,this._parent=this._element.parentNode,this._menu=V.next(this._element,se)[0]||V.prev(this._element,se)[0]||V.findOne(se,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return de}static get DefaultType(){return fe}static get NAME(){return Vt}toggle(){return this._isShown()?this.hide():this.show()}show(){if(u(this._element)||this._isShown())return;const t={relatedTarget:this._element};if(!j.trigger(this._element,Qt,t).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const t of[].concat(...document.body.children))j.on(t,"mouseover",d);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(ne),this._element.classList.add(ne),j.trigger(this._element,Jt,t)}}hide(){if(u(this._element)||!this._isShown())return;const t={relatedTarget:this._element};this._completeHide(t)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(t){if(!j.trigger(this._element,Kt,t).defaultPrevented){if("ontouchstart"in document.documentElement)for(const t of[].concat(...document.body.children))j.off(t,"mouseover",d);this._popper&&this._popper.destroy(),this._menu.classList.remove(ne),this._element.classList.remove(ne),this._element.setAttribute("aria-expanded","false"),q.removeDataAttribute(this._menu,"popper"),j.trigger(this._element,Zt,t)}}_getConfig(t){if("object"==typeof(t=super._getConfig(t)).reference&&!l(t.reference)&&"function"!=typeof t.reference.getBoundingClientRect)throw new TypeError(`${Vt.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return t}_createPopper(){if(void 0===i)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let t=this._element;"parent"===this._config.reference?t=this._parent:l(this._config.reference)?t=c(this._config.reference):"object"==typeof this._config.reference&&(t=this._config.reference);const e=this._getPopperConfig();this._popper=i.createPopper(t,this._menu,e)}_isShown(){return this._menu.classList.contains(ne)}_getPlacement(){const t=this._parent;if(t.classList.contains("dropend"))return ue;if(t.classList.contains("dropstart"))return pe;if(t.classList.contains("dropup-center"))return"top";if(t.classList.contains("dropdown-center"))return"bottom";const e="end"===getComputedStyle(this._menu).getPropertyValue("--bs-position").trim();return t.classList.contains("dropup")?e?le:ae:e?he:ce}_detectNavbar(){return null!==this._element.closest(".navbar")}_getOffset(){const{offset:t}=this._config;return"string"==typeof t?t.split(",").map((t=>Number.parseInt(t,10))):"function"==typeof t?e=>t(e,this._element):t}_getPopperConfig(){const t={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||"static"===this._config.display)&&(q.setDataAttribute(this._menu,"popper","static"),t.modifiers=[{name:"applyStyles",enabled:!1}]),{...t,...y(this._config.popperConfig,[t])}}_selectMenuItem({key:t,target:e}){const i=V.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter((t=>h(t)));i.length&&w(i,e,t===Ut,!i.includes(e)).focus()}static jQueryInterface(t){return this.each((function(){const e=me.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t])throw new TypeError(`No method named "${t}"`);e[t]()}}))}static clearMenus(t){if(2===t.button||"keyup"===t.type&&"Tab"!==t.key)return;const e=V.find(oe);for(const i of e){const e=me.getInstance(i);if(!e||!1===e._config.autoClose)continue;const n=t.composedPath(),r=n.includes(e._menu);if(n.includes(e._element)||"inside"===e._config.autoClose&&!r||"outside"===e._config.autoClose&&r)continue;if(e._menu.contains(t.target)&&("keyup"===t.type&&"Tab"===t.key||/input|select|option|textarea|form/i.test(t.target.tagName)))continue;const o={relatedTarget:e._element};"click"===t.type&&(o.clickEvent=t),e._completeHide(o)}}static dataApiKeydownHandler(t){const e=/input|textarea/i.test(t.target.tagName),i="Escape"===t.key,n=[Gt,Ut].includes(t.key);if(!n&&!i)return;if(e&&!i)return;t.preventDefault();const r=this.matches(re)?this:V.prev(this,re)[0]||V.next(this,re)[0]||V.findOne(re,t.delegateTarget.parentNode),o=me.getOrCreateInstance(r);if(n)return t.stopPropagation(),o.show(),void o._selectMenuItem(t);o._isShown()&&(t.stopPropagation(),o.hide(),r.focus())}}j.on(document,ee,re,me.dataApiKeydownHandler),j.on(document,ee,se,me.dataApiKeydownHandler),j.on(document,te,me.clearMenus),j.on(document,ie,me.clearMenus),j.on(document,te,re,(function(t){t.preventDefault(),me.getOrCreateInstance(this).toggle()})),g(me);const ve="backdrop",_e="show",ge=`mousedown.bs.${ve}`,ye={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},be={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class we extends Y{constructor(t){super(),this._config=this._getConfig(t),this._isAppended=!1,this._element=null}static get Default(){return ye}static get DefaultType(){return be}static get NAME(){return ve}show(t){if(!this._config.isVisible)return void y(t);this._append();const e=this._getElement();this._config.isAnimated&&f(e),e.classList.add(_e),this._emulateAnimation((()=>{y(t)}))}hide(t){this._config.isVisible?(this._getElement().classList.remove(_e),this._emulateAnimation((()=>{this.dispose(),y(t)}))):y(t)}dispose(){this._isAppended&&(j.off(this._element,ge),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const t=document.createElement("div");t.className=this._config.className,this._config.isAnimated&&t.classList.add("fade"),this._element=t}return this._element}_configAfterMerge(t){return t.rootElement=c(t.rootElement),t}_append(){if(this._isAppended)return;const t=this._getElement();this._config.rootElement.append(t),j.on(t,ge,(()=>{y(this._config.clickCallback)})),this._isAppended=!0}_emulateAnimation(t){b(t,this._getElement(),this._config.isAnimated)}}const xe=".bs.focustrap",Ee=`focusin${xe}`,Me=`keydown.tab${xe}`,Te="backward",Le={autofocus:!0,trapElement:null},Se={autofocus:"boolean",trapElement:"element"};class Ae extends Y{constructor(t){super(),this._config=this._getConfig(t),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return Le}static get DefaultType(){return Se}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),j.off(document,xe),j.on(document,Ee,(t=>this._handleFocusin(t))),j.on(document,Me,(t=>this._handleKeydown(t))),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,j.off(document,xe))}_handleFocusin(t){const{trapElement:e}=this._config;if(t.target===document||t.target===e||e.contains(t.target))return;const i=V.focusableChildren(e);0===i.length?e.focus():this._lastTabNavDirection===Te?i[i.length-1].focus():i[0].focus()}_handleKeydown(t){"Tab"===t.key&&(this._lastTabNavDirection=t.shiftKey?Te:"forward")}}const Ce=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Pe=".sticky-top",Oe="padding-right",Re="margin-right";class Ie{constructor(){this._element=document.body}getWidth(){const t=document.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}hide(){const t=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,Oe,(e=>e+t)),this._setElementAttributes(Ce,Oe,(e=>e+t)),this._setElementAttributes(Pe,Re,(e=>e-t))}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,Oe),this._resetElementAttributes(Ce,Oe),this._resetElementAttributes(Pe,Re)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(t,e,i){const n=this.getWidth();this._applyManipulationCallback(t,(t=>{if(t!==this._element&&window.innerWidth>t.clientWidth+n)return;this._saveInitialAttribute(t,e);const r=window.getComputedStyle(t).getPropertyValue(e);t.style.setProperty(e,`${i(Number.parseFloat(r))}px`)}))}_saveInitialAttribute(t,e){const i=t.style.getPropertyValue(e);i&&q.setDataAttribute(t,e,i)}_resetElementAttributes(t,e){this._applyManipulationCallback(t,(t=>{const i=q.getDataAttribute(t,e);null!==i?(q.removeDataAttribute(t,e),t.style.setProperty(e,i)):t.style.removeProperty(e)}))}_applyManipulationCallback(t,e){if(l(t))e(t);else for(const i of V.find(t,this._element))e(i)}}const ke=".bs.modal",De=`hide${ke}`,ze=`hidePrevented${ke}`,je=`hidden${ke}`,Ne=`show${ke}`,He=`shown${ke}`,Fe=`resize${ke}`,qe=`click.dismiss${ke}`,Ye=`mousedown.dismiss${ke}`,We=`keydown.dismiss${ke}`,Be=`click${ke}.data-api`,Ve="modal-open",Xe="show",$e="modal-static",Ge={backdrop:!0,focus:!0,keyboard:!0},Ue={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Ke extends W{constructor(t,e){super(t,e),this._dialog=V.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new Ie,this._addEventListeners()}static get Default(){return Ge}static get DefaultType(){return Ue}static get NAME(){return"modal"}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){this._isShown||this._isTransitioning||j.trigger(this._element,Ne,{relatedTarget:t}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(Ve),this._adjustDialog(),this._backdrop.show((()=>this._showElement(t))))}hide(){this._isShown&&!this._isTransitioning&&(j.trigger(this._element,De).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(Xe),this._queueCallback((()=>this._hideModal()),this._element,this._isAnimated())))}dispose(){j.off(window,ke),j.off(this._dialog,ke),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new we({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new Ae({trapElement:this._element})}_showElement(t){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const e=V.findOne(".modal-body",this._dialog);e&&(e.scrollTop=0),f(this._element),this._element.classList.add(Xe),this._queueCallback((()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,j.trigger(this._element,He,{relatedTarget:t})}),this._dialog,this._isAnimated())}_addEventListeners(){j.on(this._element,We,(t=>{"Escape"===t.key&&(this._config.keyboard?this.hide():this._triggerBackdropTransition())})),j.on(window,Fe,(()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()})),j.on(this._element,Ye,(t=>{j.one(this._element,qe,(e=>{this._element===t.target&&this._element===e.target&&("static"!==this._config.backdrop?this._config.backdrop&&this.hide():this._triggerBackdropTransition())}))}))}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide((()=>{document.body.classList.remove(Ve),this._resetAdjustments(),this._scrollBar.reset(),j.trigger(this._element,je)}))}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(j.trigger(this._element,ze).defaultPrevented)return;const t=this._element.scrollHeight>document.documentElement.clientHeight,e=this._element.style.overflowY;"hidden"===e||this._element.classList.contains($e)||(t||(this._element.style.overflowY="hidden"),this._element.classList.add($e),this._queueCallback((()=>{this._element.classList.remove($e),this._queueCallback((()=>{this._element.style.overflowY=e}),this._dialog)}),this._dialog),this._element.focus())}_adjustDialog(){const t=this._element.scrollHeight>document.documentElement.clientHeight,e=this._scrollBar.getWidth(),i=e>0;if(i&&!t){const t=_()?"paddingLeft":"paddingRight";this._element.style[t]=`${e}px`}if(!i&&t){const t=_()?"paddingRight":"paddingLeft";this._element.style[t]=`${e}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(t,e){return this.each((function(){const i=Ke.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===i[t])throw new TypeError(`No method named "${t}"`);i[t](e)}}))}}j.on(document,Be,'[data-bs-toggle="modal"]',(function(t){const e=V.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&t.preventDefault(),j.one(e,Ne,(t=>{t.defaultPrevented||j.one(e,je,(()=>{h(this)&&this.focus()}))}));const i=V.findOne(".modal.show");i&&Ke.getInstance(i).hide(),Ke.getOrCreateInstance(e).toggle(this)})),X(Ke),g(Ke);const Ze=".bs.offcanvas",Qe=".data-api",Je=`load${Ze}${Qe}`,ti="show",ei="showing",ii="hiding",ni=".offcanvas.show",ri=`show${Ze}`,oi=`shown${Ze}`,si=`hide${Ze}`,ai=`hidePrevented${Ze}`,li=`hidden${Ze}`,ci=`resize${Ze}`,hi=`click${Ze}${Qe}`,ui=`keydown.dismiss${Ze}`,pi={backdrop:!0,keyboard:!0,scroll:!1},di={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class fi extends W{constructor(t,e){super(t,e),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return pi}static get DefaultType(){return di}static get NAME(){return"offcanvas"}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){this._isShown||j.trigger(this._element,ri,{relatedTarget:t}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||(new Ie).hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(ei),this._queueCallback((()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add(ti),this._element.classList.remove(ei),j.trigger(this._element,oi,{relatedTarget:t})}),this._element,!0))}hide(){this._isShown&&(j.trigger(this._element,si).defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(ii),this._backdrop.hide(),this._queueCallback((()=>{this._element.classList.remove(ti,ii),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||(new Ie).reset(),j.trigger(this._element,li)}),this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const t=Boolean(this._config.backdrop);return new we({className:"offcanvas-backdrop",isVisible:t,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:t?()=>{"static"!==this._config.backdrop?this.hide():j.trigger(this._element,ai)}:null})}_initializeFocusTrap(){return new Ae({trapElement:this._element})}_addEventListeners(){j.on(this._element,ui,(t=>{"Escape"===t.key&&(this._config.keyboard?this.hide():j.trigger(this._element,ai))}))}static jQueryInterface(t){return this.each((function(){const e=fi.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t](this)}}))}}j.on(document,hi,'[data-bs-toggle="offcanvas"]',(function(t){const e=V.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&t.preventDefault(),u(this))return;j.one(e,li,(()=>{h(this)&&this.focus()}));const i=V.findOne(ni);i&&i!==e&&fi.getInstance(i).hide(),fi.getOrCreateInstance(e).toggle(this)})),j.on(window,Je,(()=>{for(const t of V.find(ni))fi.getOrCreateInstance(t).show()})),j.on(window,ci,(()=>{for(const t of V.find("[aria-modal][class*=show][class*=offcanvas-]"))"fixed"!==getComputedStyle(t).position&&fi.getOrCreateInstance(t).hide()})),X(fi),g(fi);const mi={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},vi=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),_i=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,gi=(t,e)=>{const i=t.nodeName.toLowerCase();return e.includes(i)?!vi.has(i)||Boolean(_i.test(t.nodeValue)):e.filter((t=>t instanceof RegExp)).some((t=>t.test(i)))},yi={allowList:mi,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},bi={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},wi={entry:"(string|element|function|null)",selector:"(string|element)"};class xi extends Y{constructor(t){super(),this._config=this._getConfig(t)}static get Default(){return yi}static get DefaultType(){return bi}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map((t=>this._resolvePossibleFunction(t))).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(t){return this._checkContent(t),this._config.content={...this._config.content,...t},this}toHtml(){const t=document.createElement("div");t.innerHTML=this._maybeSanitize(this._config.template);for(const[e,i]of Object.entries(this._config.content))this._setContent(t,i,e);const e=t.children[0],i=this._resolvePossibleFunction(this._config.extraClass);return i&&e.classList.add(...i.split(" ")),e}_typeCheckConfig(t){super._typeCheckConfig(t),this._checkContent(t.content)}_checkContent(t){for(const[e,i]of Object.entries(t))super._typeCheckConfig({selector:e,entry:i},wi)}_setContent(t,e,i){const n=V.findOne(i,t);n&&((e=this._resolvePossibleFunction(e))?l(e)?this._putElementInTemplate(c(e),n):this._config.html?n.innerHTML=this._maybeSanitize(e):n.textContent=e:n.remove())}_maybeSanitize(t){return this._config.sanitize?function(t,e,i){if(!t.length)return t;if(i&&"function"==typeof i)return i(t);const n=(new window.DOMParser).parseFromString(t,"text/html"),r=[].concat(...n.body.querySelectorAll("*"));for(const t of r){const i=t.nodeName.toLowerCase();if(!Object.keys(e).includes(i)){t.remove();continue}const n=[].concat(...t.attributes),r=[].concat(e["*"]||[],e[i]||[]);for(const e of n)gi(e,r)||t.removeAttribute(e.nodeName)}return n.body.innerHTML}(t,this._config.allowList,this._config.sanitizeFn):t}_resolvePossibleFunction(t){return y(t,[this])}_putElementInTemplate(t,e){if(this._config.html)return e.innerHTML="",void e.append(t);e.textContent=t.textContent}}const Ei=new Set(["sanitize","allowList","sanitizeFn"]),Mi="fade",Ti="show",Li=".modal",Si="hide.bs.modal",Ai="hover",Ci="focus",Pi={AUTO:"auto",TOP:"top",RIGHT:_()?"left":"right",BOTTOM:"bottom",LEFT:_()?"right":"left"},Oi={allowList:mi,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},Ri={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class Ii extends W{constructor(t,e){if(void 0===i)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(t,e),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return Oi}static get DefaultType(){return Ri}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),j.off(this._element.closest(Li),Si,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if("none"===this._element.style.display)throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const t=j.trigger(this._element,this.constructor.eventName("show")),e=(p(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(t.defaultPrevented||!e)return;this._disposePopper();const i=this._getTipElement();this._element.setAttribute("aria-describedby",i.getAttribute("id"));const{container:n}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(n.append(i),j.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(i),i.classList.add(Ti),"ontouchstart"in document.documentElement)for(const t of[].concat(...document.body.children))j.on(t,"mouseover",d);this._queueCallback((()=>{j.trigger(this._element,this.constructor.eventName("shown")),!1===this._isHovered&&this._leave(),this._isHovered=!1}),this.tip,this._isAnimated())}hide(){if(this._isShown()&&!j.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(Ti),"ontouchstart"in document.documentElement)for(const t of[].concat(...document.body.children))j.off(t,"mouseover",d);this._activeTrigger.click=!1,this._activeTrigger[Ci]=!1,this._activeTrigger[Ai]=!1,this._isHovered=null,this._queueCallback((()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),j.trigger(this._element,this.constructor.eventName("hidden")))}),this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return Boolean(this._getTitle())}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(t){const e=this._getTemplateFactory(t).toHtml();if(!e)return null;e.classList.remove(Mi,Ti),e.classList.add(`bs-${this.constructor.NAME}-auto`);const i=(t=>{do{t+=Math.floor(1e6*Math.random())}while(document.getElementById(t));return t})(this.constructor.NAME).toString();return e.setAttribute("id",i),this._isAnimated()&&e.classList.add(Mi),e}setContent(t){this._newContent=t,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(t){return this._templateFactory?this._templateFactory.changeContent(t):this._templateFactory=new xi({...this._config,content:t,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{".tooltip-inner":this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(t){return this.constructor.getOrCreateInstance(t.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(Mi)}_isShown(){return this.tip&&this.tip.classList.contains(Ti)}_createPopper(t){const e=y(this._config.placement,[this,t,this._element]),n=Pi[e.toUpperCase()];return i.createPopper(this._element,t,this._getPopperConfig(n))}_getOffset(){const{offset:t}=this._config;return"string"==typeof t?t.split(",").map((t=>Number.parseInt(t,10))):"function"==typeof t?e=>t(e,this._element):t}_resolvePossibleFunction(t){return y(t,[this._element])}_getPopperConfig(t){const e={placement:t,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:t=>{this._getTipElement().setAttribute("data-popper-placement",t.state.placement)}}]};return{...e,...y(this._config.popperConfig,[e])}}_setListeners(){const t=this._config.trigger.split(" ");for(const e of t)if("click"===e)j.on(this._element,this.constructor.eventName("click"),this._config.selector,(t=>{this._initializeOnDelegatedTarget(t).toggle()}));else if("manual"!==e){const t=e===Ai?this.constructor.eventName("mouseenter"):this.constructor.eventName("focusin"),i=e===Ai?this.constructor.eventName("mouseleave"):this.constructor.eventName("focusout");j.on(this._element,t,this._config.selector,(t=>{const e=this._initializeOnDelegatedTarget(t);e._activeTrigger["focusin"===t.type?Ci:Ai]=!0,e._enter()})),j.on(this._element,i,this._config.selector,(t=>{const e=this._initializeOnDelegatedTarget(t);e._activeTrigger["focusout"===t.type?Ci:Ai]=e._element.contains(t.relatedTarget),e._leave()}))}this._hideModalHandler=()=>{this._element&&this.hide()},j.on(this._element.closest(Li),Si,this._hideModalHandler)}_fixTitle(){const t=this._element.getAttribute("title");t&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",t),this._element.setAttribute("data-bs-original-title",t),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout((()=>{this._isHovered&&this.show()}),this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout((()=>{this._isHovered||this.hide()}),this._config.delay.hide))}_setTimeout(t,e){clearTimeout(this._timeout),this._timeout=setTimeout(t,e)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(t){const e=q.getDataAttributes(this._element);for(const t of Object.keys(e))Ei.has(t)&&delete e[t];return t={...e,..."object"==typeof t&&t?t:{}},t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t.container=!1===t.container?document.body:c(t.container),"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),"number"==typeof t.title&&(t.title=t.title.toString()),"number"==typeof t.content&&(t.content=t.content.toString()),t}_getDelegateConfig(){const t={};for(const[e,i]of Object.entries(this._config))this.constructor.Default[e]!==i&&(t[e]=i);return t.selector=!1,t.trigger="manual",t}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(t){return this.each((function(){const e=Ii.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t])throw new TypeError(`No method named "${t}"`);e[t]()}}))}}g(Ii);const ki={...Ii.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},Di={...Ii.DefaultType,content:"(null|string|element|function)"};class zi extends Ii{static get Default(){return ki}static get DefaultType(){return Di}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{".popover-header":this._getTitle(),".popover-body":this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(t){return this.each((function(){const e=zi.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t])throw new TypeError(`No method named "${t}"`);e[t]()}}))}}g(zi);const ji=".bs.scrollspy",Ni=`activate${ji}`,Hi=`click${ji}`,Fi=`load${ji}.data-api`,qi="active",Yi="[href]",Wi=".nav-link",Bi=`${Wi}, .nav-item > ${Wi}, .list-group-item`,Vi={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},Xi={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class $i extends W{constructor(t,e){super(t,e),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement="visible"===getComputedStyle(this._element).overflowY?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return Vi}static get DefaultType(){return Xi}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const t of this._observableSections.values())this._observer.observe(t)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(t){return t.target=c(t.target)||document.body,t.rootMargin=t.offset?`${t.offset}px 0px -30%`:t.rootMargin,"string"==typeof t.threshold&&(t.threshold=t.threshold.split(",").map((t=>Number.parseFloat(t)))),t}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(j.off(this._config.target,Hi),j.on(this._config.target,Hi,Yi,(t=>{const e=this._observableSections.get(t.target.hash);if(e){t.preventDefault();const i=this._rootElement||window,n=e.offsetTop-this._element.offsetTop;if(i.scrollTo)return void i.scrollTo({top:n,behavior:"smooth"});i.scrollTop=n}})))}_getNewObserver(){const t={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver((t=>this._observerCallback(t)),t)}_observerCallback(t){const e=t=>this._targetLinks.get(`#${t.target.id}`),i=t=>{this._previousScrollData.visibleEntryTop=t.target.offsetTop,this._process(e(t))},n=(this._rootElement||document.documentElement).scrollTop,r=n>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=n;for(const o of t){if(!o.isIntersecting){this._activeTarget=null,this._clearActiveClass(e(o));continue}const t=o.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(r&&t){if(i(o),!n)return}else r||t||i(o)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const t=V.find(Yi,this._config.target);for(const e of t){if(!e.hash||u(e))continue;const t=V.findOne(decodeURI(e.hash),this._element);h(t)&&(this._targetLinks.set(decodeURI(e.hash),e),this._observableSections.set(e.hash,t))}}_process(t){this._activeTarget!==t&&(this._clearActiveClass(this._config.target),this._activeTarget=t,t.classList.add(qi),this._activateParents(t),j.trigger(this._element,Ni,{relatedTarget:t}))}_activateParents(t){if(t.classList.contains("dropdown-item"))V.findOne(".dropdown-toggle",t.closest(".dropdown")).classList.add(qi);else for(const e of V.parents(t,".nav, .list-group"))for(const t of V.prev(e,Bi))t.classList.add(qi)}_clearActiveClass(t){t.classList.remove(qi);const e=V.find(`${Yi}.${qi}`,t);for(const t of e)t.classList.remove(qi)}static jQueryInterface(t){return this.each((function(){const e=$i.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t]()}}))}}j.on(window,Fi,(()=>{for(const t of V.find('[data-bs-spy="scroll"]'))$i.getOrCreateInstance(t)})),g($i);const Gi=".bs.tab",Ui=`hide${Gi}`,Ki=`hidden${Gi}`,Zi=`show${Gi}`,Qi=`shown${Gi}`,Ji=`click${Gi}`,tn=`keydown${Gi}`,en=`load${Gi}`,nn="ArrowLeft",rn="ArrowRight",on="ArrowUp",sn="ArrowDown",an="Home",ln="End",cn="active",hn="fade",un="show",pn=".dropdown-toggle",dn=`:not(${pn})`,fn='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',mn=`.nav-link${dn}, .list-group-item${dn}, [role="tab"]${dn}, ${fn}`,vn=`.${cn}[data-bs-toggle="tab"], .${cn}[data-bs-toggle="pill"], .${cn}[data-bs-toggle="list"]`;class _n extends W{constructor(t){super(t),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),j.on(this._element,tn,(t=>this._keydown(t))))}static get NAME(){return"tab"}show(){const t=this._element;if(this._elemIsActive(t))return;const e=this._getActiveElem(),i=e?j.trigger(e,Ui,{relatedTarget:t}):null;j.trigger(t,Zi,{relatedTarget:e}).defaultPrevented||i&&i.defaultPrevented||(this._deactivate(e,t),this._activate(t,e))}_activate(t,e){t&&(t.classList.add(cn),this._activate(V.getElementFromSelector(t)),this._queueCallback((()=>{"tab"===t.getAttribute("role")?(t.removeAttribute("tabindex"),t.setAttribute("aria-selected",!0),this._toggleDropDown(t,!0),j.trigger(t,Qi,{relatedTarget:e})):t.classList.add(un)}),t,t.classList.contains(hn)))}_deactivate(t,e){t&&(t.classList.remove(cn),t.blur(),this._deactivate(V.getElementFromSelector(t)),this._queueCallback((()=>{"tab"===t.getAttribute("role")?(t.setAttribute("aria-selected",!1),t.setAttribute("tabindex","-1"),this._toggleDropDown(t,!1),j.trigger(t,Ki,{relatedTarget:e})):t.classList.remove(un)}),t,t.classList.contains(hn)))}_keydown(t){if(![nn,rn,on,sn,an,ln].includes(t.key))return;t.stopPropagation(),t.preventDefault();const e=this._getChildren().filter((t=>!u(t)));let i;if([an,ln].includes(t.key))i=e[t.key===an?0:e.length-1];else{const n=[rn,sn].includes(t.key);i=w(e,t.target,n,!0)}i&&(i.focus({preventScroll:!0}),_n.getOrCreateInstance(i).show())}_getChildren(){return V.find(mn,this._parent)}_getActiveElem(){return this._getChildren().find((t=>this._elemIsActive(t)))||null}_setInitialAttributes(t,e){this._setAttributeIfNotExists(t,"role","tablist");for(const t of e)this._setInitialAttributesOnChild(t)}_setInitialAttributesOnChild(t){t=this._getInnerElement(t);const e=this._elemIsActive(t),i=this._getOuterElement(t);t.setAttribute("aria-selected",e),i!==t&&this._setAttributeIfNotExists(i,"role","presentation"),e||t.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(t,"role","tab"),this._setInitialAttributesOnTargetPanel(t)}_setInitialAttributesOnTargetPanel(t){const e=V.getElementFromSelector(t);e&&(this._setAttributeIfNotExists(e,"role","tabpanel"),t.id&&this._setAttributeIfNotExists(e,"aria-labelledby",`${t.id}`))}_toggleDropDown(t,e){const i=this._getOuterElement(t);if(!i.classList.contains("dropdown"))return;const n=(t,n)=>{const r=V.findOne(t,i);r&&r.classList.toggle(n,e)};n(pn,cn),n(".dropdown-menu",un),i.setAttribute("aria-expanded",e)}_setAttributeIfNotExists(t,e,i){t.hasAttribute(e)||t.setAttribute(e,i)}_elemIsActive(t){return t.classList.contains(cn)}_getInnerElement(t){return t.matches(mn)?t:V.findOne(mn,t)}_getOuterElement(t){return t.closest(".nav-item, .list-group-item")||t}static jQueryInterface(t){return this.each((function(){const e=_n.getOrCreateInstance(this);if("string"==typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t]()}}))}}j.on(document,Ji,fn,(function(t){["A","AREA"].includes(this.tagName)&&t.preventDefault(),u(this)||_n.getOrCreateInstance(this).show()})),j.on(window,en,(()=>{for(const t of V.find(vn))_n.getOrCreateInstance(t)})),g(_n);const gn=".bs.toast",yn=`mouseover${gn}`,bn=`mouseout${gn}`,wn=`focusin${gn}`,xn=`focusout${gn}`,En=`hide${gn}`,Mn=`hidden${gn}`,Tn=`show${gn}`,Ln=`shown${gn}`,Sn="hide",An="show",Cn="showing",Pn={animation:"boolean",autohide:"boolean",delay:"number"},On={animation:!0,autohide:!0,delay:5e3};class Rn extends W{constructor(t,e){super(t,e),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return On}static get DefaultType(){return Pn}static get NAME(){return"toast"}show(){j.trigger(this._element,Tn).defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove(Sn),f(this._element),this._element.classList.add(An,Cn),this._queueCallback((()=>{this._element.classList.remove(Cn),j.trigger(this._element,Ln),this._maybeScheduleHide()}),this._element,this._config.animation))}hide(){this.isShown()&&(j.trigger(this._element,En).defaultPrevented||(this._element.classList.add(Cn),this._queueCallback((()=>{this._element.classList.add(Sn),this._element.classList.remove(Cn,An),j.trigger(this._element,Mn)}),this._element,this._config.animation)))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(An),super.dispose()}isShown(){return this._element.classList.contains(An)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout((()=>{this.hide()}),this._config.delay)))}_onInteraction(t,e){switch(t.type){case"mouseover":case"mouseout":this._hasMouseInteraction=e;break;case"focusin":case"focusout":this._hasKeyboardInteraction=e}if(e)return void this._clearTimeout();const i=t.relatedTarget;this._element===i||this._element.contains(i)||this._maybeScheduleHide()}_setListeners(){j.on(this._element,yn,(t=>this._onInteraction(t,!0))),j.on(this._element,bn,(t=>this._onInteraction(t,!1))),j.on(this._element,wn,(t=>this._onInteraction(t,!0))),j.on(this._element,xn,(t=>this._onInteraction(t,!1)))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(t){return this.each((function(){const e=Rn.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t])throw new TypeError(`No method named "${t}"`);e[t](this)}}))}}return X(Rn),g(Rn),{Alert:K,Button:Q,Carousel:Pt,Collapse:Bt,Dropdown:me,Modal:Ke,Offcanvas:fi,Popover:zi,ScrollSpy:$i,Tab:_n,Toast:Rn,Tooltip:Ii}}(i(170))},248:(t,e,i)=>{var n,r,o;o=function(){function t(t){function i(e){var i=t.match(e);return i&&i.length>1&&i[1]||""}var n,r=i(/(ipod|iphone|ipad)/i).toLowerCase(),o=!/like android/i.test(t)&&/android/i.test(t),s=i(/version\/(\d+(\.\d+)?)/i),a=/tablet/i.test(t),l=!a&&/[^-]mobi/i.test(t);/opera|opr/i.test(t)?n={name:"Opera",opera:e,version:s||i(/(?:opera|opr)[\s\/](\d+(\.\d+)?)/i)}:/windows phone/i.test(t)?n={name:"Windows Phone",windowsphone:e,msie:e,version:i(/iemobile\/(\d+(\.\d+)?)/i)}:/msie|trident/i.test(t)?n={name:"Internet Explorer",msie:e,version:i(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:/chrome|crios|crmo/i.test(t)?n={name:"Chrome",chrome:e,version:i(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:r?(n={name:"iphone"==r?"iPhone":"ipad"==r?"iPad":"iPod"},s&&(n.version=s)):/sailfish/i.test(t)?n={name:"Sailfish",sailfish:e,version:i(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(t)?n={name:"SeaMonkey",seamonkey:e,version:i(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel/i.test(t)?(n={name:"Firefox",firefox:e,version:i(/(?:firefox|iceweasel)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(t)&&(n.firefoxos=e)):/silk/i.test(t)?n={name:"Amazon Silk",silk:e,version:i(/silk\/(\d+(\.\d+)?)/i)}:o?n={name:"Android",version:s}:/phantom/i.test(t)?n={name:"PhantomJS",phantom:e,version:i(/phantomjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(t)||/rim\stablet/i.test(t)?n={name:"BlackBerry",blackberry:e,version:s||i(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:/(web|hpw)os/i.test(t)?(n={name:"WebOS",webos:e,version:s||i(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(t)&&(n.touchpad=e)):n=/bada/i.test(t)?{name:"Bada",bada:e,version:i(/dolfin\/(\d+(\.\d+)?)/i)}:/tizen/i.test(t)?{name:"Tizen",tizen:e,version:i(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||s}:/safari/i.test(t)?{name:"Safari",safari:e,version:s}:{},/(apple)?webkit/i.test(t)?(n.name=n.name||"Webkit",n.webkit=e,!n.version&&s&&(n.version=s)):!n.opera&&/gecko\//i.test(t)&&(n.name=n.name||"Gecko",n.gecko=e,n.version=n.version||i(/gecko\/(\d+(\.\d+)?)/i)),o||n.silk?n.android=e:r&&(n[r]=e,n.ios=e);var c="";r?c=(c=i(/os (\d+([_\s]\d+)*) like mac os x/i)).replace(/[_\s]/g,"."):o?c=i(/android[ \/-](\d+(\.\d+)*)/i):n.windowsphone?c=i(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):n.webos?c=i(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):n.blackberry?c=i(/rim\stablet\sos\s(\d+(\.\d+)*)/i):n.bada?c=i(/bada\/(\d+(\.\d+)*)/i):n.tizen&&(c=i(/tizen[\/\s](\d+(\.\d+)*)/i)),c&&(n.osversion=c);var h=c.split(".")[0];return a||"ipad"==r||o&&(3==h||4==h&&!l)||n.silk?n.tablet=e:(l||"iphone"==r||"ipod"==r||o||n.blackberry||n.webos||n.bada)&&(n.mobile=e),n.msie&&n.version>=10||n.chrome&&n.version>=20||n.firefox&&n.version>=20||n.safari&&n.version>=6||n.opera&&n.version>=10||n.ios&&n.osversion&&n.osversion.split(".")[0]>=6||n.blackberry&&n.version>=10.1?n.a=e:n.msie&&n.version<10||n.chrome&&n.version<20||n.firefox&&n.version<20||n.safari&&n.version<6||n.opera&&n.version<10||n.ios&&n.osversion&&n.osversion.split(".")[0]<6?n.c=e:n.x=e,n}var e=!0,i=t("undefined"!=typeof navigator?navigator.userAgent:"");return i._detect=t,i},t.exports?t.exports.browser=o():void 0===(r="function"==typeof(n=o)?n.call(e,i,e,t):n)||(t.exports=r)},187:(t,e,i)=>{var n;t.exports=function(){function t(e,i,n){function r(s,a){if(!i[s]){if(!e[s]){if(o)return o(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var c=i[s]={exports:{}};e[s][0].call(c.exports,(function(t){return r(e[s][1][t]||t)}),c,c.exports,t,e,i,n)}return i[s].exports}for(var o=void 0,s=0;s<n.length;s++)r(n[s]);return r}return t}()({1:[function(t,e,i){var r,o,s;r=this,o="bowser",s=function(){var t=!0;function e(e){function i(t){var i=e.match(t);return i&&i.length>1&&i[1]||""}function n(t){var i=e.match(t);return i&&i.length>1&&i[2]||""}var r,s=i(/(ipod|iphone|ipad)/i).toLowerCase(),a=!/like android/i.test(e)&&/android/i.test(e),l=/nexus\s*[0-6]\s*/i.test(e),c=!l&&/nexus\s*[0-9]+/i.test(e),h=/CrOS/.test(e),u=/silk/i.test(e),p=/sailfish/i.test(e),d=/tizen/i.test(e),f=/(web|hpw)(o|0)s/i.test(e),m=/windows phone/i.test(e),v=(/SamsungBrowser/i.test(e),!m&&/windows/i.test(e)),_=!s&&!u&&/macintosh/i.test(e),g=!a&&!p&&!d&&!f&&/linux/i.test(e),y=n(/edg([ea]|ios)\/(\d+(\.\d+)?)/i),b=i(/version\/(\d+(\.\d+)?)/i),w=/tablet/i.test(e)&&!/tablet pc/i.test(e),x=!w&&/[^-]mobi/i.test(e),E=/xbox/i.test(e);function M(t){switch(t){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}/opera/i.test(e)?r={name:"Opera",opera:t,version:b||i(/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)}:/opr\/|opios/i.test(e)?r={name:"Opera",opera:t,version:i(/(?:opr|opios)[\s\/](\d+(\.\d+)?)/i)||b}:/SamsungBrowser/i.test(e)?r={name:"Samsung Internet for Android",samsungBrowser:t,version:b||i(/(?:SamsungBrowser)[\s\/](\d+(\.\d+)?)/i)}:/Whale/i.test(e)?r={name:"NAVER Whale browser",whale:t,version:i(/(?:whale)[\s\/](\d+(?:\.\d+)+)/i)}:/MZBrowser/i.test(e)?r={name:"MZ Browser",mzbrowser:t,version:i(/(?:MZBrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/coast/i.test(e)?r={name:"Opera Coast",coast:t,version:b||i(/(?:coast)[\s\/](\d+(\.\d+)?)/i)}:/focus/i.test(e)?r={name:"Focus",focus:t,version:i(/(?:focus)[\s\/](\d+(?:\.\d+)+)/i)}:/yabrowser/i.test(e)?r={name:"Yandex Browser",yandexbrowser:t,version:b||i(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/ucbrowser/i.test(e)?r={name:"UC Browser",ucbrowser:t,version:i(/(?:ucbrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/mxios/i.test(e)?r={name:"Maxthon",maxthon:t,version:i(/(?:mxios)[\s\/](\d+(?:\.\d+)+)/i)}:/epiphany/i.test(e)?r={name:"Epiphany",epiphany:t,version:i(/(?:epiphany)[\s\/](\d+(?:\.\d+)+)/i)}:/puffin/i.test(e)?r={name:"Puffin",puffin:t,version:i(/(?:puffin)[\s\/](\d+(?:\.\d+)?)/i)}:/sleipnir/i.test(e)?r={name:"Sleipnir",sleipnir:t,version:i(/(?:sleipnir)[\s\/](\d+(?:\.\d+)+)/i)}:/k-meleon/i.test(e)?r={name:"K-Meleon",kMeleon:t,version:i(/(?:k-meleon)[\s\/](\d+(?:\.\d+)+)/i)}:m?(r={name:"Windows Phone",osname:"Windows Phone",windowsphone:t},y?(r.msedge=t,r.version=y):(r.msie=t,r.version=i(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(e)?r={name:"Internet Explorer",msie:t,version:i(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:h?r={name:"Chrome",osname:"Chrome OS",chromeos:t,chromeBook:t,chrome:t,version:i(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/edg([ea]|ios)/i.test(e)?r={name:"Microsoft Edge",msedge:t,version:y}:/vivaldi/i.test(e)?r={name:"Vivaldi",vivaldi:t,version:i(/vivaldi\/(\d+(\.\d+)?)/i)||b}:p?r={name:"Sailfish",osname:"Sailfish OS",sailfish:t,version:i(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(e)?r={name:"SeaMonkey",seamonkey:t,version:i(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel|fxios/i.test(e)?(r={name:"Firefox",firefox:t,version:i(/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(e)&&(r.firefoxos=t,r.osname="Firefox OS")):u?r={name:"Amazon Silk",silk:t,version:i(/silk\/(\d+(\.\d+)?)/i)}:/phantom/i.test(e)?r={name:"PhantomJS",phantom:t,version:i(/phantomjs\/(\d+(\.\d+)?)/i)}:/slimerjs/i.test(e)?r={name:"SlimerJS",slimer:t,version:i(/slimerjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(e)||/rim\stablet/i.test(e)?r={name:"BlackBerry",osname:"BlackBerry OS",blackberry:t,version:b||i(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:f?(r={name:"WebOS",osname:"WebOS",webos:t,version:b||i(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(e)&&(r.touchpad=t)):/bada/i.test(e)?r={name:"Bada",osname:"Bada",bada:t,version:i(/dolfin\/(\d+(\.\d+)?)/i)}:d?r={name:"Tizen",osname:"Tizen",tizen:t,version:i(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||b}:/qupzilla/i.test(e)?r={name:"QupZilla",qupzilla:t,version:i(/(?:qupzilla)[\s\/](\d+(?:\.\d+)+)/i)||b}:/chromium/i.test(e)?r={name:"Chromium",chromium:t,version:i(/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i)||b}:/chrome|crios|crmo/i.test(e)?r={name:"Chrome",chrome:t,version:i(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:a?r={name:"Android",version:b}:/safari|applewebkit/i.test(e)?(r={name:"Safari",safari:t},b&&(r.version=b)):s?(r={name:"iphone"==s?"iPhone":"ipad"==s?"iPad":"iPod"},b&&(r.version=b)):r=/googlebot/i.test(e)?{name:"Googlebot",googlebot:t,version:i(/googlebot\/(\d+(\.\d+))/i)||b}:{name:i(/^(.*)\/(.*) /),version:n(/^(.*)\/(.*) /)},!r.msedge&&/(apple)?webkit/i.test(e)?(/(apple)?webkit\/537\.36/i.test(e)?(r.name=r.name||"Blink",r.blink=t):(r.name=r.name||"Webkit",r.webkit=t),!r.version&&b&&(r.version=b)):!r.opera&&/gecko\//i.test(e)&&(r.name=r.name||"Gecko",r.gecko=t,r.version=r.version||i(/gecko\/(\d+(\.\d+)?)/i)),r.windowsphone||!a&&!r.silk?!r.windowsphone&&s?(r[s]=t,r.ios=t,r.osname="iOS"):_?(r.mac=t,r.osname="macOS"):E?(r.xbox=t,r.osname="Xbox"):v?(r.windows=t,r.osname="Windows"):g&&(r.linux=t,r.osname="Linux"):(r.android=t,r.osname="Android");var T="";r.windows?T=M(i(/Windows ((NT|XP)( \d\d?.\d)?)/i)):r.windowsphone?T=i(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):r.mac?T=(T=i(/Mac OS X (\d+([_\.\s]\d+)*)/i)).replace(/[_\s]/g,"."):s?T=(T=i(/os (\d+([_\s]\d+)*) like mac os x/i)).replace(/[_\s]/g,"."):a?T=i(/android[ \/-](\d+(\.\d+)*)/i):r.webos?T=i(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):r.blackberry?T=i(/rim\stablet\sos\s(\d+(\.\d+)*)/i):r.bada?T=i(/bada\/(\d+(\.\d+)*)/i):r.tizen&&(T=i(/tizen[\/\s](\d+(\.\d+)*)/i)),T&&(r.osversion=T);var L=!r.windows&&T.split(".")[0];return w||c||"ipad"==s||a&&(3==L||L>=4&&!x)||r.silk?r.tablet=t:(x||"iphone"==s||"ipod"==s||a||l||r.blackberry||r.webos||r.bada)&&(r.mobile=t),r.msedge||r.msie&&r.version>=10||r.yandexbrowser&&r.version>=15||r.vivaldi&&r.version>=1||r.chrome&&r.version>=20||r.samsungBrowser&&r.version>=4||r.whale&&1===o([r.version,"1.0"])||r.mzbrowser&&1===o([r.version,"6.0"])||r.focus&&1===o([r.version,"1.0"])||r.firefox&&r.version>=20||r.safari&&r.version>=6||r.opera&&r.version>=10||r.ios&&r.osversion&&r.osversion.split(".")[0]>=6||r.blackberry&&r.version>=10.1||r.chromium&&r.version>=20?r.a=t:r.msie&&r.version<10||r.chrome&&r.version<20||r.firefox&&r.version<20||r.safari&&r.version<6||r.opera&&r.version<10||r.ios&&r.osversion&&r.osversion.split(".")[0]<6||r.chromium&&r.version<20?r.c=t:r.x=t,r}var i=e("undefined"!=typeof navigator&&navigator.userAgent||"");function n(t){return t.split(".").length}function r(t,e){var i,n=[];if(Array.prototype.map)return Array.prototype.map.call(t,e);for(i=0;i<t.length;i++)n.push(e(t[i]));return n}function o(t){for(var e=Math.max(n(t[0]),n(t[1])),i=r(t,(function(t){var i=e-n(t);return r((t+=new Array(i+1).join(".0")).split("."),(function(t){return new Array(20-t.length).join("0")+t})).reverse()}));--e>=0;){if(i[0][e]>i[1][e])return 1;if(i[0][e]!==i[1][e])return-1;if(0===e)return 0}}function s(t,n,r){var s=i;"string"==typeof n&&(r=n,n=void 0),void 0===n&&(n=!1),r&&(s=e(r));var a=""+s.version;for(var l in t)if(t.hasOwnProperty(l)&&s[l]){if("string"!=typeof t[l])throw new Error("Browser version in the minVersion map should be a string: "+l+": "+String(t));return o([a,t[l]])<0}return n}function a(t,e,i){return!s(t,e,i)}return i.test=function(t){for(var e=0;e<t.length;++e){var n=t[e];if("string"==typeof n&&n in i)return!0}return!1},i.isUnsupportedBrowser=s,i.compareVersions=o,i.check=a,i._detect=e,i.detect=e,i},void 0!==e&&e.exports?e.exports=s():"function"==typeof n&&n.amd?n(o,s):r[o]=s()},{}],2:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.setMatrixArrayType=s,i.toRadian=l,i.equals=c,i.RANDOM=i.ARRAY_TYPE=i.EPSILON=void 0;var n=1e-6;i.EPSILON=n;var r="undefined"!=typeof Float32Array?Float32Array:Array;i.ARRAY_TYPE=r;var o=Math.random;function s(t){i.ARRAY_TYPE=r=t}i.RANDOM=o;var a=Math.PI/180;function l(t){return t*a}function c(t,e){return Math.abs(t-e)<=n*Math.max(1,Math.abs(t),Math.abs(e))}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)})},{}],3:[function(t,e,i){"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}Object.defineProperty(i,"__esModule",{value:!0}),i.vec4=i.vec3=i.vec2=i.quat2=i.quat=i.mat4=i.mat3=i.mat2d=i.mat2=i.glMatrix=void 0;var r=m(t("./common.js"));i.glMatrix=r;var o=m(t("./mat2.js"));i.mat2=o;var s=m(t("./mat2d.js"));i.mat2d=s;var a=m(t("./mat3.js"));i.mat3=a;var l=m(t("./mat4.js"));i.mat4=l;var c=m(t("./quat.js"));i.quat=c;var h=m(t("./quat2.js"));i.quat2=h;var u=m(t("./vec2.js"));i.vec2=u;var p=m(t("./vec3.js"));i.vec3=p;var d=m(t("./vec4.js"));function f(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return f=function(){return t},t}function m(t){if(t&&t.__esModule)return t;if(null===t||"object"!==n(t)&&"function"!=typeof t)return{default:t};var e=f();if(e&&e.has(t))return e.get(t);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var s=r?Object.getOwnPropertyDescriptor(t,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=t[o]}return i.default=t,e&&e.set(t,i),i}i.vec4=d},{"./common.js":2,"./mat2.js":4,"./mat2d.js":5,"./mat3.js":6,"./mat4.js":7,"./quat.js":8,"./quat2.js":9,"./vec2.js":10,"./vec3.js":11,"./vec4.js":12}],4:[function(t,e,i){"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}Object.defineProperty(i,"__esModule",{value:!0}),i.create=a,i.clone=l,i.copy=c,i.identity=h,i.fromValues=u,i.set=p,i.transpose=d,i.invert=f,i.adjoint=m,i.determinant=v,i.multiply=_,i.rotate=g,i.scale=y,i.fromRotation=b,i.fromScaling=w,i.str=x,i.frob=E,i.LDU=M,i.add=T,i.subtract=L,i.exactEquals=S,i.equals=A,i.multiplyScalar=C,i.multiplyScalarAndAdd=P,i.sub=i.mul=void 0;var r=s(t("./common.js"));function o(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return o=function(){return t},t}function s(t){if(t&&t.__esModule)return t;if(null===t||"object"!==n(t)&&"function"!=typeof t)return{default:t};var e=o();if(e&&e.has(t))return e.get(t);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){var a=r?Object.getOwnPropertyDescriptor(t,s):null;a&&(a.get||a.set)?Object.defineProperty(i,s,a):i[s]=t[s]}return i.default=t,e&&e.set(t,i),i}function a(){var t=new r.ARRAY_TYPE(4);return r.ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t}function l(t){var e=new r.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function c(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function h(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t}function u(t,e,i,n){var o=new r.ARRAY_TYPE(4);return o[0]=t,o[1]=e,o[2]=i,o[3]=n,o}function p(t,e,i,n,r){return t[0]=e,t[1]=i,t[2]=n,t[3]=r,t}function d(t,e){if(t===e){var i=e[1];t[1]=e[2],t[2]=i}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t}function f(t,e){var i=e[0],n=e[1],r=e[2],o=e[3],s=i*o-r*n;return s?(s=1/s,t[0]=o*s,t[1]=-n*s,t[2]=-r*s,t[3]=i*s,t):null}function m(t,e){var i=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=i,t}function v(t){return t[0]*t[3]-t[2]*t[1]}function _(t,e,i){var n=e[0],r=e[1],o=e[2],s=e[3],a=i[0],l=i[1],c=i[2],h=i[3];return t[0]=n*a+o*l,t[1]=r*a+s*l,t[2]=n*c+o*h,t[3]=r*c+s*h,t}function g(t,e,i){var n=e[0],r=e[1],o=e[2],s=e[3],a=Math.sin(i),l=Math.cos(i);return t[0]=n*l+o*a,t[1]=r*l+s*a,t[2]=n*-a+o*l,t[3]=r*-a+s*l,t}function y(t,e,i){var n=e[0],r=e[1],o=e[2],s=e[3],a=i[0],l=i[1];return t[0]=n*a,t[1]=r*a,t[2]=o*l,t[3]=s*l,t}function b(t,e){var i=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=i,t[2]=-i,t[3]=n,t}function w(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t}function x(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function E(t){return Math.hypot(t[0],t[1],t[2],t[3])}function M(t,e,i,n){return t[2]=n[2]/n[0],i[0]=n[0],i[1]=n[1],i[3]=n[3]-t[2]*i[1],[t,e,i]}function T(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t}function L(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t}function S(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function A(t,e){var i=t[0],n=t[1],o=t[2],s=t[3],a=e[0],l=e[1],c=e[2],h=e[3];return Math.abs(i-a)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(a))&&Math.abs(n-l)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(o-c)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(c))&&Math.abs(s-h)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(h))}function C(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t}function P(t,e,i,n){return t[0]=e[0]+i[0]*n,t[1]=e[1]+i[1]*n,t[2]=e[2]+i[2]*n,t[3]=e[3]+i[3]*n,t}var O=_;i.mul=O;var R=L;i.sub=R},{"./common.js":2}],5:[function(t,e,i){"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}Object.defineProperty(i,"__esModule",{value:!0}),i.create=a,i.clone=l,i.copy=c,i.identity=h,i.fromValues=u,i.set=p,i.invert=d,i.determinant=f,i.multiply=m,i.rotate=v,i.scale=_,i.translate=g,i.fromRotation=y,i.fromScaling=b,i.fromTranslation=w,i.str=x,i.frob=E,i.add=M,i.subtract=T,i.multiplyScalar=L,i.multiplyScalarAndAdd=S,i.exactEquals=A,i.equals=C,i.sub=i.mul=void 0;var r=s(t("./common.js"));function o(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return o=function(){return t},t}function s(t){if(t&&t.__esModule)return t;if(null===t||"object"!==n(t)&&"function"!=typeof t)return{default:t};var e=o();if(e&&e.has(t))return e.get(t);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){var a=r?Object.getOwnPropertyDescriptor(t,s):null;a&&(a.get||a.set)?Object.defineProperty(i,s,a):i[s]=t[s]}return i.default=t,e&&e.set(t,i),i}function a(){var t=new r.ARRAY_TYPE(6);return r.ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t}function l(t){var e=new r.ARRAY_TYPE(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function c(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function h(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function u(t,e,i,n,o,s){var a=new r.ARRAY_TYPE(6);return a[0]=t,a[1]=e,a[2]=i,a[3]=n,a[4]=o,a[5]=s,a}function p(t,e,i,n,r,o,s){return t[0]=e,t[1]=i,t[2]=n,t[3]=r,t[4]=o,t[5]=s,t}function d(t,e){var i=e[0],n=e[1],r=e[2],o=e[3],s=e[4],a=e[5],l=i*o-n*r;return l?(l=1/l,t[0]=o*l,t[1]=-n*l,t[2]=-r*l,t[3]=i*l,t[4]=(r*a-o*s)*l,t[5]=(n*s-i*a)*l,t):null}function f(t){return t[0]*t[3]-t[1]*t[2]}function m(t,e,i){var n=e[0],r=e[1],o=e[2],s=e[3],a=e[4],l=e[5],c=i[0],h=i[1],u=i[2],p=i[3],d=i[4],f=i[5];return t[0]=n*c+o*h,t[1]=r*c+s*h,t[2]=n*u+o*p,t[3]=r*u+s*p,t[4]=n*d+o*f+a,t[5]=r*d+s*f+l,t}function v(t,e,i){var n=e[0],r=e[1],o=e[2],s=e[3],a=e[4],l=e[5],c=Math.sin(i),h=Math.cos(i);return t[0]=n*h+o*c,t[1]=r*h+s*c,t[2]=n*-c+o*h,t[3]=r*-c+s*h,t[4]=a,t[5]=l,t}function _(t,e,i){var n=e[0],r=e[1],o=e[2],s=e[3],a=e[4],l=e[5],c=i[0],h=i[1];return t[0]=n*c,t[1]=r*c,t[2]=o*h,t[3]=s*h,t[4]=a,t[5]=l,t}function g(t,e,i){var n=e[0],r=e[1],o=e[2],s=e[3],a=e[4],l=e[5],c=i[0],h=i[1];return t[0]=n,t[1]=r,t[2]=o,t[3]=s,t[4]=n*c+o*h+a,t[5]=r*c+s*h+l,t}function y(t,e){var i=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=i,t[2]=-i,t[3]=n,t[4]=0,t[5]=0,t}function b(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t}function w(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t}function x(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function E(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)}function M(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t}function T(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t}function L(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t}function S(t,e,i,n){return t[0]=e[0]+i[0]*n,t[1]=e[1]+i[1]*n,t[2]=e[2]+i[2]*n,t[3]=e[3]+i[3]*n,t[4]=e[4]+i[4]*n,t[5]=e[5]+i[5]*n,t}function A(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function C(t,e){var i=t[0],n=t[1],o=t[2],s=t[3],a=t[4],l=t[5],c=e[0],h=e[1],u=e[2],p=e[3],d=e[4],f=e[5];return Math.abs(i-c)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(c))&&Math.abs(n-h)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(o-u)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(u))&&Math.abs(s-p)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(p))&&Math.abs(a-d)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(d))&&Math.abs(l-f)<=r.EPSILON*Math.max(1,Math.abs(l),Math.abs(f))}var P=m;i.mul=P;var O=T;i.sub=O},{"./common.js":2}],6:[function(t,e,i){"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}Object.defineProperty(i,"__esModule",{value:!0}),i.create=a,i.fromMat4=l,i.clone=c,i.copy=h,i.fromValues=u,i.set=p,i.identity=d,i.transpose=f,i.invert=m,i.adjoint=v,i.determinant=_,i.multiply=g,i.translate=y,i.rotate=b,i.scale=w,i.fromTranslation=x,i.fromRotation=E,i.fromScaling=M,i.fromMat2d=T,i.fromQuat=L,i.normalFromMat4=S,i.projection=A,i.str=C,i.frob=P,i.add=O,i.subtract=R,i.multiplyScalar=I,i.multiplyScalarAndAdd=k,i.exactEquals=D,i.equals=z,i.sub=i.mul=void 0;var r=s(t("./common.js"));function o(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return o=function(){return t},t}function s(t){if(t&&t.__esModule)return t;if(null===t||"object"!==n(t)&&"function"!=typeof t)return{default:t};var e=o();if(e&&e.has(t))return e.get(t);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){var a=r?Object.getOwnPropertyDescriptor(t,s):null;a&&(a.get||a.set)?Object.defineProperty(i,s,a):i[s]=t[s]}return i.default=t,e&&e.set(t,i),i}function a(){var t=new r.ARRAY_TYPE(9);return r.ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function l(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function c(t){var e=new r.ARRAY_TYPE(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function h(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function u(t,e,i,n,o,s,a,l,c){var h=new r.ARRAY_TYPE(9);return h[0]=t,h[1]=e,h[2]=i,h[3]=n,h[4]=o,h[5]=s,h[6]=a,h[7]=l,h[8]=c,h}function p(t,e,i,n,r,o,s,a,l,c){return t[0]=e,t[1]=i,t[2]=n,t[3]=r,t[4]=o,t[5]=s,t[6]=a,t[7]=l,t[8]=c,t}function d(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function f(t,e){if(t===e){var i=e[1],n=e[2],r=e[5];t[1]=e[3],t[2]=e[6],t[3]=i,t[5]=e[7],t[6]=n,t[7]=r}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function m(t,e){var i=e[0],n=e[1],r=e[2],o=e[3],s=e[4],a=e[5],l=e[6],c=e[7],h=e[8],u=h*s-a*c,p=-h*o+a*l,d=c*o-s*l,f=i*u+n*p+r*d;return f?(f=1/f,t[0]=u*f,t[1]=(-h*n+r*c)*f,t[2]=(a*n-r*s)*f,t[3]=p*f,t[4]=(h*i-r*l)*f,t[5]=(-a*i+r*o)*f,t[6]=d*f,t[7]=(-c*i+n*l)*f,t[8]=(s*i-n*o)*f,t):null}function v(t,e){var i=e[0],n=e[1],r=e[2],o=e[3],s=e[4],a=e[5],l=e[6],c=e[7],h=e[8];return t[0]=s*h-a*c,t[1]=r*c-n*h,t[2]=n*a-r*s,t[3]=a*l-o*h,t[4]=i*h-r*l,t[5]=r*o-i*a,t[6]=o*c-s*l,t[7]=n*l-i*c,t[8]=i*s-n*o,t}function _(t){var e=t[0],i=t[1],n=t[2],r=t[3],o=t[4],s=t[5],a=t[6],l=t[7],c=t[8];return e*(c*o-s*l)+i*(-c*r+s*a)+n*(l*r-o*a)}function g(t,e,i){var n=e[0],r=e[1],o=e[2],s=e[3],a=e[4],l=e[5],c=e[6],h=e[7],u=e[8],p=i[0],d=i[1],f=i[2],m=i[3],v=i[4],_=i[5],g=i[6],y=i[7],b=i[8];return t[0]=p*n+d*s+f*c,t[1]=p*r+d*a+f*h,t[2]=p*o+d*l+f*u,t[3]=m*n+v*s+_*c,t[4]=m*r+v*a+_*h,t[5]=m*o+v*l+_*u,t[6]=g*n+y*s+b*c,t[7]=g*r+y*a+b*h,t[8]=g*o+y*l+b*u,t}function y(t,e,i){var n=e[0],r=e[1],o=e[2],s=e[3],a=e[4],l=e[5],c=e[6],h=e[7],u=e[8],p=i[0],d=i[1];return t[0]=n,t[1]=r,t[2]=o,t[3]=s,t[4]=a,t[5]=l,t[6]=p*n+d*s+c,t[7]=p*r+d*a+h,t[8]=p*o+d*l+u,t}function b(t,e,i){var n=e[0],r=e[1],o=e[2],s=e[3],a=e[4],l=e[5],c=e[6],h=e[7],u=e[8],p=Math.sin(i),d=Math.cos(i);return t[0]=d*n+p*s,t[1]=d*r+p*a,t[2]=d*o+p*l,t[3]=d*s-p*n,t[4]=d*a-p*r,t[5]=d*l-p*o,t[6]=c,t[7]=h,t[8]=u,t}function w(t,e,i){var n=i[0],r=i[1];return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=r*e[3],t[4]=r*e[4],t[5]=r*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function x(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function E(t,e){var i=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=i,t[2]=0,t[3]=-i,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function M(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function T(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function L(t,e){var i=e[0],n=e[1],r=e[2],o=e[3],s=i+i,a=n+n,l=r+r,c=i*s,h=n*s,u=n*a,p=r*s,d=r*a,f=r*l,m=o*s,v=o*a,_=o*l;return t[0]=1-u-f,t[3]=h-_,t[6]=p+v,t[1]=h+_,t[4]=1-c-f,t[7]=d-m,t[2]=p-v,t[5]=d+m,t[8]=1-c-u,t}function S(t,e){var i=e[0],n=e[1],r=e[2],o=e[3],s=e[4],a=e[5],l=e[6],c=e[7],h=e[8],u=e[9],p=e[10],d=e[11],f=e[12],m=e[13],v=e[14],_=e[15],g=i*a-n*s,y=i*l-r*s,b=i*c-o*s,w=n*l-r*a,x=n*c-o*a,E=r*c-o*l,M=h*m-u*f,T=h*v-p*f,L=h*_-d*f,S=u*v-p*m,A=u*_-d*m,C=p*_-d*v,P=g*C-y*A+b*S+w*L-x*T+E*M;return P?(P=1/P,t[0]=(a*C-l*A+c*S)*P,t[1]=(l*L-s*C-c*T)*P,t[2]=(s*A-a*L+c*M)*P,t[3]=(r*A-n*C-o*S)*P,t[4]=(i*C-r*L+o*T)*P,t[5]=(n*L-i*A-o*M)*P,t[6]=(m*E-v*x+_*w)*P,t[7]=(v*b-f*E-_*y)*P,t[8]=(f*x-m*b+_*g)*P,t):null}function A(t,e,i){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/i,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function C(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function P(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])}function O(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t[6]=e[6]+i[6],t[7]=e[7]+i[7],t[8]=e[8]+i[8],t}function R(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t[6]=e[6]-i[6],t[7]=e[7]-i[7],t[8]=e[8]-i[8],t}function I(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*i,t}function k(t,e,i,n){return t[0]=e[0]+i[0]*n,t[1]=e[1]+i[1]*n,t[2]=e[2]+i[2]*n,t[3]=e[3]+i[3]*n,t[4]=e[4]+i[4]*n,t[5]=e[5]+i[5]*n,t[6]=e[6]+i[6]*n,t[7]=e[7]+i[7]*n,t[8]=e[8]+i[8]*n,t}function D(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function z(t,e){var i=t[0],n=t[1],o=t[2],s=t[3],a=t[4],l=t[5],c=t[6],h=t[7],u=t[8],p=e[0],d=e[1],f=e[2],m=e[3],v=e[4],_=e[5],g=e[6],y=e[7],b=e[8];return Math.abs(i-p)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(p))&&Math.abs(n-d)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(o-f)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(f))&&Math.abs(s-m)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(m))&&Math.abs(a-v)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(v))&&Math.abs(l-_)<=r.EPSILON*Math.max(1,Math.abs(l),Math.abs(_))&&Math.abs(c-g)<=r.EPSILON*Math.max(1,Math.abs(c),Math.abs(g))&&Math.abs(h-y)<=r.EPSILON*Math.max(1,Math.abs(h),Math.abs(y))&&Math.abs(u-b)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(b))}var j=g;i.mul=j;var N=R;i.sub=N},{"./common.js":2}],7:[function(t,e,i){"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}Object.defineProperty(i,"__esModule",{value:!0}),i.create=a,i.clone=l,i.copy=c,i.fromValues=h,i.set=u,i.identity=p,i.transpose=d,i.invert=f,i.adjoint=m,i.determinant=v,i.multiply=_,i.translate=g,i.scale=y,i.rotate=b,i.rotateX=w,i.rotateY=x,i.rotateZ=E,i.fromTranslation=M,i.fromScaling=T,i.fromRotation=L,i.fromXRotation=S,i.fromYRotation=A,i.fromZRotation=C,i.fromRotationTranslation=P,i.fromQuat2=O,i.getTranslation=R,i.getScaling=I,i.getRotation=k,i.fromRotationTranslationScale=D,i.fromRotationTranslationScaleOrigin=z,i.fromQuat=j,i.frustum=N,i.perspective=H,i.perspectiveFromFieldOfView=F,i.ortho=q,i.lookAt=Y,i.targetTo=W,i.str=B,i.frob=V,i.add=X,i.subtract=$,i.multiplyScalar=G,i.multiplyScalarAndAdd=U,i.exactEquals=K,i.equals=Z,i.sub=i.mul=void 0;var r=s(t("./common.js"));function o(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return o=function(){return t},t}function s(t){if(t&&t.__esModule)return t;if(null===t||"object"!==n(t)&&"function"!=typeof t)return{default:t};var e=o();if(e&&e.has(t))return e.get(t);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){var a=r?Object.getOwnPropertyDescriptor(t,s):null;a&&(a.get||a.set)?Object.defineProperty(i,s,a):i[s]=t[s]}return i.default=t,e&&e.set(t,i),i}function a(){var t=new r.ARRAY_TYPE(16);return r.ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function l(t){var e=new r.ARRAY_TYPE(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function c(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function h(t,e,i,n,o,s,a,l,c,h,u,p,d,f,m,v){var _=new r.ARRAY_TYPE(16);return _[0]=t,_[1]=e,_[2]=i,_[3]=n,_[4]=o,_[5]=s,_[6]=a,_[7]=l,_[8]=c,_[9]=h,_[10]=u,_[11]=p,_[12]=d,_[13]=f,_[14]=m,_[15]=v,_}function u(t,e,i,n,r,o,s,a,l,c,h,u,p,d,f,m,v){return t[0]=e,t[1]=i,t[2]=n,t[3]=r,t[4]=o,t[5]=s,t[6]=a,t[7]=l,t[8]=c,t[9]=h,t[10]=u,t[11]=p,t[12]=d,t[13]=f,t[14]=m,t[15]=v,t}function p(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function d(t,e){if(t===e){var i=e[1],n=e[2],r=e[3],o=e[6],s=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=i,t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=o,t[11]=e[14],t[12]=r,t[13]=s,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function f(t,e){var i=e[0],n=e[1],r=e[2],o=e[3],s=e[4],a=e[5],l=e[6],c=e[7],h=e[8],u=e[9],p=e[10],d=e[11],f=e[12],m=e[13],v=e[14],_=e[15],g=i*a-n*s,y=i*l-r*s,b=i*c-o*s,w=n*l-r*a,x=n*c-o*a,E=r*c-o*l,M=h*m-u*f,T=h*v-p*f,L=h*_-d*f,S=u*v-p*m,A=u*_-d*m,C=p*_-d*v,P=g*C-y*A+b*S+w*L-x*T+E*M;return P?(P=1/P,t[0]=(a*C-l*A+c*S)*P,t[1]=(r*A-n*C-o*S)*P,t[2]=(m*E-v*x+_*w)*P,t[3]=(p*x-u*E-d*w)*P,t[4]=(l*L-s*C-c*T)*P,t[5]=(i*C-r*L+o*T)*P,t[6]=(v*b-f*E-_*y)*P,t[7]=(h*E-p*b+d*y)*P,t[8]=(s*A-a*L+c*M)*P,t[9]=(n*L-i*A-o*M)*P,t[10]=(f*x-m*b+_*g)*P,t[11]=(u*b-h*x-d*g)*P,t[12]=(a*T-s*S-l*M)*P,t[13]=(i*S-n*T+r*M)*P,t[14]=(m*y-f*w-v*g)*P,t[15]=(h*w-u*y+p*g)*P,t):null}function m(t,e){var i=e[0],n=e[1],r=e[2],o=e[3],s=e[4],a=e[5],l=e[6],c=e[7],h=e[8],u=e[9],p=e[10],d=e[11],f=e[12],m=e[13],v=e[14],_=e[15];return t[0]=a*(p*_-d*v)-u*(l*_-c*v)+m*(l*d-c*p),t[1]=-(n*(p*_-d*v)-u*(r*_-o*v)+m*(r*d-o*p)),t[2]=n*(l*_-c*v)-a*(r*_-o*v)+m*(r*c-o*l),t[3]=-(n*(l*d-c*p)-a*(r*d-o*p)+u*(r*c-o*l)),t[4]=-(s*(p*_-d*v)-h*(l*_-c*v)+f*(l*d-c*p)),t[5]=i*(p*_-d*v)-h*(r*_-o*v)+f*(r*d-o*p),t[6]=-(i*(l*_-c*v)-s*(r*_-o*v)+f*(r*c-o*l)),t[7]=i*(l*d-c*p)-s*(r*d-o*p)+h*(r*c-o*l),t[8]=s*(u*_-d*m)-h*(a*_-c*m)+f*(a*d-c*u),t[9]=-(i*(u*_-d*m)-h*(n*_-o*m)+f*(n*d-o*u)),t[10]=i*(a*_-c*m)-s*(n*_-o*m)+f*(n*c-o*a),t[11]=-(i*(a*d-c*u)-s*(n*d-o*u)+h*(n*c-o*a)),t[12]=-(s*(u*v-p*m)-h*(a*v-l*m)+f*(a*p-l*u)),t[13]=i*(u*v-p*m)-h*(n*v-r*m)+f*(n*p-r*u),t[14]=-(i*(a*v-l*m)-s*(n*v-r*m)+f*(n*l-r*a)),t[15]=i*(a*p-l*u)-s*(n*p-r*u)+h*(n*l-r*a),t}function v(t){var e=t[0],i=t[1],n=t[2],r=t[3],o=t[4],s=t[5],a=t[6],l=t[7],c=t[8],h=t[9],u=t[10],p=t[11],d=t[12],f=t[13],m=t[14],v=t[15];return(e*s-i*o)*(u*v-p*m)-(e*a-n*o)*(h*v-p*f)+(e*l-r*o)*(h*m-u*f)+(i*a-n*s)*(c*v-p*d)-(i*l-r*s)*(c*m-u*d)+(n*l-r*a)*(c*f-h*d)}function _(t,e,i){var n=e[0],r=e[1],o=e[2],s=e[3],a=e[4],l=e[5],c=e[6],h=e[7],u=e[8],p=e[9],d=e[10],f=e[11],m=e[12],v=e[13],_=e[14],g=e[15],y=i[0],b=i[1],w=i[2],x=i[3];return t[0]=y*n+b*a+w*u+x*m,t[1]=y*r+b*l+w*p+x*v,t[2]=y*o+b*c+w*d+x*_,t[3]=y*s+b*h+w*f+x*g,y=i[4],b=i[5],w=i[6],x=i[7],t[4]=y*n+b*a+w*u+x*m,t[5]=y*r+b*l+w*p+x*v,t[6]=y*o+b*c+w*d+x*_,t[7]=y*s+b*h+w*f+x*g,y=i[8],b=i[9],w=i[10],x=i[11],t[8]=y*n+b*a+w*u+x*m,t[9]=y*r+b*l+w*p+x*v,t[10]=y*o+b*c+w*d+x*_,t[11]=y*s+b*h+w*f+x*g,y=i[12],b=i[13],w=i[14],x=i[15],t[12]=y*n+b*a+w*u+x*m,t[13]=y*r+b*l+w*p+x*v,t[14]=y*o+b*c+w*d+x*_,t[15]=y*s+b*h+w*f+x*g,t}function g(t,e,i){var n,r,o,s,a,l,c,h,u,p,d,f,m=i[0],v=i[1],_=i[2];return e===t?(t[12]=e[0]*m+e[4]*v+e[8]*_+e[12],t[13]=e[1]*m+e[5]*v+e[9]*_+e[13],t[14]=e[2]*m+e[6]*v+e[10]*_+e[14],t[15]=e[3]*m+e[7]*v+e[11]*_+e[15]):(n=e[0],r=e[1],o=e[2],s=e[3],a=e[4],l=e[5],c=e[6],h=e[7],u=e[8],p=e[9],d=e[10],f=e[11],t[0]=n,t[1]=r,t[2]=o,t[3]=s,t[4]=a,t[5]=l,t[6]=c,t[7]=h,t[8]=u,t[9]=p,t[10]=d,t[11]=f,t[12]=n*m+a*v+u*_+e[12],t[13]=r*m+l*v+p*_+e[13],t[14]=o*m+c*v+d*_+e[14],t[15]=s*m+h*v+f*_+e[15]),t}function y(t,e,i){var n=i[0],r=i[1],o=i[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function b(t,e,i,n){var o,s,a,l,c,h,u,p,d,f,m,v,_,g,y,b,w,x,E,M,T,L,S,A,C=n[0],P=n[1],O=n[2],R=Math.hypot(C,P,O);return R<r.EPSILON?null:(C*=R=1/R,P*=R,O*=R,o=Math.sin(i),a=1-(s=Math.cos(i)),l=e[0],c=e[1],h=e[2],u=e[3],p=e[4],d=e[5],f=e[6],m=e[7],v=e[8],_=e[9],g=e[10],y=e[11],b=C*C*a+s,w=P*C*a+O*o,x=O*C*a-P*o,E=C*P*a-O*o,M=P*P*a+s,T=O*P*a+C*o,L=C*O*a+P*o,S=P*O*a-C*o,A=O*O*a+s,t[0]=l*b+p*w+v*x,t[1]=c*b+d*w+_*x,t[2]=h*b+f*w+g*x,t[3]=u*b+m*w+y*x,t[4]=l*E+p*M+v*T,t[5]=c*E+d*M+_*T,t[6]=h*E+f*M+g*T,t[7]=u*E+m*M+y*T,t[8]=l*L+p*S+v*A,t[9]=c*L+d*S+_*A,t[10]=h*L+f*S+g*A,t[11]=u*L+m*S+y*A,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function w(t,e,i){var n=Math.sin(i),r=Math.cos(i),o=e[4],s=e[5],a=e[6],l=e[7],c=e[8],h=e[9],u=e[10],p=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*r+c*n,t[5]=s*r+h*n,t[6]=a*r+u*n,t[7]=l*r+p*n,t[8]=c*r-o*n,t[9]=h*r-s*n,t[10]=u*r-a*n,t[11]=p*r-l*n,t}function x(t,e,i){var n=Math.sin(i),r=Math.cos(i),o=e[0],s=e[1],a=e[2],l=e[3],c=e[8],h=e[9],u=e[10],p=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*r-c*n,t[1]=s*r-h*n,t[2]=a*r-u*n,t[3]=l*r-p*n,t[8]=o*n+c*r,t[9]=s*n+h*r,t[10]=a*n+u*r,t[11]=l*n+p*r,t}function E(t,e,i){var n=Math.sin(i),r=Math.cos(i),o=e[0],s=e[1],a=e[2],l=e[3],c=e[4],h=e[5],u=e[6],p=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*r+c*n,t[1]=s*r+h*n,t[2]=a*r+u*n,t[3]=l*r+p*n,t[4]=c*r-o*n,t[5]=h*r-s*n,t[6]=u*r-a*n,t[7]=p*r-l*n,t}function M(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function T(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function L(t,e,i){var n,o,s,a=i[0],l=i[1],c=i[2],h=Math.hypot(a,l,c);return h<r.EPSILON?null:(a*=h=1/h,l*=h,c*=h,n=Math.sin(e),s=1-(o=Math.cos(e)),t[0]=a*a*s+o,t[1]=l*a*s+c*n,t[2]=c*a*s-l*n,t[3]=0,t[4]=a*l*s-c*n,t[5]=l*l*s+o,t[6]=c*l*s+a*n,t[7]=0,t[8]=a*c*s+l*n,t[9]=l*c*s-a*n,t[10]=c*c*s+o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function S(t,e){var i=Math.sin(e),n=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=i,t[7]=0,t[8]=0,t[9]=-i,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function A(t,e){var i=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=0,t[2]=-i,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=i,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function C(t,e){var i=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=i,t[2]=0,t[3]=0,t[4]=-i,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function P(t,e,i){var n=e[0],r=e[1],o=e[2],s=e[3],a=n+n,l=r+r,c=o+o,h=n*a,u=n*l,p=n*c,d=r*l,f=r*c,m=o*c,v=s*a,_=s*l,g=s*c;return t[0]=1-(d+m),t[1]=u+g,t[2]=p-_,t[3]=0,t[4]=u-g,t[5]=1-(h+m),t[6]=f+v,t[7]=0,t[8]=p+_,t[9]=f-v,t[10]=1-(h+d),t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t}function O(t,e){var i=new r.ARRAY_TYPE(3),n=-e[0],o=-e[1],s=-e[2],a=e[3],l=e[4],c=e[5],h=e[6],u=e[7],p=n*n+o*o+s*s+a*a;return p>0?(i[0]=2*(l*a+u*n+c*s-h*o)/p,i[1]=2*(c*a+u*o+h*n-l*s)/p,i[2]=2*(h*a+u*s+l*o-c*n)/p):(i[0]=2*(l*a+u*n+c*s-h*o),i[1]=2*(c*a+u*o+h*n-l*s),i[2]=2*(h*a+u*s+l*o-c*n)),P(t,e,i),t}function R(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function I(t,e){var i=e[0],n=e[1],r=e[2],o=e[4],s=e[5],a=e[6],l=e[8],c=e[9],h=e[10];return t[0]=Math.hypot(i,n,r),t[1]=Math.hypot(o,s,a),t[2]=Math.hypot(l,c,h),t}function k(t,e){var i=new r.ARRAY_TYPE(3);I(i,e);var n=1/i[0],o=1/i[1],s=1/i[2],a=e[0]*n,l=e[1]*o,c=e[2]*s,h=e[4]*n,u=e[5]*o,p=e[6]*s,d=e[8]*n,f=e[9]*o,m=e[10]*s,v=a+u+m,_=0;return v>0?(_=2*Math.sqrt(v+1),t[3]=.25*_,t[0]=(p-f)/_,t[1]=(d-c)/_,t[2]=(l-h)/_):a>u&&a>m?(_=2*Math.sqrt(1+a-u-m),t[3]=(p-f)/_,t[0]=.25*_,t[1]=(l+h)/_,t[2]=(d+c)/_):u>m?(_=2*Math.sqrt(1+u-a-m),t[3]=(d-c)/_,t[0]=(l+h)/_,t[1]=.25*_,t[2]=(p+f)/_):(_=2*Math.sqrt(1+m-a-u),t[3]=(l-h)/_,t[0]=(d+c)/_,t[1]=(p+f)/_,t[2]=.25*_),t}function D(t,e,i,n){var r=e[0],o=e[1],s=e[2],a=e[3],l=r+r,c=o+o,h=s+s,u=r*l,p=r*c,d=r*h,f=o*c,m=o*h,v=s*h,_=a*l,g=a*c,y=a*h,b=n[0],w=n[1],x=n[2];return t[0]=(1-(f+v))*b,t[1]=(p+y)*b,t[2]=(d-g)*b,t[3]=0,t[4]=(p-y)*w,t[5]=(1-(u+v))*w,t[6]=(m+_)*w,t[7]=0,t[8]=(d+g)*x,t[9]=(m-_)*x,t[10]=(1-(u+f))*x,t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t}function z(t,e,i,n,r){var o=e[0],s=e[1],a=e[2],l=e[3],c=o+o,h=s+s,u=a+a,p=o*c,d=o*h,f=o*u,m=s*h,v=s*u,_=a*u,g=l*c,y=l*h,b=l*u,w=n[0],x=n[1],E=n[2],M=r[0],T=r[1],L=r[2],S=(1-(m+_))*w,A=(d+b)*w,C=(f-y)*w,P=(d-b)*x,O=(1-(p+_))*x,R=(v+g)*x,I=(f+y)*E,k=(v-g)*E,D=(1-(p+m))*E;return t[0]=S,t[1]=A,t[2]=C,t[3]=0,t[4]=P,t[5]=O,t[6]=R,t[7]=0,t[8]=I,t[9]=k,t[10]=D,t[11]=0,t[12]=i[0]+M-(S*M+P*T+I*L),t[13]=i[1]+T-(A*M+O*T+k*L),t[14]=i[2]+L-(C*M+R*T+D*L),t[15]=1,t}function j(t,e){var i=e[0],n=e[1],r=e[2],o=e[3],s=i+i,a=n+n,l=r+r,c=i*s,h=n*s,u=n*a,p=r*s,d=r*a,f=r*l,m=o*s,v=o*a,_=o*l;return t[0]=1-u-f,t[1]=h+_,t[2]=p-v,t[3]=0,t[4]=h-_,t[5]=1-c-f,t[6]=d+m,t[7]=0,t[8]=p+v,t[9]=d-m,t[10]=1-c-u,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function N(t,e,i,n,r,o,s){var a=1/(i-e),l=1/(r-n),c=1/(o-s);return t[0]=2*o*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*l,t[6]=0,t[7]=0,t[8]=(i+e)*a,t[9]=(r+n)*l,t[10]=(s+o)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=s*o*2*c,t[15]=0,t}function H(t,e,i,n,r){var o,s=1/Math.tan(e/2);return t[0]=s/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=r&&r!==1/0?(o=1/(n-r),t[10]=(r+n)*o,t[14]=2*r*n*o):(t[10]=-1,t[14]=-2*n),t}function F(t,e,i,n){var r=Math.tan(e.upDegrees*Math.PI/180),o=Math.tan(e.downDegrees*Math.PI/180),s=Math.tan(e.leftDegrees*Math.PI/180),a=Math.tan(e.rightDegrees*Math.PI/180),l=2/(s+a),c=2/(r+o);return t[0]=l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(s-a)*l*.5,t[9]=(r-o)*c*.5,t[10]=n/(i-n),t[11]=-1,t[12]=0,t[13]=0,t[14]=n*i/(i-n),t[15]=0,t}function q(t,e,i,n,r,o,s){var a=1/(e-i),l=1/(n-r),c=1/(o-s);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+i)*a,t[13]=(r+n)*l,t[14]=(s+o)*c,t[15]=1,t}function Y(t,e,i,n){var o,s,a,l,c,h,u,d,f,m,v=e[0],_=e[1],g=e[2],y=n[0],b=n[1],w=n[2],x=i[0],E=i[1],M=i[2];return Math.abs(v-x)<r.EPSILON&&Math.abs(_-E)<r.EPSILON&&Math.abs(g-M)<r.EPSILON?p(t):(u=v-x,d=_-E,f=g-M,o=b*(f*=m=1/Math.hypot(u,d,f))-w*(d*=m),s=w*(u*=m)-y*f,a=y*d-b*u,(m=Math.hypot(o,s,a))?(o*=m=1/m,s*=m,a*=m):(o=0,s=0,a=0),l=d*a-f*s,c=f*o-u*a,h=u*s-d*o,(m=Math.hypot(l,c,h))?(l*=m=1/m,c*=m,h*=m):(l=0,c=0,h=0),t[0]=o,t[1]=l,t[2]=u,t[3]=0,t[4]=s,t[5]=c,t[6]=d,t[7]=0,t[8]=a,t[9]=h,t[10]=f,t[11]=0,t[12]=-(o*v+s*_+a*g),t[13]=-(l*v+c*_+h*g),t[14]=-(u*v+d*_+f*g),t[15]=1,t)}function W(t,e,i,n){var r=e[0],o=e[1],s=e[2],a=n[0],l=n[1],c=n[2],h=r-i[0],u=o-i[1],p=s-i[2],d=h*h+u*u+p*p;d>0&&(h*=d=1/Math.sqrt(d),u*=d,p*=d);var f=l*p-c*u,m=c*h-a*p,v=a*u-l*h;return(d=f*f+m*m+v*v)>0&&(f*=d=1/Math.sqrt(d),m*=d,v*=d),t[0]=f,t[1]=m,t[2]=v,t[3]=0,t[4]=u*v-p*m,t[5]=p*f-h*v,t[6]=h*m-u*f,t[7]=0,t[8]=h,t[9]=u,t[10]=p,t[11]=0,t[12]=r,t[13]=o,t[14]=s,t[15]=1,t}function B(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function V(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function X(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t[6]=e[6]+i[6],t[7]=e[7]+i[7],t[8]=e[8]+i[8],t[9]=e[9]+i[9],t[10]=e[10]+i[10],t[11]=e[11]+i[11],t[12]=e[12]+i[12],t[13]=e[13]+i[13],t[14]=e[14]+i[14],t[15]=e[15]+i[15],t}function $(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t[6]=e[6]-i[6],t[7]=e[7]-i[7],t[8]=e[8]-i[8],t[9]=e[9]-i[9],t[10]=e[10]-i[10],t[11]=e[11]-i[11],t[12]=e[12]-i[12],t[13]=e[13]-i[13],t[14]=e[14]-i[14],t[15]=e[15]-i[15],t}function G(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12]*i,t[13]=e[13]*i,t[14]=e[14]*i,t[15]=e[15]*i,t}function U(t,e,i,n){return t[0]=e[0]+i[0]*n,t[1]=e[1]+i[1]*n,t[2]=e[2]+i[2]*n,t[3]=e[3]+i[3]*n,t[4]=e[4]+i[4]*n,t[5]=e[5]+i[5]*n,t[6]=e[6]+i[6]*n,t[7]=e[7]+i[7]*n,t[8]=e[8]+i[8]*n,t[9]=e[9]+i[9]*n,t[10]=e[10]+i[10]*n,t[11]=e[11]+i[11]*n,t[12]=e[12]+i[12]*n,t[13]=e[13]+i[13]*n,t[14]=e[14]+i[14]*n,t[15]=e[15]+i[15]*n,t}function K(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function Z(t,e){var i=t[0],n=t[1],o=t[2],s=t[3],a=t[4],l=t[5],c=t[6],h=t[7],u=t[8],p=t[9],d=t[10],f=t[11],m=t[12],v=t[13],_=t[14],g=t[15],y=e[0],b=e[1],w=e[2],x=e[3],E=e[4],M=e[5],T=e[6],L=e[7],S=e[8],A=e[9],C=e[10],P=e[11],O=e[12],R=e[13],I=e[14],k=e[15];return Math.abs(i-y)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(y))&&Math.abs(n-b)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(b))&&Math.abs(o-w)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(w))&&Math.abs(s-x)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(x))&&Math.abs(a-E)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(E))&&Math.abs(l-M)<=r.EPSILON*Math.max(1,Math.abs(l),Math.abs(M))&&Math.abs(c-T)<=r.EPSILON*Math.max(1,Math.abs(c),Math.abs(T))&&Math.abs(h-L)<=r.EPSILON*Math.max(1,Math.abs(h),Math.abs(L))&&Math.abs(u-S)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(S))&&Math.abs(p-A)<=r.EPSILON*Math.max(1,Math.abs(p),Math.abs(A))&&Math.abs(d-C)<=r.EPSILON*Math.max(1,Math.abs(d),Math.abs(C))&&Math.abs(f-P)<=r.EPSILON*Math.max(1,Math.abs(f),Math.abs(P))&&Math.abs(m-O)<=r.EPSILON*Math.max(1,Math.abs(m),Math.abs(O))&&Math.abs(v-R)<=r.EPSILON*Math.max(1,Math.abs(v),Math.abs(R))&&Math.abs(_-I)<=r.EPSILON*Math.max(1,Math.abs(_),Math.abs(I))&&Math.abs(g-k)<=r.EPSILON*Math.max(1,Math.abs(g),Math.abs(k))}var Q=_;i.mul=Q;var J=$;i.sub=J},{"./common.js":2}],8:[function(t,e,i){"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}Object.defineProperty(i,"__esModule",{value:!0}),i.create=h,i.identity=u,i.setAxisAngle=p,i.getAxisAngle=d,i.getAngle=f,i.multiply=m,i.rotateX=v,i.rotateY=_,i.rotateZ=g,i.calculateW=y,i.exp=b,i.ln=w,i.pow=x,i.slerp=E,i.random=M,i.invert=T,i.conjugate=L,i.fromMat3=S,i.fromEuler=A,i.str=C,i.setAxes=i.sqlerp=i.rotationTo=i.equals=i.exactEquals=i.normalize=i.sqrLen=i.squaredLength=i.len=i.length=i.lerp=i.dot=i.scale=i.mul=i.add=i.set=i.copy=i.fromValues=i.clone=void 0;var r=c(t("./common.js")),o=c(t("./mat3.js")),s=c(t("./vec3.js")),a=c(t("./vec4.js"));function l(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return l=function(){return t},t}function c(t){if(t&&t.__esModule)return t;if(null===t||"object"!==n(t)&&"function"!=typeof t)return{default:t};var e=l();if(e&&e.has(t))return e.get(t);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var s=r?Object.getOwnPropertyDescriptor(t,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=t[o]}return i.default=t,e&&e.set(t,i),i}function h(){var t=new r.ARRAY_TYPE(4);return r.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function u(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function p(t,e,i){i*=.5;var n=Math.sin(i);return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=Math.cos(i),t}function d(t,e){var i=2*Math.acos(e[3]),n=Math.sin(i/2);return n>r.EPSILON?(t[0]=e[0]/n,t[1]=e[1]/n,t[2]=e[2]/n):(t[0]=1,t[1]=0,t[2]=0),i}function f(t,e){var i=j(t,e);return Math.acos(2*i*i-1)}function m(t,e,i){var n=e[0],r=e[1],o=e[2],s=e[3],a=i[0],l=i[1],c=i[2],h=i[3];return t[0]=n*h+s*a+r*c-o*l,t[1]=r*h+s*l+o*a-n*c,t[2]=o*h+s*c+n*l-r*a,t[3]=s*h-n*a-r*l-o*c,t}function v(t,e,i){i*=.5;var n=e[0],r=e[1],o=e[2],s=e[3],a=Math.sin(i),l=Math.cos(i);return t[0]=n*l+s*a,t[1]=r*l+o*a,t[2]=o*l-r*a,t[3]=s*l-n*a,t}function _(t,e,i){i*=.5;var n=e[0],r=e[1],o=e[2],s=e[3],a=Math.sin(i),l=Math.cos(i);return t[0]=n*l-o*a,t[1]=r*l+s*a,t[2]=o*l+n*a,t[3]=s*l-r*a,t}function g(t,e,i){i*=.5;var n=e[0],r=e[1],o=e[2],s=e[3],a=Math.sin(i),l=Math.cos(i);return t[0]=n*l+r*a,t[1]=r*l-n*a,t[2]=o*l+s*a,t[3]=s*l-o*a,t}function y(t,e){var i=e[0],n=e[1],r=e[2];return t[0]=i,t[1]=n,t[2]=r,t[3]=Math.sqrt(Math.abs(1-i*i-n*n-r*r)),t}function b(t,e){var i=e[0],n=e[1],r=e[2],o=e[3],s=Math.sqrt(i*i+n*n+r*r),a=Math.exp(o),l=s>0?a*Math.sin(s)/s:0;return t[0]=i*l,t[1]=n*l,t[2]=r*l,t[3]=a*Math.cos(s),t}function w(t,e){var i=e[0],n=e[1],r=e[2],o=e[3],s=Math.sqrt(i*i+n*n+r*r),a=s>0?Math.atan2(s,o)/s:0;return t[0]=i*a,t[1]=n*a,t[2]=r*a,t[3]=.5*Math.log(i*i+n*n+r*r+o*o),t}function x(t,e,i){return w(t,e),z(t,t,i),b(t,t),t}function E(t,e,i,n){var o,s,a,l,c,h=e[0],u=e[1],p=e[2],d=e[3],f=i[0],m=i[1],v=i[2],_=i[3];return(s=h*f+u*m+p*v+d*_)<0&&(s=-s,f=-f,m=-m,v=-v,_=-_),1-s>r.EPSILON?(o=Math.acos(s),a=Math.sin(o),l=Math.sin((1-n)*o)/a,c=Math.sin(n*o)/a):(l=1-n,c=n),t[0]=l*h+c*f,t[1]=l*u+c*m,t[2]=l*p+c*v,t[3]=l*d+c*_,t}function M(t){var e=r.RANDOM(),i=r.RANDOM(),n=r.RANDOM(),o=Math.sqrt(1-e),s=Math.sqrt(e);return t[0]=o*Math.sin(2*Math.PI*i),t[1]=o*Math.cos(2*Math.PI*i),t[2]=s*Math.sin(2*Math.PI*n),t[3]=s*Math.cos(2*Math.PI*n),t}function T(t,e){var i=e[0],n=e[1],r=e[2],o=e[3],s=i*i+n*n+r*r+o*o,a=s?1/s:0;return t[0]=-i*a,t[1]=-n*a,t[2]=-r*a,t[3]=o*a,t}function L(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function S(t,e){var i,n=e[0]+e[4]+e[8];if(n>0)i=Math.sqrt(n+1),t[3]=.5*i,i=.5/i,t[0]=(e[5]-e[7])*i,t[1]=(e[6]-e[2])*i,t[2]=(e[1]-e[3])*i;else{var r=0;e[4]>e[0]&&(r=1),e[8]>e[3*r+r]&&(r=2);var o=(r+1)%3,s=(r+2)%3;i=Math.sqrt(e[3*r+r]-e[3*o+o]-e[3*s+s]+1),t[r]=.5*i,i=.5/i,t[3]=(e[3*o+s]-e[3*s+o])*i,t[o]=(e[3*o+r]+e[3*r+o])*i,t[s]=(e[3*s+r]+e[3*r+s])*i}return t}function A(t,e,i,n){var r=.5*Math.PI/180;e*=r,i*=r,n*=r;var o=Math.sin(e),s=Math.cos(e),a=Math.sin(i),l=Math.cos(i),c=Math.sin(n),h=Math.cos(n);return t[0]=o*l*h-s*a*c,t[1]=s*a*h+o*l*c,t[2]=s*l*c-o*a*h,t[3]=s*l*h+o*a*c,t}function C(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}var P=a.clone;i.clone=P;var O=a.fromValues;i.fromValues=O;var R=a.copy;i.copy=R;var I=a.set;i.set=I;var k=a.add;i.add=k;var D=m;i.mul=D;var z=a.scale;i.scale=z;var j=a.dot;i.dot=j;var N=a.lerp;i.lerp=N;var H=a.length;i.length=H;var F=H;i.len=F;var q=a.squaredLength;i.squaredLength=q;var Y=q;i.sqrLen=Y;var W=a.normalize;i.normalize=W;var B=a.exactEquals;i.exactEquals=B;var V=a.equals;i.equals=V;var X,$,G,U=(X=s.create(),$=s.fromValues(1,0,0),G=s.fromValues(0,1,0),function(t,e,i){var n=s.dot(e,i);return n<-.999999?(s.cross(X,$,e),s.len(X)<1e-6&&s.cross(X,G,e),s.normalize(X,X),p(t,X,Math.PI),t):n>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(s.cross(X,e,i),t[0]=X[0],t[1]=X[1],t[2]=X[2],t[3]=1+n,W(t,t))});i.rotationTo=U;var K,Z,Q=(K=h(),Z=h(),function(t,e,i,n,r,o){return E(K,e,r,o),E(Z,i,n,o),E(t,K,Z,2*o*(1-o)),t});i.sqlerp=Q;var J,tt=(J=o.create(),function(t,e,i,n){return J[0]=i[0],J[3]=i[1],J[6]=i[2],J[1]=n[0],J[4]=n[1],J[7]=n[2],J[2]=-e[0],J[5]=-e[1],J[8]=-e[2],W(t,S(t,J))});i.setAxes=tt},{"./common.js":2,"./mat3.js":6,"./vec3.js":11,"./vec4.js":12}],9:[function(t,e,i){"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}Object.defineProperty(i,"__esModule",{value:!0}),i.create=c,i.clone=h,i.fromValues=u,i.fromRotationTranslationValues=p,i.fromRotationTranslation=d,i.fromTranslation=f,i.fromRotation=m,i.fromMat4=v,i.copy=_,i.identity=g,i.set=y,i.getDual=w,i.setDual=E,i.getTranslation=M,i.translate=T,i.rotateX=L,i.rotateY=S,i.rotateZ=A,i.rotateByQuatAppend=C,i.rotateByQuatPrepend=P,i.rotateAroundAxis=O,i.add=R,i.multiply=I,i.scale=D,i.lerp=j,i.invert=N,i.conjugate=H,i.normalize=B,i.str=V,i.exactEquals=X,i.equals=$,i.sqrLen=i.squaredLength=i.len=i.length=i.dot=i.mul=i.setReal=i.getReal=void 0;var r=l(t("./common.js")),o=l(t("./quat.js")),s=l(t("./mat4.js"));function a(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return a=function(){return t},t}function l(t){if(t&&t.__esModule)return t;if(null===t||"object"!==n(t)&&"function"!=typeof t)return{default:t};var e=a();if(e&&e.has(t))return e.get(t);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var s=r?Object.getOwnPropertyDescriptor(t,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=t[o]}return i.default=t,e&&e.set(t,i),i}function c(){var t=new r.ARRAY_TYPE(8);return r.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t}function h(t){var e=new r.ARRAY_TYPE(8);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e}function u(t,e,i,n,o,s,a,l){var c=new r.ARRAY_TYPE(8);return c[0]=t,c[1]=e,c[2]=i,c[3]=n,c[4]=o,c[5]=s,c[6]=a,c[7]=l,c}function p(t,e,i,n,o,s,a){var l=new r.ARRAY_TYPE(8);l[0]=t,l[1]=e,l[2]=i,l[3]=n;var c=.5*o,h=.5*s,u=.5*a;return l[4]=c*n+h*i-u*e,l[5]=h*n+u*t-c*i,l[6]=u*n+c*e-h*t,l[7]=-c*t-h*e-u*i,l}function d(t,e,i){var n=.5*i[0],r=.5*i[1],o=.5*i[2],s=e[0],a=e[1],l=e[2],c=e[3];return t[0]=s,t[1]=a,t[2]=l,t[3]=c,t[4]=n*c+r*l-o*a,t[5]=r*c+o*s-n*l,t[6]=o*c+n*a-r*s,t[7]=-n*s-r*a-o*l,t}function f(t,e){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*e[0],t[5]=.5*e[1],t[6]=.5*e[2],t[7]=0,t}function m(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function v(t,e){var i=o.create();s.getRotation(i,e);var n=new r.ARRAY_TYPE(3);return s.getTranslation(n,e),d(t,i,n),t}function _(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t}function g(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function y(t,e,i,n,r,o,s,a,l){return t[0]=e,t[1]=i,t[2]=n,t[3]=r,t[4]=o,t[5]=s,t[6]=a,t[7]=l,t}var b=o.copy;function w(t,e){return t[0]=e[4],t[1]=e[5],t[2]=e[6],t[3]=e[7],t}i.getReal=b;var x=o.copy;function E(t,e){return t[4]=e[0],t[5]=e[1],t[6]=e[2],t[7]=e[3],t}function M(t,e){var i=e[4],n=e[5],r=e[6],o=e[7],s=-e[0],a=-e[1],l=-e[2],c=e[3];return t[0]=2*(i*c+o*s+n*l-r*a),t[1]=2*(n*c+o*a+r*s-i*l),t[2]=2*(r*c+o*l+i*a-n*s),t}function T(t,e,i){var n=e[0],r=e[1],o=e[2],s=e[3],a=.5*i[0],l=.5*i[1],c=.5*i[2],h=e[4],u=e[5],p=e[6],d=e[7];return t[0]=n,t[1]=r,t[2]=o,t[3]=s,t[4]=s*a+r*c-o*l+h,t[5]=s*l+o*a-n*c+u,t[6]=s*c+n*l-r*a+p,t[7]=-n*a-r*l-o*c+d,t}function L(t,e,i){var n=-e[0],r=-e[1],s=-e[2],a=e[3],l=e[4],c=e[5],h=e[6],u=e[7],p=l*a+u*n+c*s-h*r,d=c*a+u*r+h*n-l*s,f=h*a+u*s+l*r-c*n,m=u*a-l*n-c*r-h*s;return o.rotateX(t,e,i),n=t[0],r=t[1],s=t[2],a=t[3],t[4]=p*a+m*n+d*s-f*r,t[5]=d*a+m*r+f*n-p*s,t[6]=f*a+m*s+p*r-d*n,t[7]=m*a-p*n-d*r-f*s,t}function S(t,e,i){var n=-e[0],r=-e[1],s=-e[2],a=e[3],l=e[4],c=e[5],h=e[6],u=e[7],p=l*a+u*n+c*s-h*r,d=c*a+u*r+h*n-l*s,f=h*a+u*s+l*r-c*n,m=u*a-l*n-c*r-h*s;return o.rotateY(t,e,i),n=t[0],r=t[1],s=t[2],a=t[3],t[4]=p*a+m*n+d*s-f*r,t[5]=d*a+m*r+f*n-p*s,t[6]=f*a+m*s+p*r-d*n,t[7]=m*a-p*n-d*r-f*s,t}function A(t,e,i){var n=-e[0],r=-e[1],s=-e[2],a=e[3],l=e[4],c=e[5],h=e[6],u=e[7],p=l*a+u*n+c*s-h*r,d=c*a+u*r+h*n-l*s,f=h*a+u*s+l*r-c*n,m=u*a-l*n-c*r-h*s;return o.rotateZ(t,e,i),n=t[0],r=t[1],s=t[2],a=t[3],t[4]=p*a+m*n+d*s-f*r,t[5]=d*a+m*r+f*n-p*s,t[6]=f*a+m*s+p*r-d*n,t[7]=m*a-p*n-d*r-f*s,t}function C(t,e,i){var n=i[0],r=i[1],o=i[2],s=i[3],a=e[0],l=e[1],c=e[2],h=e[3];return t[0]=a*s+h*n+l*o-c*r,t[1]=l*s+h*r+c*n-a*o,t[2]=c*s+h*o+a*r-l*n,t[3]=h*s-a*n-l*r-c*o,a=e[4],l=e[5],c=e[6],h=e[7],t[4]=a*s+h*n+l*o-c*r,t[5]=l*s+h*r+c*n-a*o,t[6]=c*s+h*o+a*r-l*n,t[7]=h*s-a*n-l*r-c*o,t}function P(t,e,i){var n=e[0],r=e[1],o=e[2],s=e[3],a=i[0],l=i[1],c=i[2],h=i[3];return t[0]=n*h+s*a+r*c-o*l,t[1]=r*h+s*l+o*a-n*c,t[2]=o*h+s*c+n*l-r*a,t[3]=s*h-n*a-r*l-o*c,a=i[4],l=i[5],c=i[6],h=i[7],t[4]=n*h+s*a+r*c-o*l,t[5]=r*h+s*l+o*a-n*c,t[6]=o*h+s*c+n*l-r*a,t[7]=s*h-n*a-r*l-o*c,t}function O(t,e,i,n){if(Math.abs(n)<r.EPSILON)return _(t,e);var o=Math.hypot(i[0],i[1],i[2]);n*=.5;var s=Math.sin(n),a=s*i[0]/o,l=s*i[1]/o,c=s*i[2]/o,h=Math.cos(n),u=e[0],p=e[1],d=e[2],f=e[3];t[0]=u*h+f*a+p*c-d*l,t[1]=p*h+f*l+d*a-u*c,t[2]=d*h+f*c+u*l-p*a,t[3]=f*h-u*a-p*l-d*c;var m=e[4],v=e[5],g=e[6],y=e[7];return t[4]=m*h+y*a+v*c-g*l,t[5]=v*h+y*l+g*a-m*c,t[6]=g*h+y*c+m*l-v*a,t[7]=y*h-m*a-v*l-g*c,t}function R(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t[6]=e[6]+i[6],t[7]=e[7]+i[7],t}function I(t,e,i){var n=e[0],r=e[1],o=e[2],s=e[3],a=i[4],l=i[5],c=i[6],h=i[7],u=e[4],p=e[5],d=e[6],f=e[7],m=i[0],v=i[1],_=i[2],g=i[3];return t[0]=n*g+s*m+r*_-o*v,t[1]=r*g+s*v+o*m-n*_,t[2]=o*g+s*_+n*v-r*m,t[3]=s*g-n*m-r*v-o*_,t[4]=n*h+s*a+r*c-o*l+u*g+f*m+p*_-d*v,t[5]=r*h+s*l+o*a-n*c+p*g+f*v+d*m-u*_,t[6]=o*h+s*c+n*l-r*a+d*g+f*_+u*v-p*m,t[7]=s*h-n*a-r*l-o*c+f*g-u*m-p*v-d*_,t}i.setReal=x;var k=I;function D(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t}i.mul=k;var z=o.dot;function j(t,e,i,n){var r=1-n;return z(e,i)<0&&(n=-n),t[0]=e[0]*r+i[0]*n,t[1]=e[1]*r+i[1]*n,t[2]=e[2]*r+i[2]*n,t[3]=e[3]*r+i[3]*n,t[4]=e[4]*r+i[4]*n,t[5]=e[5]*r+i[5]*n,t[6]=e[6]*r+i[6]*n,t[7]=e[7]*r+i[7]*n,t}function N(t,e){var i=Y(e);return t[0]=-e[0]/i,t[1]=-e[1]/i,t[2]=-e[2]/i,t[3]=e[3]/i,t[4]=-e[4]/i,t[5]=-e[5]/i,t[6]=-e[6]/i,t[7]=e[7]/i,t}function H(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=e[7],t}i.dot=z;var F=o.length;i.length=F;var q=F;i.len=q;var Y=o.squaredLength;i.squaredLength=Y;var W=Y;function B(t,e){var i=Y(e);if(i>0){i=Math.sqrt(i);var n=e[0]/i,r=e[1]/i,o=e[2]/i,s=e[3]/i,a=e[4],l=e[5],c=e[6],h=e[7],u=n*a+r*l+o*c+s*h;t[0]=n,t[1]=r,t[2]=o,t[3]=s,t[4]=(a-n*u)/i,t[5]=(l-r*u)/i,t[6]=(c-o*u)/i,t[7]=(h-s*u)/i}return t}function V(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"}function X(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]}function $(t,e){var i=t[0],n=t[1],o=t[2],s=t[3],a=t[4],l=t[5],c=t[6],h=t[7],u=e[0],p=e[1],d=e[2],f=e[3],m=e[4],v=e[5],_=e[6],g=e[7];return Math.abs(i-u)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(n-p)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(p))&&Math.abs(o-d)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(d))&&Math.abs(s-f)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(f))&&Math.abs(a-m)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(m))&&Math.abs(l-v)<=r.EPSILON*Math.max(1,Math.abs(l),Math.abs(v))&&Math.abs(c-_)<=r.EPSILON*Math.max(1,Math.abs(c),Math.abs(_))&&Math.abs(h-g)<=r.EPSILON*Math.max(1,Math.abs(h),Math.abs(g))}i.sqrLen=W},{"./common.js":2,"./mat4.js":7,"./quat.js":8}],10:[function(t,e,i){"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}Object.defineProperty(i,"__esModule",{value:!0}),i.create=a,i.clone=l,i.fromValues=c,i.copy=h,i.set=u,i.add=p,i.subtract=d,i.multiply=f,i.divide=m,i.ceil=v,i.floor=_,i.min=g,i.max=y,i.round=b,i.scale=w,i.scaleAndAdd=x,i.distance=E,i.squaredDistance=M,i.length=T,i.squaredLength=L,i.negate=S,i.inverse=A,i.normalize=C,i.dot=P,i.cross=O,i.lerp=R,i.random=I,i.transformMat2=k,i.transformMat2d=D,i.transformMat3=z,i.transformMat4=j,i.rotate=N,i.angle=H,i.zero=F,i.str=q,i.exactEquals=Y,i.equals=W,i.forEach=i.sqrLen=i.sqrDist=i.dist=i.div=i.mul=i.sub=i.len=void 0;var r=s(t("./common.js"));function o(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return o=function(){return t},t}function s(t){if(t&&t.__esModule)return t;if(null===t||"object"!==n(t)&&"function"!=typeof t)return{default:t};var e=o();if(e&&e.has(t))return e.get(t);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){var a=r?Object.getOwnPropertyDescriptor(t,s):null;a&&(a.get||a.set)?Object.defineProperty(i,s,a):i[s]=t[s]}return i.default=t,e&&e.set(t,i),i}function a(){var t=new r.ARRAY_TYPE(2);return r.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0),t}function l(t){var e=new r.ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e}function c(t,e){var i=new r.ARRAY_TYPE(2);return i[0]=t,i[1]=e,i}function h(t,e){return t[0]=e[0],t[1]=e[1],t}function u(t,e,i){return t[0]=e,t[1]=i,t}function p(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t}function d(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t}function f(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t}function m(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t}function v(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function _(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function g(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t}function y(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t}function b(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function w(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t}function x(t,e,i,n){return t[0]=e[0]+i[0]*n,t[1]=e[1]+i[1]*n,t}function E(t,e){var i=e[0]-t[0],n=e[1]-t[1];return Math.hypot(i,n)}function M(t,e){var i=e[0]-t[0],n=e[1]-t[1];return i*i+n*n}function T(t){var e=t[0],i=t[1];return Math.hypot(e,i)}function L(t){var e=t[0],i=t[1];return e*e+i*i}function S(t,e){return t[0]=-e[0],t[1]=-e[1],t}function A(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function C(t,e){var i=e[0],n=e[1],r=i*i+n*n;return r>0&&(r=1/Math.sqrt(r)),t[0]=e[0]*r,t[1]=e[1]*r,t}function P(t,e){return t[0]*e[0]+t[1]*e[1]}function O(t,e,i){var n=e[0]*i[1]-e[1]*i[0];return t[0]=t[1]=0,t[2]=n,t}function R(t,e,i,n){var r=e[0],o=e[1];return t[0]=r+n*(i[0]-r),t[1]=o+n*(i[1]-o),t}function I(t,e){e=e||1;var i=2*r.RANDOM()*Math.PI;return t[0]=Math.cos(i)*e,t[1]=Math.sin(i)*e,t}function k(t,e,i){var n=e[0],r=e[1];return t[0]=i[0]*n+i[2]*r,t[1]=i[1]*n+i[3]*r,t}function D(t,e,i){var n=e[0],r=e[1];return t[0]=i[0]*n+i[2]*r+i[4],t[1]=i[1]*n+i[3]*r+i[5],t}function z(t,e,i){var n=e[0],r=e[1];return t[0]=i[0]*n+i[3]*r+i[6],t[1]=i[1]*n+i[4]*r+i[7],t}function j(t,e,i){var n=e[0],r=e[1];return t[0]=i[0]*n+i[4]*r+i[12],t[1]=i[1]*n+i[5]*r+i[13],t}function N(t,e,i,n){var r=e[0]-i[0],o=e[1]-i[1],s=Math.sin(n),a=Math.cos(n);return t[0]=r*a-o*s+i[0],t[1]=r*s+o*a+i[1],t}function H(t,e){var i=t[0],n=t[1],r=e[0],o=e[1],s=Math.sqrt(i*i+n*n)*Math.sqrt(r*r+o*o),a=s&&(i*r+n*o)/s;return Math.acos(Math.min(Math.max(a,-1),1))}function F(t){return t[0]=0,t[1]=0,t}function q(t){return"vec2("+t[0]+", "+t[1]+")"}function Y(t,e){return t[0]===e[0]&&t[1]===e[1]}function W(t,e){var i=t[0],n=t[1],o=e[0],s=e[1];return Math.abs(i-o)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(n-s)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))}var B=T;i.len=B;var V=d;i.sub=V;var X=f;i.mul=X;var $=m;i.div=$;var G=E;i.dist=G;var U=M;i.sqrDist=U;var K=L;i.sqrLen=K;var Z,Q=(Z=a(),function(t,e,i,n,r,o){var s,a;for(e||(e=2),i||(i=0),a=n?Math.min(n*e+i,t.length):t.length,s=i;s<a;s+=e)Z[0]=t[s],Z[1]=t[s+1],r(Z,Z,o),t[s]=Z[0],t[s+1]=Z[1];return t});i.forEach=Q},{"./common.js":2}],11:[function(t,e,i){"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}Object.defineProperty(i,"__esModule",{value:!0}),i.create=a,i.clone=l,i.length=c,i.fromValues=h,i.copy=u,i.set=p,i.add=d,i.subtract=f,i.multiply=m,i.divide=v,i.ceil=_,i.floor=g,i.min=y,i.max=b,i.round=w,i.scale=x,i.scaleAndAdd=E,i.distance=M,i.squaredDistance=T,i.squaredLength=L,i.negate=S,i.inverse=A,i.normalize=C,i.dot=P,i.cross=O,i.lerp=R,i.hermite=I,i.bezier=k,i.random=D,i.transformMat4=z,i.transformMat3=j,i.transformQuat=N,i.rotateX=H,i.rotateY=F,i.rotateZ=q,i.angle=Y,i.zero=W,i.str=B,i.exactEquals=V,i.equals=X,i.forEach=i.sqrLen=i.len=i.sqrDist=i.dist=i.div=i.mul=i.sub=void 0;var r=s(t("./common.js"));function o(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return o=function(){return t},t}function s(t){if(t&&t.__esModule)return t;if(null===t||"object"!==n(t)&&"function"!=typeof t)return{default:t};var e=o();if(e&&e.has(t))return e.get(t);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){var a=r?Object.getOwnPropertyDescriptor(t,s):null;a&&(a.get||a.set)?Object.defineProperty(i,s,a):i[s]=t[s]}return i.default=t,e&&e.set(t,i),i}function a(){var t=new r.ARRAY_TYPE(3);return r.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function l(t){var e=new r.ARRAY_TYPE(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function c(t){var e=t[0],i=t[1],n=t[2];return Math.hypot(e,i,n)}function h(t,e,i){var n=new r.ARRAY_TYPE(3);return n[0]=t,n[1]=e,n[2]=i,n}function u(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function p(t,e,i,n){return t[0]=e,t[1]=i,t[2]=n,t}function d(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t}function f(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t}function m(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t}function v(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t[2]=e[2]/i[2],t}function _(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function g(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function y(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t[2]=Math.min(e[2],i[2]),t}function b(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t[2]=Math.max(e[2],i[2]),t}function w(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function x(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t}function E(t,e,i,n){return t[0]=e[0]+i[0]*n,t[1]=e[1]+i[1]*n,t[2]=e[2]+i[2]*n,t}function M(t,e){var i=e[0]-t[0],n=e[1]-t[1],r=e[2]-t[2];return Math.hypot(i,n,r)}function T(t,e){var i=e[0]-t[0],n=e[1]-t[1],r=e[2]-t[2];return i*i+n*n+r*r}function L(t){var e=t[0],i=t[1],n=t[2];return e*e+i*i+n*n}function S(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function A(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function C(t,e){var i=e[0],n=e[1],r=e[2],o=i*i+n*n+r*r;return o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o,t}function P(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function O(t,e,i){var n=e[0],r=e[1],o=e[2],s=i[0],a=i[1],l=i[2];return t[0]=r*l-o*a,t[1]=o*s-n*l,t[2]=n*a-r*s,t}function R(t,e,i,n){var r=e[0],o=e[1],s=e[2];return t[0]=r+n*(i[0]-r),t[1]=o+n*(i[1]-o),t[2]=s+n*(i[2]-s),t}function I(t,e,i,n,r,o){var s=o*o,a=s*(2*o-3)+1,l=s*(o-2)+o,c=s*(o-1),h=s*(3-2*o);return t[0]=e[0]*a+i[0]*l+n[0]*c+r[0]*h,t[1]=e[1]*a+i[1]*l+n[1]*c+r[1]*h,t[2]=e[2]*a+i[2]*l+n[2]*c+r[2]*h,t}function k(t,e,i,n,r,o){var s=1-o,a=s*s,l=o*o,c=a*s,h=3*o*a,u=3*l*s,p=l*o;return t[0]=e[0]*c+i[0]*h+n[0]*u+r[0]*p,t[1]=e[1]*c+i[1]*h+n[1]*u+r[1]*p,t[2]=e[2]*c+i[2]*h+n[2]*u+r[2]*p,t}function D(t,e){e=e||1;var i=2*r.RANDOM()*Math.PI,n=2*r.RANDOM()-1,o=Math.sqrt(1-n*n)*e;return t[0]=Math.cos(i)*o,t[1]=Math.sin(i)*o,t[2]=n*e,t}function z(t,e,i){var n=e[0],r=e[1],o=e[2],s=i[3]*n+i[7]*r+i[11]*o+i[15];return s=s||1,t[0]=(i[0]*n+i[4]*r+i[8]*o+i[12])/s,t[1]=(i[1]*n+i[5]*r+i[9]*o+i[13])/s,t[2]=(i[2]*n+i[6]*r+i[10]*o+i[14])/s,t}function j(t,e,i){var n=e[0],r=e[1],o=e[2];return t[0]=n*i[0]+r*i[3]+o*i[6],t[1]=n*i[1]+r*i[4]+o*i[7],t[2]=n*i[2]+r*i[5]+o*i[8],t}function N(t,e,i){var n=i[0],r=i[1],o=i[2],s=i[3],a=e[0],l=e[1],c=e[2],h=r*c-o*l,u=o*a-n*c,p=n*l-r*a,d=r*p-o*u,f=o*h-n*p,m=n*u-r*h,v=2*s;return h*=v,u*=v,p*=v,d*=2,f*=2,m*=2,t[0]=a+h+d,t[1]=l+u+f,t[2]=c+p+m,t}function H(t,e,i,n){var r=[],o=[];return r[0]=e[0]-i[0],r[1]=e[1]-i[1],r[2]=e[2]-i[2],o[0]=r[0],o[1]=r[1]*Math.cos(n)-r[2]*Math.sin(n),o[2]=r[1]*Math.sin(n)+r[2]*Math.cos(n),t[0]=o[0]+i[0],t[1]=o[1]+i[1],t[2]=o[2]+i[2],t}function F(t,e,i,n){var r=[],o=[];return r[0]=e[0]-i[0],r[1]=e[1]-i[1],r[2]=e[2]-i[2],o[0]=r[2]*Math.sin(n)+r[0]*Math.cos(n),o[1]=r[1],o[2]=r[2]*Math.cos(n)-r[0]*Math.sin(n),t[0]=o[0]+i[0],t[1]=o[1]+i[1],t[2]=o[2]+i[2],t}function q(t,e,i,n){var r=[],o=[];return r[0]=e[0]-i[0],r[1]=e[1]-i[1],r[2]=e[2]-i[2],o[0]=r[0]*Math.cos(n)-r[1]*Math.sin(n),o[1]=r[0]*Math.sin(n)+r[1]*Math.cos(n),o[2]=r[2],t[0]=o[0]+i[0],t[1]=o[1]+i[1],t[2]=o[2]+i[2],t}function Y(t,e){var i=t[0],n=t[1],r=t[2],o=e[0],s=e[1],a=e[2],l=Math.sqrt(i*i+n*n+r*r)*Math.sqrt(o*o+s*s+a*a),c=l&&P(t,e)/l;return Math.acos(Math.min(Math.max(c,-1),1))}function W(t){return t[0]=0,t[1]=0,t[2]=0,t}function B(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function V(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function X(t,e){var i=t[0],n=t[1],o=t[2],s=e[0],a=e[1],l=e[2];return Math.abs(i-s)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(n-a)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(o-l)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(l))}var $=f;i.sub=$;var G=m;i.mul=G;var U=v;i.div=U;var K=M;i.dist=K;var Z=T;i.sqrDist=Z;var Q=c;i.len=Q;var J=L;i.sqrLen=J;var tt,et=(tt=a(),function(t,e,i,n,r,o){var s,a;for(e||(e=3),i||(i=0),a=n?Math.min(n*e+i,t.length):t.length,s=i;s<a;s+=e)tt[0]=t[s],tt[1]=t[s+1],tt[2]=t[s+2],r(tt,tt,o),t[s]=tt[0],t[s+1]=tt[1],t[s+2]=tt[2];return t});i.forEach=et},{"./common.js":2}],12:[function(t,e,i){"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}Object.defineProperty(i,"__esModule",{value:!0}),i.create=a,i.clone=l,i.fromValues=c,i.copy=h,i.set=u,i.add=p,i.subtract=d,i.multiply=f,i.divide=m,i.ceil=v,i.floor=_,i.min=g,i.max=y,i.round=b,i.scale=w,i.scaleAndAdd=x,i.distance=E,i.squaredDistance=M,i.length=T,i.squaredLength=L,i.negate=S,i.inverse=A,i.normalize=C,i.dot=P,i.cross=O,i.lerp=R,i.random=I,i.transformMat4=k,i.transformQuat=D,i.zero=z,i.str=j,i.exactEquals=N,i.equals=H,i.forEach=i.sqrLen=i.len=i.sqrDist=i.dist=i.div=i.mul=i.sub=void 0;var r=s(t("./common.js"));function o(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return o=function(){return t},t}function s(t){if(t&&t.__esModule)return t;if(null===t||"object"!==n(t)&&"function"!=typeof t)return{default:t};var e=o();if(e&&e.has(t))return e.get(t);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){var a=r?Object.getOwnPropertyDescriptor(t,s):null;a&&(a.get||a.set)?Object.defineProperty(i,s,a):i[s]=t[s]}return i.default=t,e&&e.set(t,i),i}function a(){var t=new r.ARRAY_TYPE(4);return r.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function l(t){var e=new r.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function c(t,e,i,n){var o=new r.ARRAY_TYPE(4);return o[0]=t,o[1]=e,o[2]=i,o[3]=n,o}function h(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function u(t,e,i,n,r){return t[0]=e,t[1]=i,t[2]=n,t[3]=r,t}function p(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t}function d(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t}function f(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t[3]=e[3]*i[3],t}function m(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t[2]=e[2]/i[2],t[3]=e[3]/i[3],t}function v(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function _(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function g(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t[2]=Math.min(e[2],i[2]),t[3]=Math.min(e[3],i[3]),t}function y(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t[2]=Math.max(e[2],i[2]),t[3]=Math.max(e[3],i[3]),t}function b(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function w(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t}function x(t,e,i,n){return t[0]=e[0]+i[0]*n,t[1]=e[1]+i[1]*n,t[2]=e[2]+i[2]*n,t[3]=e[3]+i[3]*n,t}function E(t,e){var i=e[0]-t[0],n=e[1]-t[1],r=e[2]-t[2],o=e[3]-t[3];return Math.hypot(i,n,r,o)}function M(t,e){var i=e[0]-t[0],n=e[1]-t[1],r=e[2]-t[2],o=e[3]-t[3];return i*i+n*n+r*r+o*o}function T(t){var e=t[0],i=t[1],n=t[2],r=t[3];return Math.hypot(e,i,n,r)}function L(t){var e=t[0],i=t[1],n=t[2],r=t[3];return e*e+i*i+n*n+r*r}function S(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function A(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function C(t,e){var i=e[0],n=e[1],r=e[2],o=e[3],s=i*i+n*n+r*r+o*o;return s>0&&(s=1/Math.sqrt(s)),t[0]=i*s,t[1]=n*s,t[2]=r*s,t[3]=o*s,t}function P(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function O(t,e,i,n){var r=i[0]*n[1]-i[1]*n[0],o=i[0]*n[2]-i[2]*n[0],s=i[0]*n[3]-i[3]*n[0],a=i[1]*n[2]-i[2]*n[1],l=i[1]*n[3]-i[3]*n[1],c=i[2]*n[3]-i[3]*n[2],h=e[0],u=e[1],p=e[2],d=e[3];return t[0]=u*c-p*l+d*a,t[1]=-h*c+p*s-d*o,t[2]=h*l-u*s+d*r,t[3]=-h*a+u*o-p*r,t}function R(t,e,i,n){var r=e[0],o=e[1],s=e[2],a=e[3];return t[0]=r+n*(i[0]-r),t[1]=o+n*(i[1]-o),t[2]=s+n*(i[2]-s),t[3]=a+n*(i[3]-a),t}function I(t,e){var i,n,o,s,a,l;e=e||1;do{a=(i=2*r.RANDOM()-1)*i+(n=2*r.RANDOM()-1)*n}while(a>=1);do{l=(o=2*r.RANDOM()-1)*o+(s=2*r.RANDOM()-1)*s}while(l>=1);var c=Math.sqrt((1-a)/l);return t[0]=e*i,t[1]=e*n,t[2]=e*o*c,t[3]=e*s*c,t}function k(t,e,i){var n=e[0],r=e[1],o=e[2],s=e[3];return t[0]=i[0]*n+i[4]*r+i[8]*o+i[12]*s,t[1]=i[1]*n+i[5]*r+i[9]*o+i[13]*s,t[2]=i[2]*n+i[6]*r+i[10]*o+i[14]*s,t[3]=i[3]*n+i[7]*r+i[11]*o+i[15]*s,t}function D(t,e,i){var n=e[0],r=e[1],o=e[2],s=i[0],a=i[1],l=i[2],c=i[3],h=c*n+a*o-l*r,u=c*r+l*n-s*o,p=c*o+s*r-a*n,d=-s*n-a*r-l*o;return t[0]=h*c+d*-s+u*-l-p*-a,t[1]=u*c+d*-a+p*-s-h*-l,t[2]=p*c+d*-l+h*-a-u*-s,t[3]=e[3],t}function z(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function j(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function N(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function H(t,e){var i=t[0],n=t[1],o=t[2],s=t[3],a=e[0],l=e[1],c=e[2],h=e[3];return Math.abs(i-a)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(a))&&Math.abs(n-l)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(o-c)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(c))&&Math.abs(s-h)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(h))}var F=d;i.sub=F;var q=f;i.mul=q;var Y=m;i.div=Y;var W=E;i.dist=W;var B=M;i.sqrDist=B;var V=T;i.len=V;var X=L;i.sqrLen=X;var $,G=($=a(),function(t,e,i,n,r,o){var s,a;for(e||(e=4),i||(i=0),a=n?Math.min(n*e+i,t.length):t.length,s=i;s<a;s+=e)$[0]=t[s],$[1]=t[s+1],$[2]=t[s+2],$[3]=t[s+3],r($,$,o),t[s]=$[0],t[s+1]=$[1],t[s+2]=$[2],t[s+3]=$[3];return t});i.forEach=G},{"./common.js":2}],13:[function(t,e,i){!function(t,i,r,o){"use strict";var s=["","webkit","moz","MS","ms","o"],a=i.createElement("div"),l="function",c=Math.round,h=Math.abs,u=Date.now;function p(t,e,i){return setTimeout(g(t,i),e)}function d(t,e,i){return!!Array.isArray(t)&&(f(t,i[e],i),!0)}function f(t,e,i){var n;if(t)if(t.forEach)t.forEach(e,i);else if(t.length!==o)for(n=0;n<t.length;)e.call(i,t[n],n,t),n++;else for(n in t)t.hasOwnProperty(n)&&e.call(i,t[n],n,t)}function m(t,e,i){for(var n=Object.keys(e),r=0;r<n.length;)(!i||i&&t[n[r]]===o)&&(t[n[r]]=e[n[r]]),r++;return t}function v(t,e){return m(t,e,!0)}function _(t,e,i){var n,r=e.prototype;(n=t.prototype=Object.create(r)).constructor=t,n._super=r,i&&m(n,i)}function g(t,e){return function(){return t.apply(e,arguments)}}function y(t,e){return typeof t==l?t.apply(e&&e[0]||o,e):t}function b(t,e){return t===o?e:t}function w(t,e,i){f(T(e),(function(e){t.addEventListener(e,i,!1)}))}function x(t,e,i){f(T(e),(function(e){t.removeEventListener(e,i,!1)}))}function E(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function M(t,e){return t.indexOf(e)>-1}function T(t){return t.trim().split(/\s+/g)}function L(t,e,i){if(t.indexOf&&!i)return t.indexOf(e);for(var n=0;n<t.length;){if(i&&t[n][i]==e||!i&&t[n]===e)return n;n++}return-1}function S(t){return Array.prototype.slice.call(t,0)}function A(t,e,i){for(var n=[],r=[],o=0;o<t.length;){var s=e?t[o][e]:t[o];L(r,s)<0&&n.push(t[o]),r[o]=s,o++}return i&&(n=e?n.sort((function(t,i){return t[e]>i[e]})):n.sort()),n}function C(t,e){for(var i,n,r=e[0].toUpperCase()+e.slice(1),a=0;a<s.length;){if((n=(i=s[a])?i+r:e)in t)return n;a++}return o}var P=1;function O(){return P++}function R(t){var e=t.ownerDocument;return e.defaultView||e.parentWindow}var I=/mobile|tablet|ip(ad|hone|od)|android/i,k="ontouchstart"in t,D=C(t,"PointerEvent")!==o,z=k&&I.test(navigator.userAgent),j="touch",N="pen",H="mouse",F="kinect",q=25,Y=1,W=2,B=4,V=8,X=1,$=2,G=4,U=8,K=16,Z=$|G,Q=U|K,J=Z|Q,tt=["x","y"],et=["clientX","clientY"];function it(t,e){var i=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){y(t.options.enable,[t])&&i.handler(e)},this.init()}function nt(t){var e=t.options.inputClass;return new(e||(D?Mt:z?Rt:k?kt:yt))(t,rt)}function rt(t,e,i){var n=i.pointers.length,r=i.changedPointers.length,o=e&Y&&n-r==0,s=e&(B|V)&&n-r==0;i.isFirst=!!o,i.isFinal=!!s,o&&(t.session={}),i.eventType=e,ot(t,i),t.emit("hammer.input",i),t.recognize(i),t.session.prevInput=i}function ot(t,e){var i=t.session,n=e.pointers,r=n.length;i.firstInput||(i.firstInput=lt(e)),r>1&&!i.firstMultiple?i.firstMultiple=lt(e):1===r&&(i.firstMultiple=!1);var o=i.firstInput,s=i.firstMultiple,a=s?s.center:o.center,l=e.center=ct(n);e.timeStamp=u(),e.deltaTime=e.timeStamp-o.timeStamp,e.angle=dt(a,l),e.distance=pt(a,l),st(i,e),e.offsetDirection=ut(e.deltaX,e.deltaY),e.scale=s?mt(s.pointers,n):1,e.rotation=s?ft(s.pointers,n):0,at(i,e);var c=t.element;E(e.srcEvent.target,c)&&(c=e.srcEvent.target),e.target=c}function st(t,e){var i=e.center,n=t.offsetDelta||{},r=t.prevDelta||{},o=t.prevInput||{};e.eventType!==Y&&o.eventType!==B||(r=t.prevDelta={x:o.deltaX||0,y:o.deltaY||0},n=t.offsetDelta={x:i.x,y:i.y}),e.deltaX=r.x+(i.x-n.x),e.deltaY=r.y+(i.y-n.y)}function at(t,e){var i,n,r,s,a=t.lastInterval||e,l=e.timeStamp-a.timeStamp;if(e.eventType!=V&&(l>q||a.velocity===o)){var c=a.deltaX-e.deltaX,u=a.deltaY-e.deltaY,p=ht(l,c,u);n=p.x,r=p.y,i=h(p.x)>h(p.y)?p.x:p.y,s=ut(c,u),t.lastInterval=e}else i=a.velocity,n=a.velocityX,r=a.velocityY,s=a.direction;e.velocity=i,e.velocityX=n,e.velocityY=r,e.direction=s}function lt(t){for(var e=[],i=0;i<t.pointers.length;)e[i]={clientX:c(t.pointers[i].clientX),clientY:c(t.pointers[i].clientY)},i++;return{timeStamp:u(),pointers:e,center:ct(e),deltaX:t.deltaX,deltaY:t.deltaY}}function ct(t){var e=t.length;if(1===e)return{x:c(t[0].clientX),y:c(t[0].clientY)};for(var i=0,n=0,r=0;r<e;)i+=t[r].clientX,n+=t[r].clientY,r++;return{x:c(i/e),y:c(n/e)}}function ht(t,e,i){return{x:e/t||0,y:i/t||0}}function ut(t,e){return t===e?X:h(t)>=h(e)?t>0?$:G:e>0?U:K}function pt(t,e,i){i||(i=tt);var n=e[i[0]]-t[i[0]],r=e[i[1]]-t[i[1]];return Math.sqrt(n*n+r*r)}function dt(t,e,i){i||(i=tt);var n=e[i[0]]-t[i[0]],r=e[i[1]]-t[i[1]];return 180*Math.atan2(r,n)/Math.PI}function ft(t,e){return dt(e[1],e[0],et)-dt(t[1],t[0],et)}function mt(t,e){return pt(e[0],e[1],et)/pt(t[0],t[1],et)}it.prototype={handler:function(){},init:function(){this.evEl&&w(this.element,this.evEl,this.domHandler),this.evTarget&&w(this.target,this.evTarget,this.domHandler),this.evWin&&w(R(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&x(this.element,this.evEl,this.domHandler),this.evTarget&&x(this.target,this.evTarget,this.domHandler),this.evWin&&x(R(this.element),this.evWin,this.domHandler)}};var vt={mousedown:Y,mousemove:W,mouseup:B},_t="mousedown",gt="mousemove mouseup";function yt(){this.evEl=_t,this.evWin=gt,this.allow=!0,this.pressed=!1,it.apply(this,arguments)}_(yt,it,{handler:function(t){var e=vt[t.type];e&Y&&0===t.button&&(this.pressed=!0),e&W&&1!==t.which&&(e=B),this.pressed&&this.allow&&(e&B&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:H,srcEvent:t}))}});var bt={pointerdown:Y,pointermove:W,pointerup:B,pointercancel:V,pointerout:V},wt={2:j,3:N,4:H,5:F},xt="pointerdown",Et="pointermove pointerup pointercancel";function Mt(){this.evEl=xt,this.evWin=Et,it.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}t.MSPointerEvent&&(xt="MSPointerDown",Et="MSPointerMove MSPointerUp MSPointerCancel"),_(Mt,it,{handler:function(t){var e=this.store,i=!1,n=t.type.toLowerCase().replace("ms",""),r=bt[n],o=wt[t.pointerType]||t.pointerType,s=o==j,a=L(e,t.pointerId,"pointerId");r&Y&&(0===t.button||s)?a<0&&(e.push(t),a=e.length-1):r&(B|V)&&(i=!0),a<0||(e[a]=t,this.callback(this.manager,r,{pointers:e,changedPointers:[t],pointerType:o,srcEvent:t}),i&&e.splice(a,1))}});var Tt={touchstart:Y,touchmove:W,touchend:B,touchcancel:V},Lt="touchstart",St="touchstart touchmove touchend touchcancel";function At(){this.evTarget=Lt,this.evWin=St,this.started=!1,it.apply(this,arguments)}function Ct(t,e){var i=S(t.touches),n=S(t.changedTouches);return e&(B|V)&&(i=A(i.concat(n),"identifier",!0)),[i,n]}_(At,it,{handler:function(t){var e=Tt[t.type];if(e===Y&&(this.started=!0),this.started){var i=Ct.call(this,t,e);e&(B|V)&&i[0].length-i[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:j,srcEvent:t})}}});var Pt={touchstart:Y,touchmove:W,touchend:B,touchcancel:V},Ot="touchstart touchmove touchend touchcancel";function Rt(){this.evTarget=Ot,this.targetIds={},it.apply(this,arguments)}function It(t,e){var i=S(t.touches),n=this.targetIds;if(e&(Y|W)&&1===i.length)return n[i[0].identifier]=!0,[i,i];var r,o,s=S(t.changedTouches),a=[],l=this.target;if(o=i.filter((function(t){return E(t.target,l)})),e===Y)for(r=0;r<o.length;)n[o[r].identifier]=!0,r++;for(r=0;r<s.length;)n[s[r].identifier]&&a.push(s[r]),e&(B|V)&&delete n[s[r].identifier],r++;return a.length?[A(o.concat(a),"identifier",!0),a]:void 0}function kt(){it.apply(this,arguments);var t=g(this.handler,this);this.touch=new Rt(this.manager,t),this.mouse=new yt(this.manager,t)}_(Rt,it,{handler:function(t){var e=Pt[t.type],i=It.call(this,t,e);i&&this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:j,srcEvent:t})}}),_(kt,it,{handler:function(t,e,i){var n=i.pointerType==j,r=i.pointerType==H;if(n)this.mouse.allow=!1;else if(r&&!this.mouse.allow)return;e&(B|V)&&(this.mouse.allow=!0),this.callback(t,e,i)},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Dt=C(a.style,"touchAction"),zt=Dt!==o,jt="compute",Nt="auto",Ht="manipulation",Ft="none",qt="pan-x",Yt="pan-y";function Wt(t,e){this.manager=t,this.set(e)}function Bt(t){if(M(t,Ft))return Ft;var e=M(t,qt),i=M(t,Yt);return e&&i?qt+" "+Yt:e||i?e?qt:Yt:M(t,Ht)?Ht:Nt}Wt.prototype={set:function(t){t==jt&&(t=this.compute()),zt&&(this.manager.element.style[Dt]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return f(this.manager.recognizers,(function(e){y(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))})),Bt(t.join(" "))},preventDefaults:function(t){if(!zt){var e=t.srcEvent,i=t.offsetDirection;if(!this.manager.session.prevented){var n=this.actions,r=M(n,Ft),o=M(n,Yt),s=M(n,qt);return r||o&&i&Z||s&&i&Q?this.preventSrc(e):void 0}e.preventDefault()}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var Vt=1,Xt=2,$t=4,Gt=8,Ut=Gt,Kt=16,Zt=32;function Qt(t){this.id=O(),this.manager=null,this.options=v(t||{},this.defaults),this.options.enable=b(this.options.enable,!0),this.state=Vt,this.simultaneous={},this.requireFail=[]}function Jt(t){return t&Kt?"cancel":t&Gt?"end":t&$t?"move":t&Xt?"start":""}function te(t){return t==K?"down":t==U?"up":t==$?"left":t==G?"right":""}function ee(t,e){var i=e.manager;return i?i.get(t):t}function ie(){Qt.apply(this,arguments)}function ne(){ie.apply(this,arguments),this.pX=null,this.pY=null}function re(){ie.apply(this,arguments)}function oe(){Qt.apply(this,arguments),this._timer=null,this._input=null}function se(){ie.apply(this,arguments)}function ae(){ie.apply(this,arguments)}function le(){Qt.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function ce(t,e){return(e=e||{}).recognizers=b(e.recognizers,ce.defaults.preset),new pe(t,e)}Qt.prototype={defaults:{},set:function(t){return m(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(d(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=ee(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return d(t,"dropRecognizeWith",this)||(t=ee(t,this),delete this.simultaneous[t.id]),this},requireFailure:function(t){if(d(t,"requireFailure",this))return this;var e=this.requireFail;return-1===L(e,t=ee(t,this))&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(d(t,"dropRequireFailure",this))return this;t=ee(t,this);var e=L(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){var e=this,i=this.state;function n(n){e.manager.emit(e.options.event+(n?Jt(i):""),t)}i<Gt&&n(!0),n(),i>=Gt&&n(!0)},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=Zt},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(Zt|Vt)))return!1;t++}return!0},recognize:function(t){var e=m({},t);if(!y(this.options.enable,[this,e]))return this.reset(),void(this.state=Zt);this.state&(Ut|Kt|Zt)&&(this.state=Vt),this.state=this.process(e),this.state&(Xt|$t|Gt|Kt)&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},_(ie,Qt,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,i=t.eventType,n=e&(Xt|$t),r=this.attrTest(t);return n&&(i&V||!r)?e|Kt:n||r?i&B?e|Gt:e&Xt?e|$t:Xt:Zt}}),_(ne,ie,{defaults:{event:"pan",threshold:10,pointers:1,direction:J},getTouchAction:function(){var t=this.options.direction,e=[];return t&Z&&e.push(Yt),t&Q&&e.push(qt),e},directionTest:function(t){var e=this.options,i=!0,n=t.distance,r=t.direction,o=t.deltaX,s=t.deltaY;return r&e.direction||(e.direction&Z?(r=0===o?X:o<0?$:G,i=o!=this.pX,n=Math.abs(t.deltaX)):(r=0===s?X:s<0?U:K,i=s!=this.pY,n=Math.abs(t.deltaY))),t.direction=r,i&&n>e.threshold&&r&e.direction},attrTest:function(t){return ie.prototype.attrTest.call(this,t)&&(this.state&Xt||!(this.state&Xt)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=te(t.direction);e&&this.manager.emit(this.options.event+e,t),this._super.emit.call(this,t)}}),_(re,ie,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Ft]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&Xt)},emit:function(t){if(this._super.emit.call(this,t),1!==t.scale){var e=t.scale<1?"in":"out";this.manager.emit(this.options.event+e,t)}}}),_(oe,Qt,{defaults:{event:"press",pointers:1,time:500,threshold:5},getTouchAction:function(){return[Nt]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,r=t.deltaTime>e.time;if(this._input=t,!n||!i||t.eventType&(B|V)&&!r)this.reset();else if(t.eventType&Y)this.reset(),this._timer=p((function(){this.state=Ut,this.tryEmit()}),e.time,this);else if(t.eventType&B)return Ut;return Zt},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===Ut&&(t&&t.eventType&B?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=u(),this.manager.emit(this.options.event,this._input)))}}),_(se,ie,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Ft]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&Xt)}}),_(ae,ie,{defaults:{event:"swipe",threshold:10,velocity:.65,direction:Z|Q,pointers:1},getTouchAction:function(){return ne.prototype.getTouchAction.call(this)},attrTest:function(t){var e,i=this.options.direction;return i&(Z|Q)?e=t.velocity:i&Z?e=t.velocityX:i&Q&&(e=t.velocityY),this._super.attrTest.call(this,t)&&i&t.direction&&t.distance>this.options.threshold&&h(e)>this.options.velocity&&t.eventType&B},emit:function(t){var e=te(t.direction);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),_(le,Qt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:2,posThreshold:10},getTouchAction:function(){return[Ht]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,r=t.deltaTime<e.time;if(this.reset(),t.eventType&Y&&0===this.count)return this.failTimeout();if(n&&r&&i){if(t.eventType!=B)return this.failTimeout();var o=!this.pTime||t.timeStamp-this.pTime<e.interval,s=!this.pCenter||pt(this.pCenter,t.center)<e.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,s&&o?this.count+=1:this.count=1,this._input=t,0==this.count%e.taps)return this.hasRequireFailures()?(this._timer=p((function(){this.state=Ut,this.tryEmit()}),e.interval,this),Xt):Ut}return Zt},failTimeout:function(){return this._timer=p((function(){this.state=Zt}),this.options.interval,this),Zt},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Ut&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),ce.VERSION="2.0.4",ce.defaults={domEvents:!1,touchAction:jt,enable:!0,inputTarget:null,inputClass:null,preset:[[se,{enable:!1}],[re,{enable:!1},["rotate"]],[ae,{direction:Z}],[ne,{direction:Z},["swipe"]],[le],[le,{event:"doubletap",taps:2},["tap"]],[oe]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var he=1,ue=2;function pe(t,e){e=e||{},this.options=v(e,ce.defaults),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.element=t,this.input=nt(this),this.touchAction=new Wt(this,this.options.touchAction),de(this,!0),f(e.recognizers,(function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])}),this)}function de(t,e){var i=t.element;f(t.options.cssProps,(function(t,n){i.style[C(i.style,n)]=e?t:""}))}function fe(t,e){var n=i.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=e,e.target.dispatchEvent(n)}pe.prototype={set:function(t){return m(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?ue:he},recognize:function(t){var e=this.session;if(!e.stopped){var i;this.touchAction.preventDefaults(t);var n=this.recognizers,r=e.curRecognizer;(!r||r&&r.state&Ut)&&(r=e.curRecognizer=null);for(var o=0;o<n.length;)i=n[o],e.stopped===ue||r&&i!=r&&!i.canRecognizeWith(r)?i.reset():i.recognize(t),!r&&i.state&(Xt|$t|Gt)&&(r=e.curRecognizer=i),o++}},get:function(t){if(t instanceof Qt)return t;for(var e=this.recognizers,i=0;i<e.length;i++)if(e[i].options.event==t)return e[i];return null},add:function(t){if(d(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(d(t,"remove",this))return this;var e=this.recognizers;return t=this.get(t),e.splice(L(e,t),1),this.touchAction.update(),this},on:function(t,e){var i=this.handlers;return f(T(t),(function(t){i[t]=i[t]||[],i[t].push(e)})),this},off:function(t,e){var i=this.handlers;return f(T(t),(function(t){e?i[t].splice(L(i[t],e),1):delete i[t]})),this},emit:function(t,e){this.options.domEvents&&fe(t,e);var i=this.handlers[t]&&this.handlers[t].slice();if(i&&i.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var n=0;n<i.length;)i[n](e),n++}},destroy:function(){this.element&&de(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},m(ce,{INPUT_START:Y,INPUT_MOVE:W,INPUT_END:B,INPUT_CANCEL:V,STATE_POSSIBLE:Vt,STATE_BEGAN:Xt,STATE_CHANGED:$t,STATE_ENDED:Gt,STATE_RECOGNIZED:Ut,STATE_CANCELLED:Kt,STATE_FAILED:Zt,DIRECTION_NONE:X,DIRECTION_LEFT:$,DIRECTION_RIGHT:G,DIRECTION_UP:U,DIRECTION_DOWN:K,DIRECTION_HORIZONTAL:Z,DIRECTION_VERTICAL:Q,DIRECTION_ALL:J,Manager:pe,Input:it,TouchAction:Wt,TouchInput:Rt,MouseInput:yt,PointerEventInput:Mt,TouchMouseInput:kt,SingleTouchInput:At,Recognizer:Qt,AttrRecognizer:ie,Tap:le,Pan:ne,Swipe:ae,Pinch:re,Rotate:se,Press:oe,on:w,off:x,each:f,merge:v,extend:m,inherit:_,bindFn:g,prefixed:C}),typeof n==l&&n.amd?n((function(){return ce})):void 0!==e&&e.exports?e.exports=ce:t[r]=ce}(window,document,"Hammer")},{}],14:[function(t,e,i){"use strict";function n(){}function r(t){for(var e in n.prototype)n.prototype.hasOwnProperty(e)&&(t.prototype[e]=n.prototype[e])}n.prototype.addEventListener=function(t,e){var i=this.__events=this.__events||{},n=i[t]=i[t]||[];n.indexOf(e)<0&&n.push(e)},n.prototype.removeEventListener=function(t,e){var i=(this.__events=this.__events||{})[t];if(i){var n=i.indexOf(e);n>=0&&i.splice(n,1)}},n.prototype.emit=function(t,e){var i=(this.__events=this.__events||{})[t],n=Array.prototype.slice.call(arguments,1);if(i)for(var r=0;r<i.length;r++)i[r].apply(this,n)},e.exports=r},{}],15:[function(t,e,i){"use strict";var n=t("minimal-event-emitter"),r=t("./util/positionAbsolutely"),o=t("./util/dom").setTransform,s=t("./util/clearOwnProperties");function a(t,e,i,n,r){(r=r||{}).perspective=r.perspective||{},r.perspective.extraTransforms=null!=r.perspective.extraTransforms?r.perspective.extraTransforms:"",this._domElement=t,this._parentDomElement=e,this._view=i,this._coords={},this._perspective={},this.setPosition(n),this._parentDomElement.appendChild(this._domElement),this.setPerspective(r.perspective),this._visible=!0,this._position={x:0,y:0}}n(a),a.prototype.destroy=function(){this._parentDomElement.removeChild(this._domElement),s(this)},a.prototype.domElement=function(){return this._domElement},a.prototype.position=function(){return this._coords},a.prototype.setPosition=function(t){for(var e in t)this._coords[e]=t[e];this._update()},a.prototype.perspective=function(){return this._perspective},a.prototype.setPerspective=function(t){for(var e in t)this._perspective[e]=t[e];this._update()},a.prototype.show=function(){this._visible||(this._visible=!0,this._update())},a.prototype.hide=function(){this._visible&&(this._visible=!1,this._update())},a.prototype._update=function(){var t,e,i=this._domElement,n=this._coords,r=this._position,o=!1;if(this._visible){var s=this._view;this._perspective.radius?(o=!0,this._setEmbeddedPosition(s,n)):(s.coordinatesToScreen(n,r),t=r.x,e=r.y,null!=t&&null!=e&&(o=!0,this._setPosition(t,e)))}o?(i.style.display="block",i.style.position="absolute"):(i.style.display="none",i.style.position="")},a.prototype._setEmbeddedPosition=function(t,e){var i=t.coordinatesToPerspectiveTransform(e,this._perspective.radius,this._perspective.extraTransforms);o(this._domElement,i)},a.prototype._setPosition=function(t,e){r(this._domElement,t,e,this._perspective.extraTransforms)},e.exports=a},{"./util/clearOwnProperties":76,"./util/dom":85,"./util/positionAbsolutely":96,"minimal-event-emitter":14}],16:[function(t,e,i){"use strict";var n=t("minimal-event-emitter"),r=t("./Hotspot"),o=t("./util/calcRect"),s=t("./util/positionAbsolutely"),a=t("./util/dom").setAbsolute,l=t("./util/dom").setOverflowHidden,c=t("./util/dom").setOverflowVisible,h=t("./util/dom").setNullSize,u=t("./util/dom").setPixelSize,p=t("./util/dom").setWithVendorPrefix("pointer-events"),d=t("./util/clearOwnProperties");function f(t,e,i,n,r){r=r||{},this._parentDomElement=t,this._stage=e,this._view=i,this._renderLoop=n,this._hotspots=[],this._visible=!0,this._rect=r.rect,this._visibilityOrRectChanged=!0,this._stageWidth=null,this._stageHeight=null,this._tmpRect={},this._hotspotContainerWrapper=document.createElement("div"),a(this._hotspotContainerWrapper),p(this._hotspotContainerWrapper,"none"),this._parentDomElement.appendChild(this._hotspotContainerWrapper),this._hotspotContainer=document.createElement("div"),a(this._hotspotContainer),p(this._hotspotContainer,"all"),this._hotspotContainerWrapper.appendChild(this._hotspotContainer),this._updateHandler=this._update.bind(this),this._renderLoop.addEventListener("afterRender",this._updateHandler)}n(f),f.prototype.destroy=function(){for(;this._hotspots.length;)this.destroyHotspot(this._hotspots[0]);this._parentDomElement.removeChild(this._hotspotContainerWrapper),this._renderLoop.removeEventListener("afterRender",this._updateHandler),d(this)},f.prototype.domElement=function(){return this._hotspotContainer},f.prototype.setRect=function(t){this._rect=t,this._visibilityOrRectChanged=!0},f.prototype.rect=function(){return this._rect},f.prototype.createHotspot=function(t,e,i){e=e||{};var n=new r(t,this._hotspotContainer,this._view,e,i);return this._hotspots.push(n),n._update(),this.emit("hotspotsChange"),n},f.prototype.hasHotspot=function(t){return this._hotspots.indexOf(t)>=0},f.prototype.listHotspots=function(){return[].concat(this._hotspots)},f.prototype.destroyHotspot=function(t){var e=this._hotspots.indexOf(t);if(e<0)throw new Error("No such hotspot");this._hotspots.splice(e,1),t.destroy(),this.emit("hotspotsChange")},f.prototype.hide=function(){this._visible&&(this._visible=!1,this._visibilityOrRectChanged=!0,this._update())},f.prototype.show=function(){this._visible||(this._visible=!0,this._visibilityOrRectChanged=!0,this._update())},f.prototype._update=function(){var t=this._hotspotContainerWrapper,e=this._stage.width(),i=this._stage.height(),n=this._tmpRect;if(this._visibilityOrRectChanged||this._rect&&(e!==this._stageWidth||i!==this._stageHeight)){var r=this._visible;t.style.display=r?"block":"none",r&&(this._rect?(o(e,i,this._rect,n),s(t,e*n.x,i*n.y),u(t,e*n.width,i*n.height),l(t)):(s(t,0,0),h(t),c(t))),this._stageWidth=e,this._stageHeight=i,this._visibilityOrRectChanged=!1}for(var a=0;a<this._hotspots.length;a++)this._hotspots[a]._update()},e.exports=f},{"./Hotspot":15,"./util/calcRect":72,"./util/clearOwnProperties":76,"./util/dom":85,"./util/positionAbsolutely":96,"minimal-event-emitter":14}],17:[function(t,e,i){"use strict";var n=t("minimal-event-emitter"),r=t("./util/extend"),o=t("./util/clearOwnProperties");function s(t,e,i,n,r){r=r||{};var o=this;this._source=t,this._geometry=e,this._view=i,this._textureStore=n,this._effects=r.effects||{},this._fixedLevelIndex=null,this._viewChangeHandler=function(){o.emit("viewChange",o.view())},this._view.addEventListener("change",this._viewChangeHandler),this._textureStoreChangeHandler=function(){o.emit("textureStoreChange",o.textureStore())},this._textureStore.addEventListener("textureLoad",this._textureStoreChangeHandler),this._textureStore.addEventListener("textureError",this._textureStoreChangeHandler),this._textureStore.addEventListener("textureInvalid",this._textureStoreChangeHandler)}n(s),s.prototype.destroy=function(){this._view.removeEventListener("change",this._viewChangeHandler),this._textureStore.removeEventListener("textureLoad",this._textureStoreChangeHandler),this._textureStore.removeEventListener("textureError",this._textureStoreChangeHandler),this._textureStore.removeEventListener("textureInvalid",this._textureStoreChangeHandler),o(this)},s.prototype.source=function(){return this._source},s.prototype.geometry=function(){return this._geometry},s.prototype.view=function(){return this._view},s.prototype.textureStore=function(){return this._textureStore},s.prototype.effects=function(){return this._effects},s.prototype.setEffects=function(t){this._effects=t,this.emit("effectsChange",this._effects)},s.prototype.mergeEffects=function(t){r(this._effects,t),this.emit("effectsChange",this._effects)},s.prototype.fixedLevel=function(){return this._fixedLevelIndex},s.prototype.setFixedLevel=function(t){if(t!==this._fixedLevelIndex){if(null!=t&&(t>=this._geometry.levelList.length||t<0))throw new Error("Level index out of range: "+t);this._fixedLevelIndex=t,this.emit("fixedLevelChange",this._fixedLevelIndex)}},s.prototype._selectLevel=function(){return null!=this._fixedLevelIndex?this._geometry.levelList[this._fixedLevelIndex]:this._view.selectLevel(this._geometry.selectableLevelList)},s.prototype.visibleTiles=function(t){var e=this._selectLevel();return this._geometry.visibleTiles(this._view,e,t)},s.prototype.pinLevel=function(t){for(var e=this._geometry.levelList[t],i=this._geometry.levelTiles(e),n=0;n<i.length;n++)this._textureStore.pin(i[n])},s.prototype.unpinLevel=function(t){for(var e=this._geometry.levelList[t],i=this._geometry.levelTiles(e),n=0;n<i.length;n++)this._textureStore.unpin(i[n])},s.prototype.pinFirstLevel=function(){return this.pinLevel(0)},s.prototype.unpinFirstLevel=function(){return this.unpinLevel(0)},e.exports=s},{"./util/clearOwnProperties":76,"./util/extend":86,"minimal-event-emitter":14}],18:[function(t,e,i){"use strict";function n(t){this.constructor.super_.apply(this,arguments),this.message=t}t("./util/inherits")(n,Error),e.exports=n},{"./util/inherits":89}],19:[function(t,e,i){"use strict";var n=t("minimal-event-emitter"),r=t("./util/clearOwnProperties");function o(t){var e=this;this._stage=t,this._running=!1,this._rendering=!1,this._requestHandle=null,this._boundLoop=this._loop.bind(this),this._renderInvalidHandler=function(){e._rendering||e.renderOnNextFrame()},this._stage.addEventListener("renderInvalid",this._renderInvalidHandler)}n(o),o.prototype.destroy=function(){this.stop(),this._stage.removeEventListener("renderInvalid",this._renderInvalidHandler),r(this)},o.prototype.stage=function(){return this._stage},o.prototype.start=function(){this._running=!0,this.renderOnNextFrame()},o.prototype.stop=function(){this._requestHandle&&(window.cancelAnimationFrame(this._requestHandle),this._requestHandle=null),this._running=!1},o.prototype.renderOnNextFrame=function(){this._running&&!this._requestHandle&&(this._requestHandle=window.requestAnimationFrame(this._boundLoop))},o.prototype._loop=function(){if(!this._running)throw new Error("Render loop running while in stopped state");this._requestHandle=null,this._rendering=!0,this.emit("beforeRender"),this._rendering=!1,this._stage.render(),this.emit("afterRender")},e.exports=o},{"./util/clearOwnProperties":76,"minimal-event-emitter":14}],20:[function(t,e,i){"use strict";var n=t("./Layer"),r=t("./TextureStore"),o=t("./HotspotContainer"),s=t("minimal-event-emitter"),a=t("./util/now"),l=t("./util/noop"),c=t("./util/type"),h=t("./util/defaults"),u=t("./util/clearOwnProperties");function p(t,e){this._viewer=t,this._view=e,this._layers=[],this._hotspotContainer=new o(t._controlContainer,t.stage(),this._view,t.renderLoop()),this._movement=null,this._movementStartTime=null,this._movementStep=null,this._movementParams=null,this._movementCallback=null,this._updateMovementHandler=this._updateMovement.bind(this),this._updateHotspotContainerHandler=this._updateHotspotContainer.bind(this),this._viewer.addEventListener("sceneChange",this._updateHotspotContainerHandler),this._viewChangeHandler=this.emit.bind(this,"viewChange"),this._view.addEventListener("change",this._viewChangeHandler),this._updateHotspotContainer()}s(p),p.prototype.destroy=function(){this._view.removeEventListener("change",this._viewChangeHandler),this._viewer.removeEventListener("sceneChange",this._updateHotspotContainerHandler),this._movement&&this.stopMovement(),this._hotspotContainer.destroy(),this.destroyAllLayers(),u(this)},p.prototype.hotspotContainer=function(){return this._hotspotContainer},p.prototype.layer=function(){return this._layers[0]},p.prototype.listLayers=function(){return[].concat(this._layers)},p.prototype.view=function(){return this._view},p.prototype.viewer=function(){return this._viewer},p.prototype.visible=function(){return this._viewer.scene()===this},p.prototype.createLayer=function(t){var e=(t=t||{}).textureStoreOpts||{},i=t.layerOpts||{},o=t.source,s=t.geometry,a=this._view,l=this._viewer.stage(),c=new r(o,l,e),h=new n(o,s,a,c,i);return this._layers.push(h),t.pinFirstLevel&&h.pinFirstLevel(),this.emit("layerChange"),h},p.prototype.destroyLayer=function(t){var e=this._layers.indexOf(t);if(e<0)throw new Error("No such layer in scene");this._layers.splice(e,1),this.emit("layerChange"),t.textureStore().destroy(),t.destroy()},p.prototype.destroyAllLayers=function(){for(;this._layers.length>0;)this.destroyLayer(this._layers[0])},p.prototype.switchTo=function(t,e){return this._viewer.switchScene(this,t,e)},p.prototype.lookTo=function(t,e,i){var n=this;if(e=e||{},i=i||l,"object"!==c(t))throw new Error("Target view parameters must be an object");var r=function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)},o=null!=e.ease?e.ease:r,s=null!=e.controlsInterrupt&&e.controlsInterrupt,a=null!=e.transitionDuration?e.transitionDuration:1e3,u=null==e.shortest||e.shortest,p=this._view,d=p.parameters(),f={};h(f,t),h(f,d),u&&p.normalizeToClosest&&p.normalizeToClosest(f,f);var m=function(){var t=!1;return function(e,i){if(i>=a&&t)return null;var n=Math.min(i/a,1);for(var r in e){var s=d[r],l=f[r];e[r]=s+o(n)*(l-s)}return t=i>=a,e}},v=this._viewer.controls().enabled();s||this._viewer.controls().disable(),this.startMovement(m,(function(){v&&n._viewer.controls().enable(),i()}))},p.prototype.startMovement=function(t,e){var i=this._viewer.renderLoop();this._movement&&this.stopMovement();var n=t();if("function"!=typeof n)throw new Error("Bad movement");this._movement=t,this._movementStep=n,this._movementStartTime=a(),this._movementParams={},this._movementCallback=e,i.addEventListener("beforeRender",this._updateMovementHandler),i.renderOnNextFrame()},p.prototype.stopMovement=function(){var t=this._movementCallback,e=this._viewer.renderLoop();this._movement&&(this._movement=null,this._movementStep=null,this._movementStartTime=null,this._movementParams=null,this._movementCallback=null,e.removeEventListener("beforeRender",this._updateMovementHandler),t&&t())},p.prototype.movement=function(){return this._movement},p.prototype._updateMovement=function(){if(!this._movement)throw new Error("Should not call update");var t=this._viewer.renderLoop(),e=this._view,i=a()-this._movementStartTime,n=this._movementStep,r=this._movementParams;null==(r=n(r=e.parameters(r),i))?this.stopMovement():(e.setParameters(r),t.renderOnNextFrame())},p.prototype._updateHotspotContainer=function(){this.visible()?this._hotspotContainer.show():this._hotspotContainer.hide()},e.exports=p},{"./HotspotContainer":16,"./Layer":17,"./TextureStore":21,"./util/clearOwnProperties":76,"./util/defaults":81,"./util/noop":92,"./util/now":93,"./util/type":101,"minimal-event-emitter":14}],21:[function(t,e,i){"use strict";var n=t("./collections/Map"),r=t("./collections/Set"),o=t("./collections/LruSet"),s=t("minimal-event-emitter"),a=t("./util/defaults"),l=t("./util/retry"),c=t("./util/chain"),h=t("./util/inherits"),u=t("./util/clearOwnProperties"),p="undefined"!=typeof MARZIPANODEBUG&&MARZIPANODEBUG.textureStore,d={IDLE:0,START:1,MARK:2,END:3},f={previouslyVisibleCacheSize:512},m=0;function v(){}function _(t,e){var i=this,n=m++;i._id=n,i._store=t,i._tile=e,i._asset=null,i._texture=null,i._changeHandler=function(){t.emit("textureInvalid",e)};var r=t.source(),o=t.stage(),s=r.loadAsset.bind(r),a=o.createTexture.bind(o),h=c(l(s),a);t.emit("textureStartLoad",e),p&&console.log("loading",n,e),i._cancel=h(o,e,(function(r,o,s,a){if(i._cancel=null,r)return s&&s.destroy(),a&&a.destroy(),void(r instanceof v?(t.emit("textureCancel",e),p&&console.log("cancel",n,e)):(t.emit("textureError",e,r),p&&console.log("error",n,e)));i._texture=a,s.isDynamic()?(i._asset=s,s.addEventListener("change",i._changeHandler)):s.destroy(),t.emit("textureLoad",e),p&&console.log("load",n,e)}))}function g(t,e,i){i=a(i||{},f),this._source=t,this._stage=e,this._state=d.IDLE,this._delimCount=0,this._itemMap=new n,this._visible=new r,this._previouslyVisible=new o(i.previouslyVisibleCacheSize),this._pinMap=new n,this._newVisible=new r,this._noLongerVisible=[],this._visibleAgain=[],this._evicted=[]}h(v,Error),_.prototype.asset=function(){return this._asset},_.prototype.texture=function(){return this._texture},_.prototype.destroy=function(){var t=this._id,e=this._store,i=this._tile,n=this._asset,r=this._texture,o=this._cancel;o?o(new v("Texture load cancelled")):(n&&(n.removeEventListener("change",this._changeHandler),n.destroy()),r&&r.destroy(),e.emit("textureUnload",i),p&&console.log("unload",t,i),u(this))},s(_),s(g),g.prototype.destroy=function(){this.clear(),u(this)},g.prototype.stage=function(){return this._stage},g.prototype.source=function(){return this._source},g.prototype.clear=function(){var t=this;t._evicted.length=0,t._itemMap.forEach((function(e){t._evicted.push(e)})),t._evicted.forEach((function(e){t._unloadTile(e)})),t._itemMap.clear(),t._visible.clear(),t._previouslyVisible.clear(),t._pinMap.clear(),t._newVisible.clear(),t._noLongerVisible.length=0,t._visibleAgain.length=0,t._evicted.length=0},g.prototype.clearNotPinned=function(){var t=this;t._evicted.length=0,t._itemMap.forEach((function(e){t._pinMap.has(e)||t._evicted.push(e)})),t._evicted.forEach((function(e){t._unloadTile(e)})),t._visible.clear(),t._previouslyVisible.clear(),t._evicted.length=0},g.prototype.startFrame=function(){if(this._state!==d.IDLE&&this._state!==d.START)throw new Error("TextureStore: startFrame called out of sequence");this._state=d.START,this._delimCount++},g.prototype.markTile=function(t){if(this._state!==d.START&&this._state!==d.MARK)throw new Error("TextureStore: markTile called out of sequence");this._state=d.MARK;var e=this._itemMap.get(t),i=e&&e.texture(),n=e&&e.asset();i&&n&&i.refresh(t,n),this._newVisible.add(t)},g.prototype.endFrame=function(){if(this._state!==d.START&&this._state!==d.MARK&&this._state!==d.END)throw new Error("TextureStore: endFrame called out of sequence");this._state=d.END,this._delimCount--,this._delimCount||(this._update(),this._state=d.IDLE)},g.prototype._update=function(){var t=this;t._noLongerVisible.length=0,t._visible.forEach((function(e){t._newVisible.has(e)||t._noLongerVisible.push(e)})),t._visibleAgain.length=0,t._newVisible.forEach((function(e){t._previouslyVisible.has(e)&&t._visibleAgain.push(e)})),t._visibleAgain.forEach((function(e){t._previouslyVisible.remove(e)})),t._evicted.length=0,t._noLongerVisible.forEach((function(e){var i=t._itemMap.get(e);if(i&&i.texture()){var n=t._previouslyVisible.add(e);null!=n&&t._evicted.push(n)}else i&&t._unloadTile(e)})),t._evicted.forEach((function(e){t._pinMap.has(e)||t._unloadTile(e)})),t._newVisible.forEach((function(e){t._itemMap.get(e)||t._loadTile(e)}));var e=t._visible;t._visible=t._newVisible,t._newVisible=e,t._newVisible.clear(),t._noLongerVisible.length=0,t._visibleAgain.length=0,t._evicted.length=0},g.prototype._loadTile=function(t){if(this._itemMap.has(t))throw new Error("TextureStore: loading texture already in cache");var e=new _(this,t);this._itemMap.set(t,e)},g.prototype._unloadTile=function(t){var e=this._itemMap.del(t);if(!e)throw new Error("TextureStore: unloading texture not in cache");e.destroy()},g.prototype.asset=function(t){var e=this._itemMap.get(t);return e?e.asset():null},g.prototype.texture=function(t){var e=this._itemMap.get(t);return e?e.texture():null},g.prototype.pin=function(t){var e=(this._pinMap.get(t)||0)+1;return this._pinMap.set(t,e),this._itemMap.has(t)||this._loadTile(t),e},g.prototype.unpin=function(t){var e=this._pinMap.get(t);if(!e)throw new Error("TextureStore: unpin when not pinned");return--e>0?this._pinMap.set(t,e):(this._pinMap.del(t),this._visible.has(t)||this._previouslyVisible.has(t)||this._unloadTile(t)),e},g.prototype.query=function(t){var e=this._itemMap.get(t),i=this._pinMap.get(t)||0;return{visible:this._visible.has(t),previouslyVisible:this._previouslyVisible.has(t),hasAsset:null!=e&&null!=e.asset(),hasTexture:null!=e&&null!=e.texture(),pinned:0!==i,pinCount:i}},e.exports=g},{"./collections/LruSet":29,"./collections/Map":30,"./collections/Set":31,"./util/chain":74,"./util/clearOwnProperties":76,"./util/defaults":81,"./util/inherits":89,"./util/retry":99,"minimal-event-emitter":14}],22:[function(t,e,i){"use strict";var n=t("./collections/Set");function r(){this._stack=[],this._visited=new n,this._vertices=null}r.prototype.search=function(t,e,i){var n=this._stack,r=this._visited,o=this._vertices,s=0;for(this._clear(),n.push(e);n.length>0;){var a=n.pop();if(!r.has(a)&&t.intersects(a.vertices(o))){r.add(a);for(var l=a.neighbors(),c=0;c<l.length;c++)n.push(l[c]);i.push(a),s++}}return this._vertices=o,this._clear(),s},r.prototype._clear=function(){this._stack.length=0,this._visited.clear()},e.exports=r},{"./collections/Set":31}],23:[function(t,e,i){"use strict";var n=t("minimal-event-emitter"),r=t("./util/defaults"),o=t("./util/now"),s={duration:1/0};function a(t){t=r(t||{},s),this._duration=t.duration,this._startTime=null,this._handle=null,this._check=this._check.bind(this)}n(a),a.prototype.start=function(){this._startTime=o(),null==this._handle&&this._duration<1/0&&this._setup(this._duration)},a.prototype.started=function(){return null!=this._startTime},a.prototype.stop=function(){this._startTime=null,null!=this._handle&&(clearTimeout(this._handle),this._handle=null)},a.prototype._setup=function(t){this._handle=setTimeout(this._check,t)},a.prototype._teardown=function(){clearTimeout(this._handle),this._handle=null},a.prototype._check=function(){var t=o()-this._startTime,e=this._duration-t;this._teardown(),e<=0?(this.emit("timeout"),this._startTime=null):e<1/0&&this._setup(e)},a.prototype.duration=function(){return this._duration},a.prototype.setDuration=function(t){this._duration=t,null!=this._startTime&&this._check()},e.exports=a},{"./util/defaults":81,"./util/now":93,"minimal-event-emitter":14}],24:[function(t,e,i){"use strict";var n=t("minimal-event-emitter"),r=t("./RenderLoop"),o=t("./controls/Controls"),s=t("./Scene"),a=t("./Timer"),l=t("./stages/WebGl"),c=t("./controls/ControlCursor"),h=t("./controls/HammerGestures"),u=t("./controls/registerDefaultControls"),p=t("./renderers/registerDefaultRenderers"),d=t("./util/dom").setOverflowHidden,f=t("./util/dom").setAbsolute,m=t("./util/dom").setFullSize,v=t("./util/tween"),_=t("./util/noop"),g=t("./util/clearOwnProperties");function y(t,e){e=e||{},this._domElement=t,d(t),this._stage=new l(e.stage),p(this._stage),this._domElement.appendChild(this._stage.domElement()),this._controlContainer=document.createElement("div"),f(this._controlContainer),m(this._controlContainer),t.appendChild(this._controlContainer),this._size={},this.updateSize(),this._updateSizeListener=this.updateSize.bind(this),window.addEventListener("resize",this._updateSizeListener),this._renderLoop=new r(this._stage),this._controls=new o,this._controlMethods=u(this._controls,this._controlContainer,e.controls),this._controls.attach(this._renderLoop),this._hammerManagerTouch=h.get(this._controlContainer,"touch"),this._hammerManagerMouse=h.get(this._controlContainer,"mouse"),this._dragCursor=new c(this._controls,"mouseViewDrag",t,e.cursors&&e.cursors.drag||{}),this._renderLoop.start(),this._scenes=[],this._currentScene=null,this._replacedScene=null,this._cancelCurrentTween=null,this._layerChangeHandler=this._updateSceneLayers.bind(this),this._viewChangeHandler=this.emit.bind(this,"viewChange"),this._idleTimer=new a,this._idleTimer.start(),this._resetIdleTimerHandler=this._resetIdleTimer.bind(this),this.addEventListener("viewChange",this._resetIdleTimerHandler),this._triggerIdleTimerHandler=this._triggerIdleTimer.bind(this),this._idleTimer.addEventListener("timeout",this._triggerIdleTimerHandler),this._stopMovementHandler=this.stopMovement.bind(this),this._controls.addEventListener("active",this._stopMovementHandler),this.addEventListener("sceneChange",this._stopMovementHandler),this._idleMovement=null}n(y),y.prototype.destroy=function(){for(var t in window.removeEventListener("resize",this._updateSizeListener),this._currentScene&&this._removeSceneEventListeners(this._currentScene),this._replacedScene&&this._removeSceneEventListeners(this._replacedScene),this._dragCursor.destroy(),this._controlMethods)this._controlMethods[t].destroy();for(;this._scenes.length;)this.destroyScene(this._scenes[0]);this._domElement.removeChild(this._stage.domElement()),this._stage.destroy(),this._renderLoop.destroy(),this._controls.destroy(),this._controls=null,this._cancelCurrentTween&&this._cancelCurrentTween(),g(this)},y.prototype.updateSize=function(){var t=this._size;t.width=this._domElement.clientWidth,t.height=this._domElement.clientHeight,this._stage.setSize(t)},y.prototype.stage=function(){return this._stage},y.prototype.renderLoop=function(){return this._renderLoop},y.prototype.controls=function(){return this._controls},y.prototype.domElement=function(){return this._domElement},y.prototype.createScene=function(t){t=t||{};var e=this.createEmptyScene({view:t.view});return e.createLayer({source:t.source,geometry:t.geometry,pinFirstLevel:t.pinFirstLevel,textureStoreOpts:t.textureStoreOpts,layerOpts:t.layerOpts}),e},y.prototype.createEmptyScene=function(t){var e=new s(this,(t=t||{}).view);return this._scenes.push(e),e},y.prototype._updateSceneLayers=function(){var t,e,i=this._stage,n=this._currentScene,r=this._replacedScene,o=i.listLayers(),s=[];if(r&&(s=s.concat(r.listLayers())),n&&(s=s.concat(n.listLayers())),1!==Math.abs(o.length-s.length))throw new Error("Stage and scene out of sync");if(s.length<o.length)for(t=0;t<o.length;t++)if(e=o[t],s.indexOf(e)<0){this._removeLayerFromStage(e);break}if(s.length>o.length)for(t=0;t<s.length;t++)e=s[t],o.indexOf(e)<0&&this._addLayerToStage(e,t)},y.prototype._addLayerToStage=function(t,e){t.pinFirstLevel(),this._stage.addLayer(t,e)},y.prototype._removeLayerFromStage=function(t){this._stage.removeLayer(t),t.unpinFirstLevel(),t.textureStore().clearNotPinned()},y.prototype._addSceneEventListeners=function(t){t.addEventListener("layerChange",this._layerChangeHandler),t.addEventListener("viewChange",this._viewChangeHandler)},y.prototype._removeSceneEventListeners=function(t){t.removeEventListener("layerChange",this._layerChangeHandler),t.removeEventListener("viewChange",this._viewChangeHandler)},y.prototype.destroyScene=function(t){var e,i,n=this._scenes.indexOf(t);if(n<0)throw new Error("No such scene in viewer");if(this._currentScene===t){for(this._removeSceneEventListeners(t),i=t.listLayers(),e=0;e<i.length;e++)this._removeLayerFromStage(i[e]);this._cancelCurrentTween&&(this._cancelCurrentTween(),this._cancelCurrentTween=null),this._currentScene=null,this.emit("sceneChange")}if(this._replacedScene===t){for(this._removeSceneEventListeners(t),i=t.listLayers(),e=0;e<i.length;e++)this._removeLayerFromStage(i[e]);this._replacedScene=null}this._scenes.splice(n,1),t.destroy()},y.prototype.destroyAllScenes=function(){for(;this._scenes.length>0;)this.destroyScene(this._scenes[0])},y.prototype.hasScene=function(t){return this._scenes.indexOf(t)>=0},y.prototype.listScenes=function(){return[].concat(this._scenes)},y.prototype.scene=function(){return this._currentScene},y.prototype.view=function(){var t=this._currentScene;return t?t.view():null},y.prototype.lookTo=function(t,e,i){var n=this._currentScene;n&&n.lookTo(t,e,i)},y.prototype.startMovement=function(t,e){var i=this._currentScene;i&&i.startMovement(t,e)},y.prototype.stopMovement=function(){var t=this._currentScene;t&&t.stopMovement()},y.prototype.movement=function(){var t=this._currentScene;if(t)return t.movement()},y.prototype.setIdleMovement=function(t,e){this._idleTimer.setDuration(t),this._idleMovement=e},y.prototype.breakIdleMovement=function(){this.stopMovement(),this._resetIdleTimer()},y.prototype._resetIdleTimer=function(){this._idleTimer.start()},y.prototype._triggerIdleTimer=function(){var t=this._idleMovement;t&&this.startMovement(t)};var b=1e3;function w(t,e,i){e.listLayers().forEach((function(e){e.mergeEffects({opacity:t})})),e._hotspotContainer.domElement().style.opacity=t}y.prototype.switchScene=function(t,e,i){var n=this;e=e||{},i=i||_;var r=this._stage,o=this._currentScene;if(o!==t){if(this._scenes.indexOf(t)<0)throw new Error("No such scene in viewer");this._cancelCurrentTween&&(this._cancelCurrentTween(),this._cancelCurrentTween=null);var s=o?o.listLayers():[],a=t.listLayers(),l=r.listLayers();if(o&&(l.length!==s.length||l.length>1&&l[0]!=s[0]))throw new Error("Stage not in sync with viewer");for(var c=null!=e.transitionDuration?e.transitionDuration:b,h=null!=e.transitionUpdate?e.transitionUpdate:w,u=0;u<a.length;u++)this._addLayerToStage(a[u]);this._cancelCurrentTween=v(c,p,d),this._currentScene=t,this._replacedScene=o,this.emit("sceneChange"),this.emit("viewChange"),this._addSceneEventListeners(t)}else i();function p(e){h(e,t,o)}function d(){if(n._replacedScene){n._removeSceneEventListeners(n._replacedScene),s=n._replacedScene.listLayers();for(var t=0;t<s.length;t++)n._removeLayerFromStage(s[t]);n._replacedScene=null}n._cancelCurrentTween=null,i()}},e.exports=y},{"./RenderLoop":19,"./Scene":20,"./Timer":23,"./controls/ControlCursor":36,"./controls/Controls":37,"./controls/HammerGestures":41,"./controls/registerDefaultControls":47,"./renderers/registerDefaultRenderers":61,"./stages/WebGl":70,"./util/clearOwnProperties":76,"./util/dom":85,"./util/noop":92,"./util/tween":100,"minimal-event-emitter":14}],25:[function(t,e,i){"use strict";var n=t("./Static"),r=t("../util/inherits"),o=t("minimal-event-emitter"),s=t("../util/clearOwnProperties");function a(t){this.constructor.super_.call(this,t),this._timestamp=0}r(a,n),o(a),a.prototype.destroy=function(){s(this)},a.prototype.timestamp=function(){return this._timestamp},a.prototype.isDynamic=function(){return!0},a.prototype.markDirty=function(){this._timestamp++,this.emit("change")},e.exports=a},{"../util/clearOwnProperties":76,"../util/inherits":89,"./Static":26,"minimal-event-emitter":14}],26:[function(t,e,i){"use strict";var n=t("../util/global"),r=t("minimal-event-emitter"),o=t("../util/clearOwnProperties"),s={HTMLImageElement:["naturalWidth","naturalHeight"],HTMLCanvasElement:["width","height"],ImageBitmap:["width","height"]};function a(t){var e=!1;for(var i in s)if(n[i]&&t instanceof n[i]){e=!0,this._widthProp=s[i][0],this._heightProp=s[i][1];break}if(!e)throw new Error("Unsupported pixel source");this._element=t}r(a),a.prototype.destroy=function(){o(this)},a.prototype.element=function(){return this._element},a.prototype.width=function(){return this._element[this._widthProp]},a.prototype.height=function(){return this._element[this._heightProp]},a.prototype.timestamp=function(){return 0},a.prototype.isDynamic=function(){return!1},e.exports=a},{"../util/clearOwnProperties":76,"../util/global":87,"minimal-event-emitter":14}],27:[function(t,e,i){"use strict";var n=t("./util/defaults"),r=.1,o=.01,s={yawSpeed:r,pitchSpeed:r,fovSpeed:r,yawAccel:o,pitchAccel:o,fovAccel:o,targetPitch:0,targetFov:null};function a(t){var e=(t=n(t||{},s)).yawSpeed,i=t.pitchSpeed,r=t.fovSpeed,o=t.yawAccel,a=t.pitchAccel,l=t.fovAccel,c=t.targetPitch,h=t.targetFov;return function(){var t,n,s,u,p=0,d=0,f=0,m=0,v=0,_=0,g=0;return function(y,b){if(t=(b-p)/1e3,v=Math.min(d+t*o,e),n=v*t,y.yaw=y.yaw+n,null!=c&&y.pitch!==c){var w=.5*f*f/a;_=Math.abs(c-y.pitch)>w?Math.min(f+t*a,i):Math.max(f-t*a,0),s=_*t,c<y.pitch&&(y.pitch=Math.max(c,y.pitch-s)),c>y.pitch&&(y.pitch=Math.min(c,y.pitch+s))}if(null!=h&&y.fov!==c){var x=.5*m*m/l;g=Math.abs(h-y.fov)>x?Math.min(m+t*l,r):Math.max(m-t*l,0),u=g*t,h<y.fov&&(y.fov=Math.max(h,y.fov-u)),h>y.fov&&(y.fov=Math.min(h,y.fov+u))}return p=b,d=v,f=_,m=g,y}}}e.exports=a},{"./util/defaults":81}],28:[function(t,e,i){"use strict";var n=t("../util/mod");function r(t){if(!isFinite(t)||Math.floor(t)!==t||t<0)throw new Error("LruMap: invalid capacity");this._capacity=t,this._keys=new Array(this._capacity),this._values=new Array(this._capacity),this._start=0,this._size=0}r.prototype._index=function(t){return n(this._start+t,this._capacity)},r.prototype.get=function(t){for(var e=0;e<this._size;e++){var i=this._keys[this._index(e)];if(t.equals(i))return this._values[this._index(e)]}return null},r.prototype.set=function(t,e){if(0===this._capacity)return t;this.del(t);var i=this._size===this._capacity?this._keys[this._index(0)]:null;return this._keys[this._index(this._size)]=t,this._values[this._index(this._size)]=e,this._size<this._capacity?this._size++:this._start=this._index(1),i},r.prototype.del=function(t){for(var e=0;e<this._size;e++)if(t.equals(this._keys[this._index(e)])){for(var i=this._values[this._index(e)],n=e;n<this._size-1;n++)this._keys[this._index(n)]=this._keys[this._index(n+1)],this._values[this._index(n)]=this._values[this._index(n+1)];return this._size--,i}return null},r.prototype.has=function(t){for(var e=0;e<this._size;e++)if(t.equals(this._keys[this._index(e)]))return!0;return!1},r.prototype.size=function(){return this._size},r.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._start=0,this._size=0},r.prototype.forEach=function(t){for(var e=0,i=0;i<this._size;i++)t(this._keys[this._index(i)],this._values[this._index(i)]),e+=1;return e},e.exports=r},{"../util/mod":91}],29:[function(t,e,i){"use strict";var n=t("../util/mod");function r(t){if(!isFinite(t)||Math.floor(t)!==t||t<0)throw new Error("LruSet: invalid capacity");this._capacity=t,this._elements=new Array(this._capacity),this._start=0,this._size=0}r.prototype._index=function(t){return n(this._start+t,this._capacity)},r.prototype.add=function(t){if(0===this._capacity)return t;this.remove(t);var e=this._size===this._capacity?this._elements[this._index(0)]:null;return this._elements[this._index(this._size)]=t,this._size<this._capacity?this._size++:this._start=this._index(1),e},r.prototype.remove=function(t){for(var e=0;e<this._size;e++){var i=this._elements[this._index(e)];if(t.equals(i)){for(var n=e;n<this._size-1;n++)this._elements[this._index(n)]=this._elements[this._index(n+1)];return this._size--,i}}return null},r.prototype.has=function(t){for(var e=0;e<this._size;e++)if(t.equals(this._elements[this._index(e)]))return!0;return!1},r.prototype.size=function(){return this._size},r.prototype.clear=function(){this._elements.length=0,this._start=0,this._size=0},r.prototype.forEach=function(t){for(var e=0,i=0;i<this._size;i++)t(this._elements[this._index(i)]),e+=1;return e},e.exports=r},{"../util/mod":91}],30:[function(t,e,i){"use strict";var n=t("../util/mod"),r=64;function o(t){if(null!=t&&(!isFinite(t)||Math.floor(t)!==t||t<1))throw new Error("Map: invalid capacity");this._capacity=t||r,this._keyBuckets=[],this._valBuckets=[];for(var e=0;e<this._capacity;e++)this._keyBuckets.push([]),this._valBuckets.push([]);this._size=0}o.prototype.get=function(t){for(var e=n(t.hash(),this._capacity),i=this._keyBuckets[e],r=0;r<i.length;r++){var o=i[r];if(t.equals(o))return this._valBuckets[e][r]}return null},o.prototype.set=function(t,e){for(var i=n(t.hash(),this._capacity),r=this._keyBuckets[i],o=this._valBuckets[i],s=0;s<r.length;s++){var a=r[s];if(t.equals(a)){var l=o[s];return r[s]=t,o[s]=e,l}}return r.push(t),o.push(e),this._size++,null},o.prototype.del=function(t){for(var e=n(t.hash(),this._capacity),i=this._keyBuckets[e],r=this._valBuckets[e],o=0;o<i.length;o++){var s=i[o];if(t.equals(s)){for(var a=r[o],l=o;l<i.length-1;l++)i[l]=i[l+1],r[l]=r[l+1];return i.length=i.length-1,r.length=r.length-1,this._size--,a}}return null},o.prototype.has=function(t){for(var e=n(t.hash(),this._capacity),i=this._keyBuckets[e],r=0;r<i.length;r++){var o=i[r];if(t.equals(o))return!0}return!1},o.prototype.size=function(){return this._size},o.prototype.clear=function(){for(var t=0;t<this._capacity;t++)this._keyBuckets[t].length=0,this._valBuckets[t].length=0;this._size=0},o.prototype.forEach=function(t){for(var e=0,i=0;i<this._capacity;i++)for(var n=this._keyBuckets[i],r=this._valBuckets[i],o=0;o<n.length;o++)t(n[o],r[o]),e+=1;return e},e.exports=o},{"../util/mod":91}],31:[function(t,e,i){"use strict";var n=t("../util/mod"),r=64;function o(t){if(null!=t&&(!isFinite(t)||Math.floor(t)!==t||t<1))throw new Error("Set: invalid capacity");this._capacity=this._capacity||r,this._buckets=[];for(var e=0;e<this._capacity;e++)this._buckets.push([]);this._size=0}o.prototype.add=function(t){for(var e=n(t.hash(),this._capacity),i=this._buckets[e],r=0;r<i.length;r++){var o=i[r];if(t.equals(o))return i[r]=t,o}return i.push(t),this._size++,null},o.prototype.remove=function(t){for(var e=n(t.hash(),this._capacity),i=this._buckets[e],r=0;r<i.length;r++){var o=i[r];if(t.equals(o)){for(var s=r;s<i.length-1;s++)i[s]=i[s+1];return i.length=i.length-1,this._size--,o}}return null},o.prototype.has=function(t){for(var e=n(t.hash(),this._capacity),i=this._buckets[e],r=0;r<i.length;r++){var o=i[r];if(t.equals(o))return!0}return!1},o.prototype.size=function(){return this._size},o.prototype.clear=function(){for(var t=0;t<this._capacity;t++)this._buckets[t].length=0;this._size=0},o.prototype.forEach=function(t){for(var e=0,i=0;i<this._capacity;i++)for(var n=this._buckets[i],r=0;r<n.length;r++)t(n[r]),e+=1;return e},e.exports=o},{"../util/mod":91}],32:[function(t,e,i){"use strict";var n=t("./WorkQueue"),r=t("../util/mod");function o(t){this._concurrency=t&&t.concurrency||1,this._paused=t&&!!t.paused||!1,this._pool=[];for(var e=0;e<this._concurrency;e++)this._pool.push(new n(t));this._next=0}o.prototype.length=function(){for(var t=0,e=0;e<this._pool.length;e++)t+=this._pool[e].length();return t},o.prototype.push=function(t,e){var i=this._next,n=this._pool[i].push(t,e);return this._next=r(this._next+1,this._concurrency),n},o.prototype.pause=function(){if(!this._paused){this._paused=!0;for(var t=0;t<this._concurrency;t++)this._pool[t].pause()}},o.prototype.resume=function(){if(this._paused){this._paused=!1;for(var t=0;t<this._concurrency;t++)this._pool[t].resume()}},e.exports=o},{"../util/mod":91,"./WorkQueue":33}],33:[function(t,e,i){"use strict";var n=t("../util/now");function r(t,e){this.fn=t,this.cb=e,this.cfn=null}function o(t){this._queue=[],this._delay=t&&t.delay||0,this._paused=t&&!!t.paused||!1,this._currentTask=null,this._lastFinished=null}o.prototype.length=function(){return this._queue.length},o.prototype.push=function(t,e){var i=new r(t,e),n=this._cancel.bind(this,i);return this._queue.push(i),this._next(),n},o.prototype.pause=function(){this._paused||(this._paused=!0)},o.prototype.resume=function(){this._paused&&(this._paused=!1,this._next())},o.prototype._start=function(t){if(this._currentTask)throw new Error("WorkQueue: called start while running task");this._currentTask=t;var e=this._finish.bind(this,t);if(t.cfn=t.fn(e),"function"!=typeof t.cfn)throw new Error("WorkQueue: function is not cancellable")},o.prototype._finish=function(t){var e=Array.prototype.slice.call(arguments,1);if(this._currentTask!==t)throw new Error("WorkQueue: called finish on wrong task");t.cb.apply(null,e),this._currentTask=null,this._lastFinished=n(),this._next()},o.prototype._cancel=function(t){var e=Array.prototype.slice.call(arguments,1);if(this._currentTask===t)t.cfn.apply(null,e);else{var i=this._queue.indexOf(t);i>=0&&(this._queue.splice(i,1),t.cb.apply(null,e))}},o.prototype._next=function(){if(!this._paused&&this._queue.length&&!this._currentTask){if(null!=this._lastFinished){var t=n()-this._lastFinished,e=this._delay-t;if(e>0)return void setTimeout(this._next.bind(this),e)}var i=this._queue.shift();this._start(i)}},e.exports=o},{"../util/now":93}],34:[function(t,e,i){"use strict";var n=t("gl-matrix").vec4,r=t("gl-matrix").mat4;function o(t){var e=t||{};return e.colorOffset=e.colorOffset||n.create(),e.colorMatrix=e.colorMatrix||r.create(),e}function s(t,e,i){a(i,t,e.colorMatrix),n.add(i,i,e.colorOffset)}function a(t,e,i){var n=e[0],r=e[1],o=e[2],s=e[3];return t[0]=i[0]*n+i[1]*r+i[2]*o+i[3]*s,t[1]=i[4]*n+i[5]*r+i[6]*o+i[7]*s,t[2]=i[8]*n+i[9]*r+i[10]*o+i[11]*s,t[3]=i[12]*n+i[13]*r+i[14]*o+i[15]*s,t}var l=n.create();function c(t,e){for(var i=t.width,r=t.height,o=t.data,a=0;a<i*r;a++)n.set(l,o[4*a+0]/255,o[4*a+1]/255,o[4*a+2]/255,o[4*a+3]/255),s(l,e,l),o[4*a+0]=255*l[0],o[4*a+1]=255*l[1],o[4*a+2]=255*l[2],o[4*a+3]=255*l[3]}e.exports={identity:o,applyToPixel:s,applyToImageData:c}},{"gl-matrix":3}],35:[function(t,e,i){"use strict";var n=t("minimal-event-emitter"),r=t("./Dynamics"),o=t("../util/now"),s=t("../util/clearOwnProperties");function a(t){t=t||{},this._methods=[],this._parameters=["x","y","axisScaledX","axisScaledY","zoom","yaw","pitch","roll"],this._now=t.nowForTesting||o,this._composedOffsets={},this._composeReturn={offsets:this._composedOffsets,changing:null}}n(a),a.prototype.add=function(t){if(!this.has(t)){var e={};this._parameters.forEach((function(t){e[t]={dynamics:new r,time:null}}));var i=this._updateDynamics.bind(this,e),n={instance:t,dynamics:e,parameterDynamicsHandler:i};t.addEventListener("parameterDynamics",i),this._methods.push(n)}},a.prototype.remove=function(t){var e=this._indexOfInstance(t);if(e>=0){var i=this._methods.splice(e,1)[0];i.instance.removeEventListener("parameterDynamics",i.parameterDynamicsHandler)}},a.prototype.has=function(t){return this._indexOfInstance(t)>=0},a.prototype._indexOfInstance=function(t){for(var e=0;e<this._methods.length;e++)if(this._methods[e].instance===t)return e;return-1},a.prototype.list=function(){for(var t=[],e=0;e<this._methods.length;e++)t.push(this._methods[e].instance);return t},a.prototype._updateDynamics=function(t,e,i){var n=t[e];if(!n)throw new Error("Unknown control parameter "+e);var r=this._now();n.dynamics.update(i,(r-n.time)/1e3),n.time=r,this.emit("change")},a.prototype._resetComposedOffsets=function(){for(var t=0;t<this._parameters.length;t++)this._composedOffsets[this._parameters[t]]=0},a.prototype.offsets=function(){var t,e=!1,i=this._now();this._resetComposedOffsets();for(var n=0;n<this._methods.length;n++)for(var r=this._methods[n].dynamics,o=0;o<this._parameters.length;o++){var s=r[t=this._parameters[o]],a=s.dynamics;null!=a.offset&&(this._composedOffsets[t]+=a.offset,a.offset=null);var l=(i-s.time)/1e3,c=a.offsetFromVelocity(l);c&&(this._composedOffsets[t]+=c);var h=a.velocityAfter(l);a.velocity=h,h&&(e=!0),s.time=i}return this._composeReturn.changing=e,this._composeReturn},a.prototype.destroy=function(){for(var t=this.list(),e=0;e<t.length;e++)this.remove(t[e]);s(this)},e.exports=a},{"../util/clearOwnProperties":76,"../util/now":93,"./Dynamics":39,"minimal-event-emitter":14}],36:[function(t,e,i){"use strict";var n=t("../util/defaults"),r=t("../util/clearOwnProperties"),o={active:"move",inactive:"default",disabled:"default"};function s(t,e,i,r){r=n(r||{},o),this._element=i,this._controls=t,this._id=e,this._attached=!1,this._setActiveCursor=this._setCursor.bind(this,r.active),this._setInactiveCursor=this._setCursor.bind(this,r.inactive),this._setDisabledCursor=this._setCursor.bind(this,r.disabled),this._setOriginalCursor=this._setCursor.bind(this,this._element.style.cursor),this._updateAttachmentHandler=this._updateAttachment.bind(this),t.addEventListener("methodEnabled",this._updateAttachmentHandler),t.addEventListener("methodDisabled",this._updateAttachmentHandler),t.addEventListener("enabled",this._updateAttachmentHandler),t.addEventListener("disabled",this._updateAttachmentHandler),this._updateAttachment()}s.prototype.destroy=function(){this._detachFromControlMethod(this._controls.method(this._id)),this._setOriginalCursor(),this._controls.removeEventListener("methodEnabled",this._updateAttachmentHandler),this._controls.removeEventListener("methodDisabled",this._updateAttachmentHandler),this._controls.removeEventListener("enabled",this._updateAttachmentHandler),this._controls.removeEventListener("disabled",this._updateAttachmentHandler),r(this)},s.prototype._updateAttachment=function(){var t=this._controls,e=this._id;t.enabled()&&t.method(e).enabled?this._attachToControlMethod(t.method(e)):this._detachFromControlMethod(t.method(e))},s.prototype._attachToControlMethod=function(t){this._attached||(t.instance.addEventListener("active",this._setActiveCursor),t.instance.addEventListener("inactive",this._setInactiveCursor),t.active?this._setActiveCursor():this._setInactiveCursor(),this._attached=!0)},s.prototype._detachFromControlMethod=function(t){this._attached&&(t.instance.removeEventListener("active",this._setActiveCursor),t.instance.removeEventListener("inactive",this._setInactiveCursor),this._setDisabledCursor(),this._attached=!1)},s.prototype._setCursor=function(t){this._element.style.cursor=t},e.exports=s},{"../util/clearOwnProperties":76,"../util/defaults":81}],37:[function(t,e,i){"use strict";var n=t("minimal-event-emitter"),r=t("./Composer"),o=t("../util/clearOwnProperties"),s="undefined"!=typeof MARZIPANODEBUG&&MARZIPANODEBUG.controls;function a(t){t=t||{},this._methods={},this._methodGroups={},this._composer=new r,this._enabled=!t||!t.enabled||!!t.enabled,this._activeCount=0,this.updatedViews_=[],this._attachedRenderLoop=null}n(a),a.prototype.destroy=function(){this.detach(),this._composer.destroy(),o(this)},a.prototype.methods=function(){var t={};for(var e in this._methods)t[e]=this._methods[e];return t},a.prototype.method=function(t){return this._methods[t]},a.prototype.registerMethod=function(t,e,i){if(this._methods[t])throw new Error("Control method already registered with id "+t);this._methods[t]={instance:e,enabled:!1,active:!1,activeHandler:this._handleActive.bind(this,t),inactiveHandler:this._handleInactive.bind(this,t)},i&&this.enableMethod(t,e)},a.prototype.unregisterMethod=function(t){var e=this._methods[t];if(!e)throw new Error("No control method registered with id "+t);e.enabled&&this.disableMethod(t),delete this._methods[t]},a.prototype.enableMethod=function(t){var e=this._methods[t];if(!e)throw new Error("No control method registered with id "+t);e.enabled||(e.enabled=!0,e.active&&this._incrementActiveCount(),this._listen(t),this._updateComposer(),this.emit("methodEnabled",t))},a.prototype.disableMethod=function(t){var e=this._methods[t];if(!e)throw new Error("No control method registered with id "+t);e.enabled&&(e.enabled=!1,e.active&&this._decrementActiveCount(),this._unlisten(t),this._updateComposer(),this.emit("methodDisabled",t))},a.prototype.addMethodGroup=function(t,e){this._methodGroups[t]=e},a.prototype.removeMethodGroup=function(t){delete this._methodGroups[t]},a.prototype.methodGroups=function(){var t={};for(var e in this._methodGroups)t[e]=this._methodGroups[e];return t},a.prototype.enableMethodGroup=function(t){var e=this;e._methodGroups[t].forEach((function(t){e.enableMethod(t)}))},a.prototype.disableMethodGroup=function(t){var e=this;e._methodGroups[t].forEach((function(t){e.disableMethod(t)}))},a.prototype.enabled=function(){return this._enabled},a.prototype.enable=function(){this._enabled||(this._enabled=!0,this._activeCount>0&&this.emit("active"),this.emit("enabled"),this._updateComposer())},a.prototype.disable=function(){this._enabled&&(this._enabled=!1,this._activeCount>0&&this.emit("inactive"),this.emit("disabled"),this._updateComposer())},a.prototype.attach=function(t){this._attachedRenderLoop&&this.detach(),this._attachedRenderLoop=t,this._beforeRenderHandler=this._updateViewsWithControls.bind(this),this._changeHandler=t.renderOnNextFrame.bind(t),this._attachedRenderLoop.addEventListener("beforeRender",this._beforeRenderHandler),this._composer.addEventListener("change",this._changeHandler)},a.prototype.detach=function(){this._attachedRenderLoop&&(this._attachedRenderLoop.removeEventListener("beforeRender",this._beforeRenderHandler),this._composer.removeEventListener("change",this._changeHandler),this._beforeRenderHandler=null,this._changeHandler=null,this._attachedRenderLoop=null)},a.prototype.attached=function(){return null!=this._attachedRenderLoop},a.prototype._listen=function(t){var e=this._methods[t];if(!e)throw new Error("Bad method id");e.instance.addEventListener("active",e.activeHandler),e.instance.addEventListener("inactive",e.inactiveHandler)},a.prototype._unlisten=function(t){var e=this._methods[t];if(!e)throw new Error("Bad method id");e.instance.removeEventListener("active",e.activeHandler),e.instance.removeEventListener("inactive",e.inactiveHandler)},a.prototype._handleActive=function(t){var e=this._methods[t];if(!e)throw new Error("Bad method id");if(!e.enabled)throw new Error("Should not receive event from disabled control method");e.active||(e.active=!0,this._incrementActiveCount())},a.prototype._handleInactive=function(t){var e=this._methods[t];if(!e)throw new Error("Bad method id");if(!e.enabled)throw new Error("Should not receive event from disabled control method");e.active&&(e.active=!1,this._decrementActiveCount())},a.prototype._incrementActiveCount=function(){this._activeCount++,s&&this._checkActiveCount(),this._enabled&&1===this._activeCount&&this.emit("active")},a.prototype._decrementActiveCount=function(){this._activeCount--,s&&this._checkActiveCount(),this._enabled&&0===this._activeCount&&this.emit("inactive")},a.prototype._checkActiveCount=function(){var t=0;for(var e in this._methods){var i=this._methods[e];i.enabled&&i.active&&t++}if(t!=this._activeCount)throw new Error("Bad control state")},a.prototype._updateComposer=function(){var t=this._composer;for(var e in this._methods){var i=this._methods[e],n=this._enabled&&i.enabled;n&&!t.has(i.instance)&&t.add(i.instance),!n&&t.has(i.instance)&&t.remove(i.instance)}},a.prototype._updateViewsWithControls=function(){var t=this._composer.offsets();t.changing&&this._attachedRenderLoop.renderOnNextFrame(),this.updatedViews_.length=0;for(var e=this._attachedRenderLoop.stage().listLayers(),i=0;i<e.length;i++){var n=e[i].view();this.updatedViews_.indexOf(n)<0&&(e[i].view().updateWithControlParameters(t.offsets),this.updatedViews_.push(n))}},e.exports=a},{"../util/clearOwnProperties":76,"./Composer":35,"minimal-event-emitter":14}],38:[function(t,e,i){"use strict";var n=t("minimal-event-emitter"),r=t("./Dynamics"),o=t("./HammerGestures"),s=t("../util/defaults"),a=t("./util").maxFriction,l=t("../util/clearOwnProperties"),c={friction:6,maxFrictionTime:.3,hammerEvent:"pan"},h="undefined"!=typeof MARZIPANODEBUG&&MARZIPANODEBUG.controls;function u(t,e,i){if(this._element=t,this._opts=s(i||{},c),this._startEvent=null,this._lastEvent=null,this._active=!1,this._dynamics={x:new r,y:new r},this._hammer=o.get(t,e),this._hammer.on("hammer.input",this._handleHammerEvent.bind(this)),"pan"!=this._opts.hammerEvent&&"pinch"!=this._opts.hammerEvent)throw new Error(this._opts.hammerEvent+" is not a hammerEvent managed in DragControlMethod");this._hammer.on(this._opts.hammerEvent+"start",this._handleStart.bind(this)),this._hammer.on(this._opts.hammerEvent+"move",this._handleMove.bind(this)),this._hammer.on(this._opts.hammerEvent+"end",this._handleEnd.bind(this)),this._hammer.on(this._opts.hammerEvent+"cancel",this._handleEnd.bind(this))}n(u),u.prototype.destroy=function(){this._hammer.release(),l(this)},u.prototype._handleHammerEvent=function(t){if(t.isFirst){if(h&&this._active)throw new Error("DragControlMethod active detected when already active");this._active=!0,this.emit("active")}if(t.isFinal){if(h&&!this._active)throw new Error("DragControlMethod inactive detected when already inactive");this._active=!1,this.emit("inactive")}},u.prototype._handleStart=function(t){t.preventDefault(),this._startEvent=t},u.prototype._handleMove=function(t){t.preventDefault(),this._startEvent&&(this._updateDynamicsMove(t),this.emit("parameterDynamics","axisScaledX",this._dynamics.x),this.emit("parameterDynamics","axisScaledY",this._dynamics.y))},u.prototype._handleEnd=function(t){t.preventDefault(),this._startEvent&&(this._updateDynamicsRelease(t),this.emit("parameterDynamics","axisScaledX",this._dynamics.x),this.emit("parameterDynamics","axisScaledY",this._dynamics.y)),this._startEvent=!1,this._lastEvent=!1},u.prototype._updateDynamicsMove=function(t){var e=t.deltaX,i=t.deltaY,n=this._lastEvent||this._startEvent;n&&(e-=n.deltaX,i-=n.deltaY);var r=this._element.getBoundingClientRect();e/=r.right-r.left,i/=r.bottom-r.top,this._dynamics.x.reset(),this._dynamics.y.reset(),this._dynamics.x.offset=-e,this._dynamics.y.offset=-i,this._lastEvent=t};var p=[null,null];u.prototype._updateDynamicsRelease=function(t){var e=this._element.getBoundingClientRect(),i=e.right-e.left,n=e.bottom-e.top,r=1e3*t.velocityX/i,o=1e3*t.velocityY/n;this._dynamics.x.reset(),this._dynamics.y.reset(),this._dynamics.x.velocity=r,this._dynamics.y.velocity=o,a(this._opts.friction,this._dynamics.x.velocity,this._dynamics.y.velocity,this._opts.maxFrictionTime,p),this._dynamics.x.friction=p[0],this._dynamics.y.friction=p[1]},e.exports=u},{"../util/clearOwnProperties":76,"../util/defaults":81,"./Dynamics":39,"./HammerGestures":41,"./util":48,"minimal-event-emitter":14}],39:[function(t,e,i){"use strict";function n(){this.velocity=null,this.friction=null,this.offset=null}function r(t,e){return t<0?Math.min(0,t+e):t>0?Math.max(0,t-e):0}n.equals=function(t,e){return t.velocity===e.velocity&&t.friction===e.friction&&t.offset===e.offset},n.prototype.equals=function(t){return n.equals(this,t)},n.prototype.update=function(t,e){t.offset&&(this.offset=this.offset||0,this.offset+=t.offset);var i=this.offsetFromVelocity(e);i&&(this.offset=this.offset||0,this.offset+=i),this.velocity=t.velocity,this.friction=t.friction},n.prototype.reset=function(){this.velocity=null,this.friction=null,this.offset=null},n.prototype.velocityAfter=function(t){return this.velocity?this.friction?r(this.velocity,this.friction*t):this.velocity:null},n.prototype.offsetFromVelocity=function(t){t=Math.min(t,this.nullVelocityTime());var e=this.velocityAfter(t);return(this.velocity+e)/2*t},n.prototype.nullVelocityTime=function(){return null==this.velocity?0:this.velocity&&!this.friction?1/0:Math.abs(this.velocity/this.friction)},e.exports=n},{}],40:[function(t,e,i){"use strict";var n=t("minimal-event-emitter"),r=t("./Dynamics"),o=t("../util/clearOwnProperties");function s(t,e,i,n){if(!t)throw new Error("ElementPressControlMethod: element must be defined");if(!e)throw new Error("ElementPressControlMethod: parameter must be defined");if(!i)throw new Error("ElementPressControlMethod: velocity must be defined");if(!n)throw new Error("ElementPressControlMethod: friction must be defined");this._element=t,this._pressHandler=this._handlePress.bind(this),this._releaseHandler=this._handleRelease.bind(this),t.addEventListener("mousedown",this._pressHandler),t.addEventListener("mouseup",this._releaseHandler),t.addEventListener("mouseleave",this._releaseHandler),t.addEventListener("touchstart",this._pressHandler),t.addEventListener("touchmove",this._releaseHandler),t.addEventListener("touchend",this._releaseHandler),this._parameter=e,this._velocity=i,this._friction=n,this._dynamics=new r,this._pressing=!1}n(s),s.prototype.destroy=function(){this._element.removeEventListener("mousedown",this._pressHandler),this._element.removeEventListener("mouseup",this._releaseHandler),this._element.removeEventListener("mouseleave",this._releaseHandler),this._element.removeEventListener("touchstart",this._pressHandler),this._element.removeEventListener("touchmove",this._releaseHandler),this._element.removeEventListener("touchend",this._releaseHandler),o(this)},s.prototype._handlePress=function(){this._pressing=!0,this._dynamics.velocity=this._velocity,this._dynamics.friction=0,this.emit("parameterDynamics",this._parameter,this._dynamics),this.emit("active")},s.prototype._handleRelease=function(){this._pressing&&(this._dynamics.friction=this._friction,this.emit("parameterDynamics",this._parameter,this._dynamics),this.emit("inactive")),this._pressing=!1},e.exports=s},{"../util/clearOwnProperties":76,"./Dynamics":39,"minimal-event-emitter":14}],41:[function(t,e,i){"use strict";var n=t("hammerjs"),r=1,o="MarzipanoHammerElementId";function s(t,e){return t[o]||(t[o]=r++),e+t[o]}function a(){this._managers={},this._refCount={}}function l(t,e,i,n){this._manager=e,this._element=i,this._type=n,this._hammerGestures=t,this._eventHandlers=[]}a.prototype.get=function(t,e){var i=s(t,e);return this._managers[i]||(this._managers[i]=this._createManager(t,e),this._refCount[i]=0),this._refCount[i]++,new l(this,this._managers[i],t,e)},a.prototype._createManager=function(t,e){var i=new n.Manager(t);return"mouse"===e?i.add(new n.Pan({direction:n.DIRECTION_ALL,threshold:0})):"touch"!==e&&"pen"!==e&&"kinect"!==e||(i.add(new n.Pan({direction:n.DIRECTION_ALL,threshold:20,pointers:1})),i.add(new n.Pinch)),i},a.prototype._releaseHandle=function(t,e){var i=s(t,e);this._refCount[i]&&(this._refCount[i]--,this._refCount[i]||(this._managers[i].destroy(),delete this._managers[i],delete this._refCount[i]))},l.prototype.on=function(t,e){var i=this._type,n=function(t){i===t.pointerType&&e(t)};this._eventHandlers.push({events:t,handler:n}),this._manager.on(t,n)},l.prototype.release=function(){for(var t=0;t<this._eventHandlers.length;t++){var e=this._eventHandlers[t];this._manager.off(e.events,e.handler)}this._hammerGestures._releaseHandle(this._element,this._type),this._manager=null,this._element=null,this._type=null,this._hammerGestures=null},l.prototype.manager=function(){return this._manager},e.exports=new a},{hammerjs:13}],42:[function(t,e,i){"use strict";var n=t("minimal-event-emitter"),r=t("./Dynamics"),o=t("../util/clearOwnProperties");function s(t,e,i,n,o){if(!t)throw new Error("KeyControlMethod: keyCode must be defined");if(!e)throw new Error("KeyControlMethod: parameter must be defined");if(!i)throw new Error("KeyControlMethod: velocity must be defined");if(!n)throw new Error("KeyControlMethod: friction must be defined");o=o||document,this._keyCode=t,this._parameter=e,this._velocity=i,this._friction=n,this._element=o,this._keydownHandler=this._handlePress.bind(this),this._keyupHandler=this._handleRelease.bind(this),this._blurHandler=this._handleBlur.bind(this),this._element.addEventListener("keydown",this._keydownHandler),this._element.addEventListener("keyup",this._keyupHandler),window.addEventListener("blur",this._blurHandler),this._dynamics=new r,this._pressing=!1}n(s),s.prototype.destroy=function(){this._element.removeEventListener("keydown",this._keydownHandler),this._element.removeEventListener("keyup",this._keyupHandler),window.removeEventListener("blur",this._blurHandler),o(this)},s.prototype._handlePress=function(t){t.keyCode===this._keyCode&&(this._pressing=!0,this._dynamics.velocity=this._velocity,this._dynamics.friction=0,this.emit("parameterDynamics",this._parameter,this._dynamics),this.emit("active"))},s.prototype._handleRelease=function(t){t.keyCode===this._keyCode&&(this._pressing&&(this._dynamics.friction=this._friction,this.emit("parameterDynamics",this._parameter,this._dynamics),this.emit("inactive")),this._pressing=!1)},s.prototype._handleBlur=function(){this._dynamics.velocity=0,this.emit("parameterDynamics",this._parameter,this._dynamics),this.emit("inactive"),this._pressing=!1},e.exports=s},{"../util/clearOwnProperties":76,"./Dynamics":39,"minimal-event-emitter":14}],43:[function(t,e,i){"use strict";var n=t("minimal-event-emitter"),r=t("./Dynamics"),o=t("./HammerGestures"),s=t("../util/clearOwnProperties");function a(t,e,i){this._hammer=o.get(t,e),this._lastEvent=null,this._active=!1,this._dynamics=new r,this._hammer.on("pinchstart",this._handleStart.bind(this)),this._hammer.on("pinch",this._handleEvent.bind(this)),this._hammer.on("pinchend",this._handleEnd.bind(this)),this._hammer.on("pinchcancel",this._handleEnd.bind(this))}n(a),a.prototype.destroy=function(){this._hammer.release(),s(this)},a.prototype._handleStart=function(){this._active||(this._active=!0,this.emit("active"))},a.prototype._handleEnd=function(){this._lastEvent=null,this._active&&(this._active=!1,this.emit("inactive"))},a.prototype._handleEvent=function(t){var e=t.scale;this._lastEvent&&(e/=this._lastEvent.scale),this._dynamics.offset=-1*(e-1),this.emit("parameterDynamics","zoom",this._dynamics),this._lastEvent=t},e.exports=a},{"../util/clearOwnProperties":76,"./Dynamics":39,"./HammerGestures":41,"minimal-event-emitter":14}],44:[function(t,e,i){"use strict";var n=t("minimal-event-emitter"),r=t("./Dynamics"),o=t("./HammerGestures"),s=t("../util/defaults"),a=t("./util").maxFriction,l=t("../util/clearOwnProperties"),c={speed:8,friction:6,maxFrictionTime:.3};function h(t,e,i){this._element=t,this._opts=s(i||{},c),this._active=!1,this._hammer=o.get(t,e),this._dynamics={x:new r,y:new r},this._hammer.on("panstart",this._handleStart.bind(this)),this._hammer.on("panmove",this._handleMove.bind(this)),this._hammer.on("panend",this._handleRelease.bind(this)),this._hammer.on("pancancel",this._handleRelease.bind(this))}n(h),h.prototype.destroy=function(){this._hammer.release(),l(this)},h.prototype._handleStart=function(t){t.preventDefault(),this._active||(this._active=!0,this.emit("active"))},h.prototype._handleMove=function(t){t.preventDefault(),this._updateDynamics(t,!1)},h.prototype._handleRelease=function(t){t.preventDefault(),this._updateDynamics(t,!0),this._active&&(this._active=!1,this.emit("inactive"))};var u=[null,null];h.prototype._updateDynamics=function(t,e){var i=this._element.getBoundingClientRect(),n=i.right-i.left,r=i.bottom-i.top,o=Math.max(n,r),s=t.deltaX/o*this._opts.speed,l=t.deltaY/o*this._opts.speed;this._dynamics.x.reset(),this._dynamics.y.reset(),this._dynamics.x.velocity=s,this._dynamics.y.velocity=l,e&&(a(this._opts.friction,this._dynamics.x.velocity,this._dynamics.y.velocity,this._opts.maxFrictionTime,u),this._dynamics.x.friction=u[0],this._dynamics.y.friction=u[1]),this.emit("parameterDynamics","x",this._dynamics.x),this.emit("parameterDynamics","y",this._dynamics.y)},e.exports=h},{"../util/clearOwnProperties":76,"../util/defaults":81,"./Dynamics":39,"./HammerGestures":41,"./util":48,"minimal-event-emitter":14}],45:[function(t,e,i){"use strict";var n=t("minimal-event-emitter"),r=t("./Dynamics"),o=t("../util/defaults"),s=t("../util/clearOwnProperties"),a={frictionTime:.2,zoomDelta:.001};function l(t,e){this._element=t,this._opts=o(e||{},a),this._dynamics=new r,this._eventList=[];var i=this._opts.frictionTime?this.withSmoothing:this.withoutSmoothing;this._wheelListener=i.bind(this),t.addEventListener("wheel",this._wheelListener)}function c(t){var e=1==t.deltaMode?20:1;return t.deltaY*e}n(l),l.prototype.destroy=function(){this._element.removeEventListener("wheel",this._wheelListener),s(this)},l.prototype.withoutSmoothing=function(t){this._dynamics.offset=c(t)*this._opts.zoomDelta,this.emit("parameterDynamics","zoom",this._dynamics),t.preventDefault(),this.emit("active"),this.emit("inactive")},l.prototype.withSmoothing=function(t){var e=t.timeStamp;for(this._eventList.push(t);this._eventList[0].timeStamp<e-1e3*this._opts.frictionTime;)this._eventList.shift(0);for(var i=0,n=0;n<this._eventList.length;n++)i+=c(this._eventList[n])*this._opts.zoomDelta/this._opts.frictionTime;this._dynamics.velocity=i,this._dynamics.friction=Math.abs(i)/this._opts.frictionTime,this.emit("parameterDynamics","zoom",this._dynamics),t.preventDefault(),this.emit("active"),this.emit("inactive")},e.exports=l},{"../util/clearOwnProperties":76,"../util/defaults":81,"./Dynamics":39,"minimal-event-emitter":14}],46:[function(t,e,i){"use strict";var n=t("minimal-event-emitter"),r=t("./Dynamics"),o=t("../util/clearOwnProperties");function s(t){if(!t)throw new Error("VelocityControlMethod: parameter must be defined");this._parameter=t,this._dynamics=new r}n(s),s.prototype.destroy=function(){o(this)},s.prototype.setVelocity=function(t){this._dynamics.velocity=t,this.emit("parameterDynamics",this._parameter,this._dynamics)},s.prototype.setFriction=function(t){this._dynamics.friction=t,this.emit("parameterDynamics",this._parameter,this._dynamics)},e.exports=s},{"../util/clearOwnProperties":76,"./Dynamics":39,"minimal-event-emitter":14}],47:[function(t,e,i){"use strict";var n=t("../util/defaults"),r=t("./Drag"),o=t("./Qtvr"),s=t("./ScrollZoom"),a=t("./PinchZoom"),l=t("./Key"),c={mouseViewMode:"drag",dragMode:"pan"};function h(t,e,i){i=n(i||{},c);var h={mouseViewDrag:new r(e,"mouse"),mouseViewQtvr:new o(e,"mouse"),leftArrowKey:new l(37,"x",-.7,3),rightArrowKey:new l(39,"x",.7,3),upArrowKey:new l(38,"y",-.7,3),downArrowKey:new l(40,"y",.7,3),plusKey:new l(107,"zoom",-.7,3),minusKey:new l(109,"zoom",.7,3),wKey:new l(87,"y",-.7,3),aKey:new l(65,"x",-.7,3),sKey:new l(83,"y",.7,3),dKey:new l(68,"x",.7,3),qKey:new l(81,"roll",.7,3),eKey:new l(69,"roll",-.7,3)},u=["scrollZoom","touchView","pinch"];!1!==i.scrollZoom&&(h.scrollZoom=new s(e));var p={arrowKeys:["leftArrowKey","rightArrowKey","upArrowKey","downArrowKey"],plusMinusKeys:["plusKey","minusKey"],wasdKeys:["wKey","aKey","sKey","dKey"],qeKeys:["qKey","eKey"]};switch(i.dragMode){case"pinch":h.pinch=new r(e,"touch",{hammerEvent:"pinch"});break;case"pan":h.touchView=new r(e,"touch"),h.pinch=new a(e,"touch");break;default:throw new Error("Unknown drag mode: "+i.dragMode)}switch(i.mouseViewMode){case"drag":u.push("mouseViewDrag");break;case"qtvr":u.push("mouseViewQtvr");break;default:throw new Error("Unknown mouse view mode: "+i.mouseViewMode)}for(var d in h){var f=h[d];t.registerMethod(d,f),u.indexOf(d)>=0&&t.enableMethod(d)}for(var m in p){var v=p[m];t.addMethodGroup(m,v)}return h}e.exports=h},{"../util/defaults":81,"./Drag":38,"./Key":42,"./PinchZoom":43,"./Qtvr":44,"./ScrollZoom":45}],48:[function(t,e,i){"use strict";function n(t,e,i,n,o){var s=Math.sqrt(Math.pow(e,2)+Math.pow(i,2));r(e,i,t=Math.max(t,s/n),o),o[0]=Math.abs(o[0]),o[1]=Math.abs(o[1])}function r(t,e,i,n){var r=Math.atan(e/t);n[0]=i*Math.cos(r),n[1]=i*Math.sin(r)}e.exports={maxFriction:n,changeVectorNorm:r}},{}],49:[function(t,e,i){"use strict";var n=t("../util/inherits"),r=t("../util/hash"),o=t("../TileSearcher"),s=t("../collections/LruMap"),a=t("./Level"),l=t("./common").makeLevelList,c=t("./common").makeSelectableLevelList,h=t("../util/clamp"),u=t("../util/cmp"),p=t("../util/type"),d=t("gl-matrix").vec3,f=t("gl-matrix").vec4,m=64,v="fudlrb",_={f:{x:0,y:0},b:{x:0,y:Math.PI},l:{x:0,y:Math.PI/2},r:{x:0,y:-Math.PI/2},u:{x:Math.PI/2,y:0},d:{x:-Math.PI/2,y:0}},g=d.create();function y(t,e,i,n){e&&d.rotateZ(t,t,g,e),i&&d.rotateX(t,t,g,i),n&&d.rotateY(t,t,g,n)}for(var b={},w=0;w<v.length;w++){var x=v[w],E=_[x],M=d.fromValues(0,0,-1);y(M,0,E.x,E.y),b[x]=M}var T={f:["l","r","u","d"],b:["r","l","u","d"],l:["b","f","u","d"],r:["f","b","u","d"],u:["l","r","b","f"],d:["l","r","f","b"]},L=[[0,1],[1,0],[0,-1],[-1,0]];function S(t,e,i,n,r){this.face=t,this.x=e,this.y=i,this.z=n,this._geometry=r,this._level=r.levelList[n]}function A(t){if(this.constructor.super_.call(this,t),this._size=t.size,this._tileSize=t.tileSize,this._size%this._tileSize!=0)throw new Error("Level size is not multiple of tile size: "+this._size+" "+this._tileSize)}function C(t){if("array"!==p(t))throw new Error("Level list must be an array");this.levelList=l(t,A),this.selectableLevelList=c(this.levelList);for(var e=1;e<this.levelList.length;e++)this.levelList[e]._validateWithParentLevel(this.levelList[e-1]);this._tileSearcher=new o(this),this._neighborsCache=new s(m),this._vec=f.create(),this._viewSize={}}S.prototype.rotX=function(){return _[this.face].x},S.prototype.rotY=function(){return _[this.face].y},S.prototype.centerX=function(){return(this.x+.5)/this._level.numHorizontalTiles()-.5},S.prototype.centerY=function(){return.5-(this.y+.5)/this._level.numVerticalTiles()},S.prototype.scaleX=function(){return 1/this._level.numHorizontalTiles()},S.prototype.scaleY=function(){return 1/this._level.numVerticalTiles()},S.prototype.vertices=function(t){t||(t=[d.create(),d.create(),d.create(),d.create()]);var e=_[this.face];function i(t,i,n){d.set(t,i,n,-.5),y(t,0,e.x,e.y)}var n=this.centerX()-this.scaleX()/2,r=this.centerX()+this.scaleX()/2,o=this.centerY()-this.scaleY()/2,s=this.centerY()+this.scaleY()/2;return i(t[0],n,s),i(t[1],r,s),i(t[2],r,o),i(t[3],n,o),t},S.prototype.parent=function(){if(0===this.z)return null;var t=this.face,e=this.z,i=this.x,n=this.y,r=this._geometry,o=r.levelList[e],s=r.levelList[e-1];return new S(t,Math.floor(i/o.numHorizontalTiles()*s.numHorizontalTiles()),Math.floor(n/o.numVerticalTiles()*s.numVerticalTiles()),e-1,r)},S.prototype.children=function(t){if(this.z===this._geometry.levelList.length-1)return null;var e=this.face,i=this.z,n=this.x,r=this.y,o=this._geometry,s=o.levelList[i],a=o.levelList[i+1],l=a.numHorizontalTiles()/s.numHorizontalTiles(),c=a.numVerticalTiles()/s.numVerticalTiles();t=t||[];for(var h=0;h<l;h++)for(var u=0;u<c;u++){var p=l*n+h,d=c*r+u,f=i+1;t.push(new S(e,p,d,f,o))}return t},S.prototype.neighbors=function(){var t=this._geometry,e=t._neighborsCache,i=e.get(this);if(i)return i;for(var n=t._vec,r=this.face,o=this.x,s=this.y,a=this.z,l=this._level,c=l.numHorizontalTiles(),u=l.numVerticalTiles(),p=[],f=0;f<L.length;f++){var m=o+L[f][0],v=s+L[f][1],g=a,b=r;if(m<0||m>=c||v<0||v>=u){var w,x=this.centerX(),E=this.centerY();m<0?(d.set(n,-.5,E,-.5),b=T[r][0]):m>=c?(d.set(n,.5,E,-.5),b=T[r][1]):v<0?(d.set(n,x,.5,-.5),b=T[r][2]):v>=u&&(d.set(n,x,-.5,-.5),b=T[r][3]),y(n,0,(w=_[r]).x,w.y),y(n,0,-(w=_[b]).x,-w.y),m=h(Math.floor((.5+n[0])*c),0,c-1),v=h(Math.floor((.5-n[1])*u),0,u-1)}p.push(new S(b,m,v,g,t))}return e.set(this,p),p},S.prototype.hash=function(){return r(v.indexOf(this.face),this.z,this.y,this.x)},S.prototype.equals=function(t){return this._geometry===t._geometry&&this.face===t.face&&this.z===t.z&&this.y===t.y&&this.x===t.x},S.prototype.cmp=function(t){return u(this.z,t.z)||u(v.indexOf(this.face),v.indexOf(t.face))||u(this.y,t.y)||u(this.x,t.x)},S.prototype.str=function(){return"CubeTile("+tile.face+", "+tile.x+", "+tile.y+", "+tile.z+")"},n(A,a),A.prototype.width=function(){return this._size},A.prototype.height=function(){return this._size},A.prototype.tileWidth=function(){return this._tileSize},A.prototype.tileHeight=function(){return this._tileSize},A.prototype._validateWithParentLevel=function(t){var e=this.width(),i=this.height(),n=this.tileWidth(),r=this.tileHeight(),o=this.numHorizontalTiles(),s=this.numVerticalTiles(),a=t.width(),l=t.height(),c=t.tileWidth(),h=t.tileHeight(),u=t.numHorizontalTiles(),p=t.numVerticalTiles();if(e%a!=0)throw new Error("Level width must be multiple of parent level: "+e+" vs. "+a);if(i%l!=0)throw new Error("Level height must be multiple of parent level: "+i+" vs. "+l);if(o%u!=0)throw new Error("Number of horizontal tiles must be multiple of parent level: "+o+" ("+e+"/"+n+") vs. "+u+" ("+a+"/"+c+")");if(s%p!=0)throw new Error("Number of vertical tiles must be multiple of parent level: "+s+" ("+i+"/"+r+") vs. "+p+" ("+l+"/"+h+")")},C.prototype.maxTileSize=function(){for(var t=0,e=0;e<this.levelList.length;e++){var i=this.levelList[e];t=Math.max(t,i.tileWidth,i.tileHeight)}return t},C.prototype.levelTiles=function(t,e){var i=this.levelList.indexOf(t),n=t.numHorizontalTiles()-1,r=t.numVerticalTiles()-1;e=e||[];for(var o=0;o<v.length;o++)for(var s=v[o],a=0;a<=n;a++)for(var l=0;l<=r;l++)e.push(new S(s,a,l,i,this));return e},C.prototype._closestTile=function(t,e){var i=this._vec;f.set(i,0,0,1,1),f.transformMat4(i,i,t.inverseProjection());var n=1/0,r=null;for(var o in b){var s=b[o],a=1-d.dot(s,i);a<n&&(n=a,r=o)}for(var l=Math.max(Math.abs(i[0]),Math.abs(i[1]),Math.abs(i[2]))/.5,c=0;c<3;c++)i[c]=i[c]/l;var u=_[r];y(i,0,-u.x,-u.y);var p=this.levelList.indexOf(e),m=e.numHorizontalTiles(),v=e.numVerticalTiles();return new S(r,h(Math.floor((.5+i[0])*m),0,m-1),h(Math.floor((.5-i[1])*v),0,v-1),p,this)},C.prototype.visibleTiles=function(t,e,i){var n=this._viewSize,r=this._tileSearcher;if(i=i||[],t.size(n),0===n.width||0===n.height)return i;var o=this._closestTile(t,e);if(!r.search(t,o,i))throw new Error("Starting tile is not visible");return i},C.Tile=C.prototype.Tile=S,C.type=C.prototype.type="cube",S.type=S.prototype.type="cube",e.exports=C},{"../TileSearcher":22,"../collections/LruMap":28,"../util/clamp":75,"../util/cmp":77,"../util/hash":88,"../util/inherits":89,"../util/type":101,"./Level":52,"./common":53,"gl-matrix":3}],50:[function(t,e,i){"use strict";var n=t("../util/inherits"),r=t("../util/hash"),o=t("../util/cmp"),s=t("./common"),a=t("./Level"),l=t("../util/type");function c(t,e){this.z=t,this._geometry=e,this._level=e.levelList[t]}function h(t){this.constructor.super_.call(this,t),this._width=t.width}function u(t){if("array"!==l(t))throw new Error("Level list must be an array");this.levelList=s.makeLevelList(t,h),this.selectableLevelList=s.makeSelectableLevelList(this.levelList)}c.prototype.rotX=function(){return 0},c.prototype.rotY=function(){return 0},c.prototype.centerX=function(){return.5},c.prototype.centerY=function(){return.5},c.prototype.scaleX=function(){return 1},c.prototype.scaleY=function(){return 1},c.prototype.parent=function(){return 0===this.z?null:new c(this.z-1,this._geometry)},c.prototype.children=function(t){return this.z===this._geometry.levelList.length-1?null:((t=t||[]).push(new c(this.z+1,this._geometry)),t)},c.prototype.neighbors=function(){return[]},c.prototype.hash=function(){return r(this.z)},c.prototype.equals=function(t){return this._geometry===t._geometry&&this.z===t.z},c.prototype.cmp=function(t){return o(this.z,t.z)},c.prototype.str=function(){return"EquirectTile("+tile.z+")"},n(h,a),h.prototype.width=function(){return this._width},h.prototype.height=function(){return this._width/2},h.prototype.tileWidth=function(){return this._width},h.prototype.tileHeight=function(){return this._width/2},u.prototype.maxTileSize=function(){for(var t=0,e=0;e<this.levelList.length;e++){var i=this.levelList[e];t=Math.max(t,i.tileWidth,i.tileHeight)}return t},u.prototype.levelTiles=function(t,e){var i=this.levelList.indexOf(t);return(e=e||[]).push(new c(i,this)),e},u.prototype.visibleTiles=function(t,e,i){var n=new c(this.levelList.indexOf(e),this);(i=i||[]).length=0,i.push(n)},u.Tile=u.prototype.Tile=c,u.type=u.prototype.type="equirect",c.type=c.prototype.type="equirect",e.exports=u},{"../util/cmp":77,"../util/hash":88,"../util/inherits":89,"../util/type":101,"./Level":52,"./common":53}],51:[function(t,e,i){"use strict";var n=t("../util/inherits"),r=t("../util/hash"),o=t("../TileSearcher"),s=t("../collections/LruMap"),a=t("./Level"),l=t("./common").makeLevelList,c=t("./common").makeSelectableLevelList,h=t("../util/clamp"),u=t("../util/mod"),p=t("../util/cmp"),d=t("../util/type"),f=t("gl-matrix").vec2,m=t("gl-matrix").vec4,v=64,_=[[0,1],[1,0],[0,-1],[-1,0]];function g(t,e,i,n){this.x=t,this.y=e,this.z=i,this._geometry=n,this._level=n.levelList[i]}function y(t){this.constructor.super_.call(this,t),this._width=t.width,this._height=t.height,this._tileWidth=t.tileWidth,this._tileHeight=t.tileHeight}function b(t){if("array"!==d(t))throw new Error("Level list must be an array");this.levelList=l(t,y),this.selectableLevelList=c(this.levelList);for(var e=1;e<this.levelList.length;e++)this.levelList[e]._validateWithParentLevel(this.levelList[e-1]);this._tileSearcher=new o(this),this._neighborsCache=new s(v),this._vec=m.create(),this._viewSize={}}g.prototype.rotX=function(){return 0},g.prototype.rotY=function(){return 0},g.prototype.centerX=function(){var t=this._level.width(),e=this._level.tileWidth();return(this.x*e+.5*this.width())/t-.5},g.prototype.centerY=function(){var t=this._level.height(),e=this._level.tileHeight();return.5-(this.y*e+.5*this.height())/t},g.prototype.scaleX=function(){var t=this._level.width();return this.width()/t},g.prototype.scaleY=function(){var t=this._level.height();return this.height()/t},g.prototype.width=function(){var t=this._level.width(),e=this._level.tileWidth();return this.x===this._level.numHorizontalTiles()-1&&u(t,e)||e},g.prototype.height=function(){var t=this._level.height(),e=this._level.tileHeight();return this.y===this._level.numVerticalTiles()-1&&u(t,e)||e},g.prototype.levelWidth=function(){return this._level.width()},g.prototype.levelHeight=function(){return this._level.height()},g.prototype.vertices=function(t){t||(t=[f.create(),f.create(),f.create(),f.create()]);var e=this.centerX()-this.scaleX()/2,i=this.centerX()+this.scaleX()/2,n=this.centerY()-this.scaleY()/2,r=this.centerY()+this.scaleY()/2;return f.set(t[0],e,r),f.set(t[1],i,r),f.set(t[2],i,n),f.set(t[3],e,n),t},g.prototype.parent=function(){if(0===this.z)return null;var t=this._geometry,e=this.z-1;return new g(Math.floor(this.x/2),Math.floor(this.y/2),e,t)},g.prototype.children=function(t){if(this.z===this._geometry.levelList.length-1)return null;var e=this._geometry,i=this.z+1;return(t=t||[]).push(new g(2*this.x,2*this.y,i,e)),t.push(new g(2*this.x,2*this.y+1,i,e)),t.push(new g(2*this.x+1,2*this.y,i,e)),t.push(new g(2*this.x+1,2*this.y+1,i,e)),t},g.prototype.neighbors=function(){var t=this._geometry,e=t._neighborsCache,i=e.get(this);if(i)return i;for(var n=this.x,r=this.y,o=this.z,s=this._level,a=s.numHorizontalTiles()-1,l=s.numVerticalTiles()-1,c=[],h=0;h<_.length;h++){var u=n+_[h][0],p=r+_[h][1],d=o;0<=u&&u<=a&&0<=p&&p<=l&&c.push(new g(u,p,d,t))}return e.set(this,c),c},g.prototype.hash=function(){return r(this.z,this.y,this.x)},g.prototype.equals=function(t){return this._geometry===t._geometry&&this.z===t.z&&this.y===t.y&&this.x===t.x},g.prototype.cmp=function(t){return p(this.z,t.z)||p(this.y,t.y)||p(this.x,t.x)},g.prototype.str=function(){return"FlatTile("+tile.x+", "+tile.y+", "+tile.z+")"},n(y,a),y.prototype.width=function(){return this._width},y.prototype.height=function(){return this._height},y.prototype.tileWidth=function(){return this._tileWidth},y.prototype.tileHeight=function(){return this._tileHeight},y.prototype._validateWithParentLevel=function(t){var e=this.width(),i=this.height(),n=this.tileWidth(),r=this.tileHeight(),o=t.width(),s=t.height(),a=t.tileWidth(),l=t.tileHeight();return e%o!=0?new Error("Level width must be multiple of parent level: "+e+" vs. "+o):i%s!=0?new Error("Level height must be multiple of parent level: "+i+" vs. "+s):n%a!=0?new Error("Level tile width must be multiple of parent level: "+n+" vs. "+a):r%l!=0?new Error("Level tile height must be multiple of parent level: "+r+" vs. "+l):void 0},b.prototype.maxTileSize=function(){for(var t=0,e=0;e<this.levelList.length;e++){var i=this.levelList[e];t=Math.max(t,i.tileWidth,i.tileHeight)}return t},b.prototype.levelTiles=function(t,e){var i=this.levelList.indexOf(t),n=t.numHorizontalTiles()-1,r=t.numVerticalTiles()-1;e||(e=[]);for(var o=0;o<=n;o++)for(var s=0;s<=r;s++)e.push(new g(o,s,i,this));return e},b.prototype._closestTile=function(t,e){var i=this._vec;m.set(i,0,0,1,1),m.transformMat4(i,i,t.inverseProjection());var n=.5+i[0],r=.5-i[1],o=this.levelList.indexOf(e),s=e.width(),a=e.height(),l=e.tileWidth(),c=e.tileHeight(),u=e.numHorizontalTiles(),p=e.numVerticalTiles();return new g(h(Math.floor(n*s/l),0,u-1),h(Math.floor(r*a/c),0,p-1),o,this)},b.prototype.visibleTiles=function(t,e,i){var n=this._viewSize,r=this._tileSearcher;if(i=i||[],t.size(n),0===n.width||0===n.height)return i;var o=this._closestTile(t,e);if(!r.search(t,o,i))throw new Error("Starting tile is not visible");return i},b.Tile=b.prototype.Tile=g,b.type=b.prototype.type="flat",g.type=g.prototype.type="flat",e.exports=b},{"../TileSearcher":22,"../collections/LruMap":28,"../util/clamp":75,"../util/cmp":77,"../util/hash":88,"../util/inherits":89,"../util/mod":91,"../util/type":101,"./Level":52,"./common":53,"gl-matrix":3}],52:[function(t,e,i){"use strict";function n(t){this._fallbackOnly=!!t.fallbackOnly}n.prototype.numHorizontalTiles=function(){return Math.ceil(this.width()/this.tileWidth())},n.prototype.numVerticalTiles=function(){return Math.ceil(this.height()/this.tileHeight())},n.prototype.fallbackOnly=function(){return this._fallbackOnly},e.exports=n},{}],53:[function(t,e,i){"use strict";var n=t("../util/cmp");function r(t,e){for(var i=[],r=0;r<t.length;r++)i.push(new e(t[r]));return i.sort((function(t,e){return n(t.width(),e.width())})),i}function o(t){for(var e=[],i=0;i<t.length;i++)t[i]._fallbackOnly||e.push(t[i]);if(!e.length)throw new Error("No selectable levels in list");return e}e.exports={makeLevelList:r,makeSelectableLevelList:o}},{"../util/cmp":77}],54:[function(t,e,i){"use strict";e.exports={WebGlStage:t("./stages/WebGl"),WebGlCubeRenderer:t("./renderers/WebGlCube"),WebGlFlatRenderer:t("./renderers/WebGlFlat"),WebGlEquirectRenderer:t("./renderers/WebGlEquirect"),registerDefaultRenderers:t("./renderers/registerDefaultRenderers"),CubeGeometry:t("./geometries/Cube"),FlatGeometry:t("./geometries/Flat"),EquirectGeometry:t("./geometries/Equirect"),RectilinearView:t("./views/Rectilinear"),FlatView:t("./views/Flat"),ImageUrlSource:t("./sources/ImageUrl"),SingleAssetSource:t("./sources/SingleAsset"),StaticAsset:t("./assets/Static"),DynamicAsset:t("./assets/Dynamic"),TextureStore:t("./TextureStore"),Layer:t("./Layer"),RenderLoop:t("./RenderLoop"),KeyControlMethod:t("./controls/Key"),DragControlMethod:t("./controls/Drag"),QtvrControlMethod:t("./controls/Qtvr"),ScrollZoomControlMethod:t("./controls/ScrollZoom"),PinchZoomControlMethod:t("./controls/PinchZoom"),VelocityControlMethod:t("./controls/Velocity"),ElementPressControlMethod:t("./controls/ElementPress"),Controls:t("./controls/Controls"),Dynamics:t("./controls/Dynamics"),Viewer:t("./Viewer"),Scene:t("./Scene"),Hotspot:t("./Hotspot"),HotspotContainer:t("./HotspotContainer"),colorEffects:t("./colorEffects"),registerDefaultControls:t("./controls/registerDefaultControls"),autorotate:t("./autorotate"),util:{async:t("./util/async"),cancelize:t("./util/cancelize"),chain:t("./util/chain"),clamp:t("./util/clamp"),clearOwnProperties:t("./util/clearOwnProperties"),cmp:t("./util/cmp"),compose:t("./util/compose"),convertFov:t("./util/convertFov"),decimal:t("./util/decimal"),defaults:t("./util/defaults"),defer:t("./util/defer"),degToRad:t("./util/degToRad"),delay:t("./util/delay"),dom:t("./util/dom"),extend:t("./util/extend"),hash:t("./util/hash"),inherits:t("./util/inherits"),mod:t("./util/mod"),noop:t("./util/noop"),now:t("./util/now"),once:t("./util/once"),pixelRatio:t("./util/pixelRatio"),radToDeg:t("./util/radToDeg"),real:t("./util/real"),retry:t("./util/retry"),tween:t("./util/tween"),type:t("./util/type")},dependencies:{bowser:t("bowser"),glMatrix:t("gl-matrix"),eventEmitter:t("minimal-event-emitter"),hammerjs:t("hammerjs")}}},{"./Hotspot":15,"./HotspotContainer":16,"./Layer":17,"./RenderLoop":19,"./Scene":20,"./TextureStore":21,"./Viewer":24,"./assets/Dynamic":25,"./assets/Static":26,"./autorotate":27,"./colorEffects":34,"./controls/Controls":37,"./controls/Drag":38,"./controls/Dynamics":39,"./controls/ElementPress":40,"./controls/Key":42,"./controls/PinchZoom":43,"./controls/Qtvr":44,"./controls/ScrollZoom":45,"./controls/Velocity":46,"./controls/registerDefaultControls":47,"./geometries/Cube":49,"./geometries/Equirect":50,"./geometries/Flat":51,"./renderers/WebGlCube":58,"./renderers/WebGlEquirect":59,"./renderers/WebGlFlat":60,"./renderers/registerDefaultRenderers":61,"./sources/ImageUrl":66,"./sources/SingleAsset":67,"./stages/WebGl":70,"./util/async":71,"./util/cancelize":73,"./util/chain":74,"./util/clamp":75,"./util/clearOwnProperties":76,"./util/cmp":77,"./util/compose":78,"./util/convertFov":79,"./util/decimal":80,"./util/defaults":81,"./util/defer":82,"./util/degToRad":83,"./util/delay":84,"./util/dom":85,"./util/extend":86,"./util/hash":88,"./util/inherits":89,"./util/mod":91,"./util/noop":92,"./util/now":93,"./util/once":94,"./util/pixelRatio":95,"./util/radToDeg":97,"./util/real":98,"./util/retry":99,"./util/tween":100,"./util/type":101,"./views/Flat":102,"./views/Rectilinear":103,bowser:1,"gl-matrix":3,hammerjs:13,"minimal-event-emitter":14}],55:[function(t,e,i){"use strict";var n=t("../assets/Static"),r=t("../NetworkError"),o=t("bowser"),s=t("../util/global"),a=t("../util/once"),l=!!s.createImageBitmap&&!o.firefox&&!o.safari,c={imageOrientation:"flipY",premultiplyAlpha:"premultiply"};function h(t){this._stage=t}h.prototype.loadImage=function(t,e,i){var n=this,r=new Image;r.crossOrigin="anonymous";var o=e&&e.x||0,s=e&&e.y||0,l=e&&e.width||1,c=e&&e.height||1;function h(){r.onload=r.onerror=null,r.src="",i.apply(null,arguments)}return i=a(i),r.onload=function(){n._handleLoad(r,o,s,l,c,i)},r.onerror=function(){n._handleError(t,i)},r.src=t,h},h.prototype._handleLoad=function(t,e,i,r,o,a){if(0!==e||0!==i||1!==r||1!==o)if(e*=t.naturalWidth,i*=t.naturalHeight,r*=t.naturalWidth,o*=t.naturalHeight,l)s.createImageBitmap(t,e,i,r,o,c).then((function(t){a(null,new n(t))}));else{var h=document.createElement("canvas");h.width=r,h.height=o,h.getContext("2d").drawImage(t,e,i,r,o,0,0,r,o),a(null,new n(h))}else a(null,new n(t))},h.prototype._handleError=function(t,e){e(new r("Network error: "+t))},e.exports=h},{"../NetworkError":18,"../assets/Static":26,"../util/global":87,"../util/once":94,bowser:1}],56:[function(t,e,i){"use strict";var n=t("gl-matrix").mat4,r=t("gl-matrix").vec3,o=t("../util/clearOwnProperties"),s=t("./WebGlCommon"),a=s.createConstantBuffers,l=s.destroyConstantBuffers,c=s.createShaderProgram,h=s.destroyShaderProgram,u=s.enableAttributes,p=s.disableAttributes,d=s.setViewport,f=s.setupPixelEffectUniforms,m=s.setDepth,v=s.setTexture,_=t("../shaders/vertexNormal"),g=t("../shaders/fragmentNormal"),y=[0,1,2,0,2,3],b=[-.5,-.5,0,.5,-.5,0,.5,.5,0,-.5,.5,0],w=[0,0,1,0,1,1,0,1],x=["aVertexPosition","aTextureCoord"],E=["uDepth","uOpacity","uSampler","uProjMatrix","uViewportMatrix","uColorOffset","uColorMatrix"];function M(t){this.gl=t,this.projMatrix=n.create(),this.viewportMatrix=n.create(),this.translateVector=r.create(),this.scaleVector=r.create(),this.constantBuffers=a(t,y,b,w),this.shaderProgram=c(t,_,g,x,E)}M.prototype.destroy=function(){l(this.gl,this.constantBuffers),h(this.gl,this.shaderProgram),o(this)},M.prototype.startLayer=function(t,e){var i=this.gl,n=this.shaderProgram,r=this.constantBuffers,o=this.viewportMatrix;i.useProgram(n),u(i,n),d(i,t,e,o),i.uniformMatrix4fv(n.uViewportMatrix,!1,o),i.bindBuffer(i.ARRAY_BUFFER,r.vertexPositions),i.vertexAttribPointer(n.aVertexPosition,3,i.FLOAT,i.FALSE,0,0),i.bindBuffer(i.ARRAY_BUFFER,r.textureCoords),i.vertexAttribPointer(n.aTextureCoord,2,i.FLOAT,i.FALSE,0,0),f(i,t.effects(),{opacity:n.uOpacity,colorOffset:n.uColorOffset,colorMatrix:n.uColorMatrix})},M.prototype.endLayer=function(t,e){var i=this.gl,n=this.shaderProgram;p(i,n)},M.prototype.renderTile=function(t,e,i,r){var o=this.gl,s=this.shaderProgram,a=this.constantBuffers,l=this.projMatrix,c=this.translateVector,h=this.scaleVector;c[0]=t.centerX(),c[1]=t.centerY(),c[2]=-.5,h[0]=t.scaleX(),h[1]=t.scaleY(),h[2]=1,n.copy(l,i.view().projection()),n.rotateX(l,l,t.rotX()),n.rotateY(l,l,t.rotY()),n.translate(l,l,c),n.scale(l,l,h),o.uniformMatrix4fv(s.uProjMatrix,!1,l),m(o,s,r,t.z),v(o,s,e),o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,a.vertexIndices),o.drawElements(o.TRIANGLES,y.length,o.UNSIGNED_SHORT,0)},e.exports=M},{"../shaders/fragmentNormal":63,"../shaders/vertexNormal":65,"../util/clearOwnProperties":76,"./WebGlCommon":57,"gl-matrix":3}],57:[function(t,e,i){"use strict";var n=256,r=256,o=t("../util/clamp"),s=t("gl-matrix").vec4,a=t("gl-matrix").vec3,l=t("gl-matrix").mat4;function c(t,e,i){var n=t.createShader(e);if(t.shaderSource(n,i),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS))throw t.getShaderInfoLog(n);return n}function h(t,e,i,n,r){var o=c(t,t.VERTEX_SHADER,e),s=c(t,t.FRAGMENT_SHADER,i),a=t.createProgram();if(t.attachShader(a,o),t.attachShader(a,s),t.linkProgram(a),!t.getProgramParameter(a,t.LINK_STATUS))throw t.getProgramInfoLog(a);for(var l=0;l<n.length;l++){var h=n[l];if(a[h]=t.getAttribLocation(a,h),-1===a[h])throw new Error("Shader program has no "+h+" attribute")}for(var u=0;u<r.length;u++){var p=r[u];if(a[p]=t.getUniformLocation(a,p),-1===a[p])throw new Error("Shader program has no "+p+" uniform")}return a}function u(t,e){for(var i=t.getAttachedShaders(e),n=0;n<i.length;n++){var r=i[n];t.detachShader(e,r),t.deleteShader(r)}t.deleteProgram(e)}function p(t,e,i,n){var r=t.createBuffer();return t.bindBuffer(e,r),t.bufferData(e,n,i),r}function d(t,e,i,n){return{vertexIndices:p(t,t.ELEMENT_ARRAY_BUFFER,t.STATIC_DRAW,new Uint16Array(e)),vertexPositions:p(t,t.ARRAY_BUFFER,t.STATIC_DRAW,new Float32Array(i)),textureCoords:p(t,t.ARRAY_BUFFER,t.STATIC_DRAW,new Float32Array(n))}}function f(t,e){t.deleteBuffer(e.vertexIndices),t.deleteBuffer(e.vertexPositions),t.deleteBuffer(e.textureCoords)}function m(t,e){for(var i=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),n=0;n<i;n++)t.enableVertexAttribArray(n)}function v(t,e){for(var i=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),n=0;n<i;n++)t.disableVertexAttribArray(n)}function _(t,e,i){t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,i._texture),t.uniform1i(e.uSampler,0)}function g(t,e,i,o){var s=((i+1)*r-o)/(r*n);t.uniform1f(e.uDepth,s)}var y=1,b=s.create(),w=l.create();function x(t,e,i){var n=y;e&&null!=e.opacity&&(n=e.opacity),t.uniform1f(i.opacity,n);var r=b;e&&e.colorOffset&&(r=e.colorOffset),t.uniform4fv(i.colorOffset,r);var o=w;e&&e.colorMatrix&&(o=e.colorMatrix),t.uniformMatrix4fv(i.colorMatrix,!1,o)}l.identity(w);var E=a.create(),M=a.create();function T(t,e,i,n){if(0===i.x&&1===i.width&&0===i.y&&1===i.height)return t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight),void l.identity(n);var r=i.x,s=o(r,0,1),c=s-r,h=1-s,u=o(i.width-c,0,h),p=i.width-u,d=1-i.height-i.y,f=o(d,0,1),m=f-d,v=1-f,_=o(i.height-m,0,v),g=i.height-_;a.set(M,i.width/u,i.height/_,1),a.set(E,(p-c)/u,(g-m)/_,0),l.identity(n),l.translate(n,n,E),l.scale(n,n,M),t.viewport(t.drawingBufferWidth*s,t.drawingBufferHeight*f,t.drawingBufferWidth*u,t.drawingBufferHeight*_)}e.exports={createShaderProgram:h,destroyShaderProgram:u,createConstantBuffers:d,destroyConstantBuffers:f,enableAttributes:m,disableAttributes:v,setTexture:_,setDepth:g,setViewport:T,setupPixelEffectUniforms:x}},{"../util/clamp":75,"gl-matrix":3}],58:[function(t,e,i){"use strict";var n=t("./WebGlBase");function r(){this.constructor.super_.apply(this,arguments)}t("../util/inherits")(r,n),e.exports=r},{"../util/inherits":89,"./WebGlBase":56}],59:[function(t,e,i){"use strict";var n=t("gl-matrix").mat4,r=t("../util/clearOwnProperties"),o=t("./WebGlCommon"),s=o.createConstantBuffers,a=o.destroyConstantBuffers,l=o.createShaderProgram,c=o.destroyShaderProgram,h=o.enableAttributes,u=o.disableAttributes,p=o.setViewport,d=o.setupPixelEffectUniforms,f=o.setDepth,m=o.setTexture,v=t("../shaders/vertexEquirect"),_=t("../shaders/fragmentEquirect"),g=[0,1,2,0,2,3],y=[-1,-1,0,1,-1,0,1,1,0,-1,1,0],b=[0,0,1,0,1,1,0,1],w=["aVertexPosition"],x=["uDepth","uOpacity","uSampler","uInvProjMatrix","uViewportMatrix","uColorOffset","uColorMatrix","uTextureX","uTextureY","uTextureWidth","uTextureHeight"];function E(t){this.gl=t,this.invProjMatrix=n.create(),this.viewportMatrix=n.create(),this.constantBuffers=s(t,g,y,b),this.shaderProgram=l(t,v,_,w,x)}E.prototype.destroy=function(){a(this.gl,this.constantBuffers),c(this.gl,this.shaderProgram),r(this)},E.prototype.startLayer=function(t,e){var i=this.gl,r=this.shaderProgram,o=this.constantBuffers,s=this.invProjMatrix,a=this.viewportMatrix;i.useProgram(r),h(i,r),p(i,t,e,a),i.uniformMatrix4fv(r.uViewportMatrix,!1,a),i.bindBuffer(i.ARRAY_BUFFER,o.vertexPositions),i.vertexAttribPointer(r.aVertexPosition,3,i.FLOAT,i.FALSE,0,0),i.bindBuffer(i.ARRAY_BUFFER,o.textureCoords),n.copy(s,t.view().projection()),n.invert(s,s),i.uniformMatrix4fv(r.uInvProjMatrix,!1,s);var l=t.effects().textureCrop||{},c=null!=l.x?l.x:0,u=null!=l.y?l.y:0,f=null!=l.width?l.width:1,m=null!=l.height?l.height:1;i.uniform1f(r.uTextureX,c),i.uniform1f(r.uTextureY,u),i.uniform1f(r.uTextureWidth,f),i.uniform1f(r.uTextureHeight,m),d(i,t.effects(),{opacity:r.uOpacity,colorOffset:r.uColorOffset,colorMatrix:r.uColorMatrix})},E.prototype.endLayer=function(t,e){var i=this.gl,n=this.shaderProgram;u(i,n)},E.prototype.renderTile=function(t,e,i,n){var r=this.gl,o=this.shaderProgram,s=this.constantBuffers;f(r,o,n,t.z),m(r,o,e),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,s.vertexIndices),r.drawElements(r.TRIANGLES,g.length,r.UNSIGNED_SHORT,0)},e.exports=E},{"../shaders/fragmentEquirect":62,"../shaders/vertexEquirect":64,"../util/clearOwnProperties":76,"./WebGlCommon":57,"gl-matrix":3}],60:[function(t,e,i){"use strict";var n=t("./WebGlBase");function r(){this.constructor.super_.apply(this,arguments)}t("../util/inherits")(r,n),e.exports=r},{"../util/inherits":89,"./WebGlBase":56}],61:[function(t,e,i){"use strict";var n=t("./WebGlCube"),r=t("./WebGlFlat"),o=t("./WebGlEquirect");function s(t){if("webgl"!==t.type)throw new Error("Unknown stage type: "+t.type);t.registerRenderer("flat","flat",r),t.registerRenderer("cube","rectilinear",n),t.registerRenderer("equirect","rectilinear",o)}e.exports=s},{"./WebGlCube":58,"./WebGlEquirect":59,"./WebGlFlat":60}],62:[function(t,e,i){"use strict";e.exports=["#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float","#endif","uniform sampler2D uSampler;","uniform float uOpacity;","uniform float uTextureX;","uniform float uTextureY;","uniform float uTextureWidth;","uniform float uTextureHeight;","uniform vec4 uColorOffset;","uniform mat4 uColorMatrix;","varying vec4 vRay;","const float PI = 3.14159265358979323846264;","void main(void) {","  float r = inversesqrt(vRay.x * vRay.x + vRay.y * vRay.y + vRay.z * vRay.z);","  float phi  = acos(vRay.y * r);","  float theta = atan(vRay.x, -1.0*vRay.z);","  float s = 0.5 + 0.5 * theta / PI;","  float t = 1.0 - phi / PI;","  s = s * uTextureWidth + uTextureX;","  t = t * uTextureHeight + uTextureY;","  vec4 color = texture2D(uSampler, vec2(s, t)) * uColorMatrix + uColorOffset;","  gl_FragColor = vec4(color.rgba * uOpacity);","}"].join("\n")},{}],63:[function(t,e,i){"use strict";e.exports=["#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uSampler;","uniform float uOpacity;","uniform vec4 uColorOffset;","uniform mat4 uColorMatrix;","varying vec2 vTextureCoord;","void main(void) {","  vec4 color = texture2D(uSampler, vTextureCoord) * uColorMatrix + uColorOffset;","  gl_FragColor = vec4(color.rgba * uOpacity);","}"].join("\n")},{}],64:[function(t,e,i){"use strict";e.exports=["attribute vec3 aVertexPosition;","uniform float uDepth;","uniform mat4 uViewportMatrix;","uniform mat4 uInvProjMatrix;","varying vec4 vRay;","void main(void) {","  vRay = uInvProjMatrix * vec4(aVertexPosition.xy, 1.0, 1.0);","  gl_Position = uViewportMatrix * vec4(aVertexPosition.xy, uDepth, 1.0);","}"].join("\n")},{}],65:[function(t,e,i){"use strict";e.exports=["attribute vec3 aVertexPosition;","attribute vec2 aTextureCoord;","uniform float uDepth;","uniform mat4 uViewportMatrix;","uniform mat4 uProjMatrix;","varying vec2 vTextureCoord;","void main(void) {","  gl_Position = uViewportMatrix * uProjMatrix * vec4(aVertexPosition.xy, 0.0, 1.0);","  gl_Position.z = uDepth * gl_Position.w;","  vTextureCoord = aTextureCoord;","}"].join("\n")},{}],66:[function(t,e,i){"use strict";var n=t("minimal-event-emitter"),r=t("../NetworkError"),o=t("../collections/WorkPool"),s=t("../util/chain"),a=t("../util/delay"),l=t("../util/now"),c={x:"x",y:"y",z:"z",f:"face"},h="bdflru",u=4,p=1e4;function d(t,e){e=e||{},this._loadPool=new o({concurrency:e.concurrency||u}),this._retryDelay=e.retryDelay||p,this._retryMap={},this._sourceFromTile=t}function f(t){return new RegExp("\\{("+t+")\\}","g")}n(d),d.prototype.loadAsset=function(t,e,i){var n,o=this,c=this._retryDelay,h=this._retryMap,u=this._sourceFromTile(e),p=u.url,d=u.rect,f=t.loadImage.bind(t,p,d),m=function(t){return o._loadPool.push(f,(function(i,n){i?(i instanceof r&&(h[p]=l(),o.emit("networkError",i,e)),t(i,e)):(delete h[p],t(null,e,n))}))},v=h[p];if(null!=v){var _=l()-v;_<c?n=c-_:(n=0,delete h[p])}var g=a.bind(null,n);return s(g,m)(i)},d.fromString=function(t,e){var i=(e=e||{})&&e.cubeMapPreviewFaceOrder||h;return new d(e.cubeMapPreviewUrl?r:n,e);function n(e){var i=t;for(var n in c){var r=c[n],o=f(n),s=e.hasOwnProperty(r)?e[r]:"";i=i.replace(o,s)}return{url:i}}function r(t){return 0===t.z?o(t):n(t)}function o(t){var n=i.indexOf(t.face)/6;return{url:e.cubeMapPreviewUrl,rect:{x:0,y:n,width:1,height:1/6}}}},e.exports=d},{"../NetworkError":18,"../collections/WorkPool":32,"../util/chain":74,"../util/delay":84,"../util/now":93,"minimal-event-emitter":14}],67:[function(t,e,i){"use strict";function n(t){this._asset=t}n.prototype.asset=function(){return this._asset},n.prototype.loadAsset=function(t,e,i){var n=this,r=setTimeout((function(){i(null,e,n._asset)}),0);function o(){clearTimeout(r),i.apply(null,arguments)}return o},e.exports=n},{}],68:[function(t,e,i){"use strict";function n(){this._renderers={}}n.prototype.set=function(t,e,i){this._renderers[t]||(this._renderers[t]={}),this._renderers[t][e]=i},n.prototype.get=function(t,e){return this._renderers[t]&&this._renderers[t][e]||null},e.exports=n},{}],69:[function(t,e,i){"use strict";var n=t("minimal-event-emitter"),r=t("../collections/WorkQueue"),o=t("../util/calcRect"),s=t("../util/async"),a=t("../util/cancelize"),l=t("../util/clearOwnProperties"),c=t("./RendererRegistry");function h(t,e){return t.cmp(e)}function u(t,e){return-t.cmp(e)}function p(t){this._progressive=!(!t||!t.progressive),this._layers=[],this._renderers=[],this._tilesToLoad=[],this._tilesToRender=[],this._tmpVisible=[],this._tmpChildren=[],this._width=0,this._height=0,this._tmpRect={},this._tmpSize={},this._createTextureWorkQueue=new r,this._emitRenderInvalid=this._emitRenderInvalid.bind(this),this._rendererRegistry=new c}n(p),p.prototype.destroy=function(){this.removeAllLayers(),l(this)},p.prototype.registerRenderer=function(t,e,i){return this._rendererRegistry.set(t,e,i)},p.prototype.domElement=function(){throw new Error("Stage implementation must override domElement")},p.prototype.width=function(){return this._width},p.prototype.height=function(){return this._height},p.prototype.size=function(t){return(t=t||{}).width=this._width,t.height=this._height,t},p.prototype.setSize=function(t){this._width=t.width,this._height=t.height,this.setSizeForType(),this.emit("resize"),this._emitRenderInvalid()},p.prototype.setSizeForType=function(t){throw new Error("Stage implementation must override setSizeForType")},p.prototype.loadImage=function(){throw new Error("Stage implementation must override loadImage")},p.prototype._emitRenderInvalid=function(){this.emit("renderInvalid")},p.prototype.validateLayer=function(t){throw new Error("Stage implementation must override validateLayer")},p.prototype.listLayers=function(){return[].concat(this._layers)},p.prototype.hasLayer=function(t){return this._layers.indexOf(t)>=0},p.prototype.addLayer=function(t,e){if(this._layers.indexOf(t)>=0)throw new Error("Layer already in stage");if(null==e&&(e=this._layers.length),e<0||e>this._layers.length)throw new Error("Invalid layer position");this.validateLayer(t);var i=t.geometry().type,n=t.view().type,r=this._rendererRegistry.get(i,n);if(!r)throw new Error("No "+this.type+" renderer avaiable for "+i+" geometry and "+n+" view");var o=this.createRenderer(r);this._layers.splice(e,0,t),this._renderers.splice(e,0,o),t.addEventListener("viewChange",this._emitRenderInvalid),t.addEventListener("effectsChange",this._emitRenderInvalid),t.addEventListener("fixedLevelChange",this._emitRenderInvalid),t.addEventListener("textureStoreChange",this._emitRenderInvalid),this._emitRenderInvalid()},p.prototype.moveLayer=function(t,e){var i=this._layers.indexOf(t);if(i<0)throw new Error("No such layer in stage");if(e<0||e>=this._layers.length)throw new Error("Invalid layer position");t=this._layers.splice(i,1)[0];var n=this._renderers.splice(i,1)[0];this._layers.splice(e,0,t),this._renderers.splice(e,0,n),this._emitRenderInvalid()},p.prototype.removeLayer=function(t){var e=this._layers.indexOf(t);if(e<0)throw new Error("No such layer in stage");var i=this._layers.splice(e,1)[0],n=this._renderers.splice(e,1)[0];this.destroyRenderer(n),i.removeEventListener("viewChange",this._emitRenderInvalid),i.removeEventListener("effectsChange",this._emitRenderInvalid),i.removeEventListener("fixedLevelChange",this._emitRenderInvalid),i.removeEventListener("textureStoreChange",this._emitRenderInvalid),this._emitRenderInvalid()},p.prototype.removeAllLayers=function(){for(;this._layers.length>0;)this.removeLayer(this._layers[0])},p.prototype.startFrame=function(){throw new Error("Stage implementation must override startFrame")},p.prototype.endFrame=function(){throw new Error("Stage implementation must override endFrame")},p.prototype.render=function(){var t,e,i,n=this._tilesToLoad,r=this._tilesToRender,s=!0,a=this._width,l=this._height,c=this._tmpRect,h=this._tmpSize;if(!(a<=0||l<=0)){for(this.startFrame(),t=0;t<this._layers.length;t++)this._layers[t].textureStore().startFrame();for(t=0;t<this._layers.length;t++){var u,p,d=this._layers[t],f=d.effects(),m=d.view(),v=d.textureStore(),_=this._renderers[t],g=this._layers.length-t;if(o(a,l,f&&f.rect,c),!(c.width<=0||c.height<=0)){for(h.width=c.width*this._width,h.height=c.height*this._height,m.setSize(h),_.startLayer(d,c),i=this._collectTiles(d,v),e=0;e<n.length;e++)u=n[e],v.markTile(u);for(e=0;e<r.length;e++)u=r[e],p=v.texture(u),_.renderTile(u,p,d,g);d.emit("renderComplete",i),i||(s=!1),_.endLayer(d,c)}}for(t=0;t<this._layers.length;t++)this._layers[t].textureStore().endFrame();this.endFrame(),this.emit("renderComplete",s)}},p.prototype._collectTiles=function(t,e){var i=this._tilesToLoad,n=this._tilesToRender,r=this._tmpVisible;i.length=0,n.length=0,r.length=0,t.visibleTiles(r);for(var o=!0,s=0;s<r.length;s++){var a,l=r[s];this._collectTileToLoad(l),e.texture(l)?(a=!1,this._collectTileToRender(l)):(a=this._collectChildren(l,e),o=!1),this._collectParents(l,e,a)}return i.sort(h),n.sort(u),o},p.prototype._collectChildren=function(t,e){var i=this._tmpChildren,n=!0;do{if(i.length=0,!t.children(i))break;n=!1;for(var r=0;r<i.length;r++)t=i[r],e.texture(t)?(this._collectTileToLoad(t),this._collectTileToRender(t)):n=!0}while(n&&1===i.length);return n},p.prototype._collectParents=function(t,e,i){for(var n=this._progressive;(n||i)&&null!=(t=t.parent());){if(i)if(e.texture(t))this._collectTileToRender(t),i=!1;else if(!this._progressive)continue;this._collectTileToLoad(t)||(n=!1)}return i},p.prototype._collectTileToLoad=function(t){return this._collectTileIntoList(t,this._tilesToLoad)},p.prototype._collectTileToRender=function(t){return this._collectTileIntoList(t,this._tilesToRender)},p.prototype._collectTileIntoList=function(t,e){for(var i=!1,n=0;n<e.length;n++)if(t.equals(e[n])){i=!0;break}return i||e.push(t),!i},p.prototype.createTexture=function(t,e,i){var n=this;function r(){return new n.TextureClass(n,t,e)}var o=a(s(r));return this._createTextureWorkQueue.push(o,(function(n,r){i(n,t,e,r)}))},e.exports=p},{"../collections/WorkQueue":33,"../util/async":71,"../util/calcRect":72,"../util/cancelize":73,"../util/clearOwnProperties":76,"./RendererRegistry":68,"minimal-event-emitter":14}],70:[function(t,e,i){"use strict";var n=t("./Stage"),r=t("../loaders/HtmlImage"),o=t("bowser"),s=t("../util/inherits"),a=t("../util/pixelRatio"),l=t("../util/ispot"),c=t("../util/dom").setAbsolute,h=t("../util/dom").setFullSize,u=t("../util/clearOwnProperties"),p={videoUseTexImage2D:o.chrome};function d(t,e){var i={alpha:!0,premultipliedAlpha:!0,antialias:!(!e||!e.antialias),preserveDrawingBuffer:!(!e||!e.preserveDrawingBuffer)},n=t.getContext&&(t.getContext("webgl",i)||t.getContext("experimental-webgl",i));if(!n)throw new Error("Could not get WebGL context");return e.wrapContext&&(n=e.wrapContext(n)),n}function f(t){t=t||{};var e=this;this.constructor.super_.call(this,t),this._generateMipmaps=null!=t.generateMipmaps&&t.generateMipmaps,this._loader=new r(this),this._domElement=document.createElement("canvas"),c(this._domElement),h(this._domElement),this._gl=d(this._domElement,t),this._handleContextLoss=function(){e.emit("webglcontextlost"),e._gl=null},this._domElement.addEventListener("webglcontextlost",this._handleContextLoss),this._rendererInstances=[]}function m(t,e,i){this._stage=t,this._gl=t._gl,this._texture=null,this._timestamp=null,this._width=this._height=null,this.refresh(e,i)}s(f,n),f.prototype.destroy=function(){this._domElement.removeEventListener("webglcontextlost",this._handleContextLoss),this.constructor.super_.prototype.destroy.call(this)},f.prototype.domElement=function(){return this._domElement},f.prototype.webGlContext=function(){return this._gl},f.prototype.setSizeForType=function(){var t=a();this._domElement.width=t*this._width,this._domElement.height=t*this._height},f.prototype.loadImage=function(t,e,i){return this._loader.loadImage(t,e,i)},f.prototype.maxTextureSize=function(){return this._gl.getParameter(this._gl.MAX_TEXTURE_SIZE)},f.prototype.validateLayer=function(t){var e=t.geometry().maxTileSize(),i=this.maxTextureSize();if(e>i)throw new Error("Layer has level with tile size larger than maximum texture size ("+e+" vs. "+i+")")},f.prototype.createRenderer=function(t){for(var e=this._rendererInstances,i=0;i<e.length;i++)if(e[i]instanceof t)return e[i];var n=new t(this._gl);return e.push(n),n},f.prototype.destroyRenderer=function(t){var e=this._rendererInstances;if(this._renderers.indexOf(t)<0){t.destroy();var i=e.indexOf(t);i>=0&&e.splice(i,1)}},f.prototype.startFrame=function(){var t=this._gl;if(!t)throw new Error("Bad WebGL context - maybe context was lost?");t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),t.enable(t.DEPTH_TEST),t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA)},f.prototype.endFrame=function(){},f.prototype.takeSnapshot=function(t){"object"==typeof t&&null!=t||(t={});var e=t.quality;if(void 0===e&&(e=75),"number"!=typeof e||e<0||e>100)throw new Error("WebGLStage: Snapshot quality needs to be a number between 0 and 100");return this.render(),this._domElement.toDataURL("image/jpeg",e/100)},f.type=f.prototype.type="webgl",m.prototype.refresh=function(t,e){var i,n=this._gl,r=this._stage,o=e.timestamp();if(o!==this._timestamp){var s=e.element(),a=e.width(),c=e.height();if(a!==this._width||c!==this._height){var h=r.maxTextureSize();if(a>h)throw new Error("Texture width larger than max size ("+a+" vs. "+h+")");if(c>h)throw new Error("Texture height larger than max size ("+c+" vs. "+h+")");this._texture&&n.deleteTexture(i),i=this._texture=n.createTexture(),n.bindTexture(n.TEXTURE_2D,i),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!0),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,s)}else i=this._texture,n.bindTexture(n.TEXTURE_2D,i),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!0),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),s instanceof HTMLVideoElement&&p.videoUseTexImage2D?n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,s):n.texSubImage2D(n.TEXTURE_2D,0,0,0,n.RGBA,n.UNSIGNED_BYTE,s);r._generateMipmaps&&l(a)&&l(c)?(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR_MIPMAP_LINEAR),n.generateMipmap(n.TEXTURE_2D)):(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR)),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.bindTexture(n.TEXTURE_2D,null),this._timestamp=o,this._width=a,this._height=c}},m.prototype.destroy=function(){this._texture&&this._gl.deleteTexture(this._texture),u(this)},f.TextureClass=f.prototype.TextureClass=m,e.exports=f},{"../loaders/HtmlImage":55,"../util/clearOwnProperties":76,"../util/dom":85,"../util/inherits":89,"../util/ispot":90,"../util/pixelRatio":95,"./Stage":69,bowser:1}],71:[function(t,e,i){"use strict";function n(t){return function(e){var i,n;try{n=t()}catch(t){i=t}finally{i?e(i):e(null,n)}}}e.exports=n},{}],72:[function(t,e,i){"use strict";function n(t,e,i,n){var r,o,s,a;return n=n||{},r=null!=i&&null!=i.absoluteWidth?i.absoluteWidth/t:null!=i&&null!=i.relativeWidth?i.relativeWidth:1,o=i&&null!=i.absoluteHeight?i.absoluteHeight/e:null!=i&&null!=i.relativeHeight?i.relativeHeight:1,s=null!=i&&null!=i.absoluteX?i.absoluteX/t:null!=i&&null!=i.relativeX?i.relativeX:0,a=null!=i&&null!=i.absoluteY?i.absoluteY/e:null!=i&&null!=i.relativeY?i.relativeY:0,n.x=s,n.y=a,n.width=r,n.height=o,n}e.exports=n},{}],73:[function(t,e,i){"use strict";var n=t("./once");function r(t){return function(){if(!arguments.length)throw new Error("cancelized: expected at least one argument");var e=Array.prototype.slice.call(arguments,0),i=e[e.length-1]=n(e[e.length-1]);function r(){i.apply(null,arguments)}return t.apply(null,e),r}}e.exports=r},{"./once":94}],74:[function(t,e,i){"use strict";var n=t("./noop");function r(){var t=Array.prototype.slice.call(arguments,0);return function(){var e=t.slice(0),i=null,r=null,o=arguments.length?Array.prototype.slice.call(arguments,0,arguments.length-1):[],s=arguments.length?arguments[arguments.length-1]:n;function a(){if(arguments[0])return i=r=null,void s.apply(null,arguments);if(!e.length)return i=r=null,void s.apply(null,arguments);var t=i=e.shift(),n=Array.prototype.slice.call(arguments,1);n.push(a);var o=i.apply(null,n);if(t===i){if("function"!=typeof o)throw new Error("chain: chaining on non-cancellable function");r=o}}function l(){r&&r.apply(null,arguments)}return o.unshift(null),a.apply(null,o),l}}e.exports=r},{"./noop":92}],75:[function(t,e,i){"use strict";function n(t,e,i){return Math.min(Math.max(t,e),i)}e.exports=n},{}],76:[function(t,e,i){"use strict";function n(t){for(var e in t)t.hasOwnProperty(e)&&(t[e]=void 0)}e.exports=n},{}],77:[function(t,e,i){"use strict";function n(t,e){return t<e?-1:t>e?1:0}e.exports=n},{}],78:[function(t,e,i){"use strict";function n(){var t=arguments;return function(e){for(var i=e,n=0;n<t.length;n++)i=t[n].call(null,i);return i}}e.exports=n},{}],79:[function(t,e,i){"use strict";function n(t,e,i){return 2*Math.atan(i*Math.tan(t/2)/e)}function r(t,e,i){return n(t,e,i)}function o(t,e,i){return n(t,e,Math.sqrt(e*e+i*i))}function s(t,e,i){return n(t,i,e)}function a(t,e,i){return n(t,i,Math.sqrt(e*e+i*i))}function l(t,e,i){return n(t,Math.sqrt(e*e+i*i),e)}function c(t,e,i){return n(t,Math.sqrt(e*e+i*i),i)}e.exports={convert:n,htov:r,htod:o,vtoh:s,vtod:a,dtoh:l,dtov:c}},{}],80:[function(t,e,i){"use strict";function n(t){return t.toPrecision(15)}e.exports=n},{}],81:[function(t,e,i){"use strict";function n(t,e){for(var i in e)i in t||(t[i]=e[i]);return t}e.exports=n},{}],82:[function(t,e,i){"use strict";function n(t,e){function i(){e&&e.length>0?t.apply(null,e):t()}setTimeout(i,0)}e.exports=n},{}],83:[function(t,e,i){"use strict";function n(t){return t*Math.PI/180}e.exports=n},{}],84:[function(t,e,i){"use strict";function n(t,e){var i=null;function n(){null!=i&&(i=null,e(null))}function r(){null!=i&&(clearTimeout(i),i=null,e.apply(null,arguments))}return i=setTimeout(n,t),r}e.exports=n},{}],85:[function(t,e,i){"use strict";function n(t){for(var e=document.documentElement.style,i=["Moz","Webkit","Khtml","O","ms"],n=0;n<i.length;n++){var r=i[n]+(t[0].toUpperCase()+t.slice(1));if(r in e)return r}return t}function r(t){var e=n(t);return function(t){return t.style[e]}}function o(t){var e=n(t);return function(t,i){return t.style[e]=i}}var s=o("transform"),a=o("transformOrigin");function l(t){s(t,"translateZ(0)")}function c(t){a(t,"0 0 0")}function h(t){t.style.position="absolute"}function u(t,e,i){t.style.left=e+"px",t.style.top=i+"px"}function p(t,e,i){t.style.width=e+"px",t.style.height=i+"px"}function d(t){t.style.width=t.style.height=0}function f(t){t.style.width=t.style.height="100%"}function m(t){t.style.overflow="hidden"}function v(t){t.style.overflow="visible"}function _(t){t.style.pointerEvents="none"}e.exports={prefixProperty:n,getWithVendorPrefix:r,setWithVendorPrefix:o,setTransform:s,setTransformOrigin:a,setNullTransform:l,setNullTransformOrigin:c,setAbsolute:h,setPixelPosition:u,setPixelSize:p,setNullSize:d,setFullSize:f,setOverflowHidden:m,setOverflowVisible:v,setNoPointerEvents:_}},{}],86:[function(t,e,i){"use strict";function n(t,e){for(var i in e)t[i]=e[i];return t}e.exports=n},{}],87:[function(t,e,n){(function(t){(function(){"use strict";var i="undefined"!=typeof window?window:"undefined"!=typeof self?self:void 0!==t?t:null;e.exports=i}).call(this)}).call(this,void 0!==i.g?i.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],88:[function(t,e,i){"use strict";function n(){for(var t=0,e=0;e<arguments.length;e++){var i=arguments[e];t+=i,t+=i<<10,t^=i>>6}return t+=t<<3,t^=t>>11,(t+=t<<15)>=0?t:-t}e.exports=n},{}],89:[function(t,e,i){"use strict";function n(t,e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}e.exports=n},{}],90:[function(t,e,i){"use strict";function n(t){return!(t&t-1)}e.exports=n},{}],91:[function(t,e,i){"use strict";function n(t,e){return(+t%(e=+e)+e)%e}e.exports=n},{}],92:[function(t,e,i){"use strict";function n(){}e.exports=n},{}],93:[function(t,e,i){"use strict";function n(){return"undefined"!=typeof performance&&performance.now?function(){return performance.now()}:function(){return Date.now()}}e.exports=n()},{}],94:[function(t,e,i){"use strict";function n(t){var e,i=!1;return function(){return i||(i=!0,e=t.apply(null,arguments)),e}}e.exports=n},{}],95:[function(t,e,i){"use strict";var n=1;function r(){if("undefined"!=typeof window){if(window.devicePixelRatio)return window.devicePixelRatio;var t=window.screen;if(t&&t.deviceXDPI&&t.logicalXDPI)return t.deviceXDPI/t.logicalXDPI;if(t&&t.systemXDPI&&t.logicalXDPI)return t.systemXDPI/t.logicalXDPI}return n}e.exports=r},{}],96:[function(t,e,i){"use strict";var n=t("./dom").setTransform,r=t("./decimal");function o(t,e,i,o){o=o||"";var s="translateX("+r(e)+"px) translateY("+r(i)+"px) translateZ(0) "+o;n(t,s)}e.exports=o},{"./decimal":80,"./dom":85}],97:[function(t,e,i){"use strict";function n(t){return 180*t/Math.PI}e.exports=n},{}],98:[function(t,e,i){"use strict";function n(t){return"number"==typeof t&&isFinite(t)}e.exports=n},{}],99:[function(t,e,i){"use strict";var n=t("./noop");function r(t){return function(){var e=arguments.length?Array.prototype.slice.call(arguments,0,arguments.length-1):[],i=arguments.length?arguments[arguments.length-1]:n,r=null,o=!1;function s(){!arguments[0]||o?i.apply(null,arguments):r=t.apply(null,e)}return e.push(s),s(!0),function(){o=!0,r.apply(null,arguments)}}}e.exports=r},{"./noop":92}],100:[function(t,e,i){"use strict";var n=t("./now");function r(t,e,i){var r=!1,o=n();function s(){if(!r){var a=(n()-o)/t;a<1?(e(a),requestAnimationFrame(s)):(e(1),i())}}return e(0),requestAnimationFrame(s),function(){r=!0,i.apply(null,arguments)}}e.exports=r},{"./now":93}],101:[function(t,e,i){"use strict";function n(t){var e=typeof t;if("object"===e){if(null===t)return"null";if("[object Array]"===Object.prototype.toString.call(t))return"array";if("[object RegExp]"===Object.prototype.toString.call(t))return"regexp"}return e}e.exports=n},{}],102:[function(t,e,i){"use strict";var n=t("minimal-event-emitter"),r=t("gl-matrix").mat4,o=t("gl-matrix").vec4,s=t("../util/pixelRatio"),a=t("../util/real"),l=t("../util/clamp"),c=t("../util/clearOwnProperties"),h=0,u=0,p=.5,d=.5,f=1,m=[1,0,1,0],v=[-1,-1,1,1],_=1e-6;function g(t,e){if(!t||null==t.mediaAspectRatio)throw new Error("mediaAspectRatio must be defined");this._x=t&&null!=t.x?t.x:p,this._y=t&&null!=t.y?t.y:d,this._zoom=t&&null!=t.zoom?t.zoom:f,this._mediaAspectRatio=t.mediaAspectRatio,this._width=t&&null!=t.width?t.width:h,this._height=t&&null!=t.height?t.height:u,this._limiter=e||null,this._projMatrix=r.create(),this._invProjMatrix=r.create(),this._frustum=[0,0,0,0],this._projectionChanged=!0,this._params={},this._vec=o.create(),this._update()}n(g),g.prototype.destroy=function(){c(this)},g.prototype.x=function(){return this._x},g.prototype.y=function(){return this._y},g.prototype.zoom=function(){return this._zoom},g.prototype.mediaAspectRatio=function(){return this._mediaAspectRatio},g.prototype.width=function(){return this._width},g.prototype.height=function(){return this._height},g.prototype.size=function(t){return(t=t||{}).width=this._width,t.height=this._height,t},g.prototype.parameters=function(t){return(t=t||{}).x=this._x,t.y=this._y,t.zoom=this._zoom,t.mediaAspectRatio=this._mediaAspectRatio,t},g.prototype.limiter=function(){return this._limiter},g.prototype.setX=function(t){this._resetParams(),this._params.x=t,this._update(this._params)},g.prototype.setY=function(t){this._resetParams(),this._params.y=t,this._update(this._params)},g.prototype.setZoom=function(t){this._resetParams(),this._params.zoom=t,this._update(this._params)},g.prototype.offsetX=function(t){this.setX(this._x+t)},g.prototype.offsetY=function(t){this.setY(this._y+t)},g.prototype.offsetZoom=function(t){this.setZoom(this._zoom+t)},g.prototype.setMediaAspectRatio=function(t){this._resetParams(),this._params.mediaAspectRatio=t,this._update(this._params)},g.prototype.setSize=function(t){this._resetParams(),this._params.width=t.width,this._params.height=t.height,this._update(this._params)},g.prototype.setParameters=function(t){this._resetParams(),this._params.x=t.x,this._params.y=t.y,this._params.zoom=t.zoom,this._params.mediaAspectRatio=t.mediaAspectRatio,this._update(this._params)},g.prototype.setLimiter=function(t){this._limiter=t||null,this._update()},g.prototype._resetParams=function(){var t=this._params;t.x=null,t.y=null,t.zoom=null,t.mediaAspectRatio=null,t.width=null,t.height=null},g.prototype._update=function(t){null==t&&(this._resetParams(),t=this._params);var e=this._x,i=this._y,n=this._zoom,r=this._mediaAspectRatio,o=this._width,s=this._height;if(t.x=null!=t.x?t.x:e,t.y=null!=t.y?t.y:i,t.zoom=null!=t.zoom?t.zoom:n,t.mediaAspectRatio=null!=t.mediaAspectRatio?t.mediaAspectRatio:r,t.width=null!=t.width?t.width:o,t.height=null!=t.height?t.height:s,this._limiter&&!(t=this._limiter(t)))throw new Error("Bad view limiter");var c=t.x,h=t.y,u=t.zoom,p=t.mediaAspectRatio,d=t.width,f=t.height;if(!(a(c)&&a(h)&&a(u)&&a(p)&&a(d)&&a(f)))throw new Error("Bad view - suspect a broken limiter");u=l(u,_,1/0),this._x=c,this._y=h,this._zoom=u,this._mediaAspectRatio=p,this._width=d,this._height=f,c===e&&h===i&&u===n&&p===r&&d===o&&f===s||(this._projectionChanged=!0,this.emit("change")),d===o&&f===s||this.emit("resize")},g.prototype._zoomX=function(){return this._zoom},g.prototype._zoomY=function(){var t=this._mediaAspectRatio,e=this._width/this._height,i=this._zoom,n=i*t/e;return isNaN(n)&&(n=i),n},g.prototype.updateWithControlParameters=function(t){var e=this.zoom(),i=this._zoomX(),n=this._zoomY();this.offsetX(t.axisScaledX*i+t.x*e),this.offsetY(t.axisScaledY*n+t.y*e),this.offsetZoom(t.zoom*e)},g.prototype._updateProjection=function(){var t=this._projMatrix,e=this._invProjMatrix,i=this._frustum;if(this._projectionChanged){var n=this._x,o=this._y,s=this._zoomX(),a=this._zoomY(),l=i[0]=.5-o+.5*a,c=i[1]=n-.5+.5*s,h=i[2]=.5-o-.5*a,u=i[3]=n-.5-.5*s;r.ortho(t,u,c,h,l,-1,1),r.invert(e,t),this._projectionChanged=!1}},g.prototype.projection=function(){return this._updateProjection(),this._projMatrix},g.prototype.inverseProjection=function(){return this._updateProjection(),this._invProjMatrix},g.prototype.intersects=function(t){this._updateProjection();for(var e=this._frustum,i=0;i<e.length;i++){for(var n=e[i],r=m[i],o=v[i],s=!1,a=0;a<t.length;a++){var l=t[a];if(o<0&&l[r]<n||o>0&&l[r]>n){s=!0;break}}if(!s)return!1}return!0},g.prototype.selectLevel=function(t){for(var e=s()*this.width(),i=this._zoom,n=0;n<t.length;n++){var r=t[n];if(i*r.width()>=e)return r}return t[t.length-1]},g.prototype.coordinatesToScreen=function(t,e){var i=this._vec;e||(e={});var n=this._width,r=this._height;if(n<=0||r<=0)return e.x=null,e.y=null,null;var s=t&&null!=t.x?t.x:p,a=t&&null!=t.y?t.y:d;o.set(i,s-.5,.5-a,-1,1),o.transformMat4(i,i,this.projection());for(var l=0;l<3;l++)i[l]/=i[3];return e.x=n*(i[0]+1)/2,e.y=r*(1-i[1])/2,e},g.prototype.screenToCoordinates=function(t,e){var i=this._vec;e||(e={});var n=this._width,r=this._height,s=2*t.x/n-1,a=1-2*t.y/r;return o.set(i,s,a,1,1),o.transformMat4(i,i,this.inverseProjection()),e.x=.5+i[0],e.y=.5-i[1],e},g.limit={x:function(t,e){return function(i){return i.x=l(i.x,t,e),i}},y:function(t,e){return function(i){return i.y=l(i.y,t,e),i}},zoom:function(t,e){return function(i){return i.zoom=l(i.zoom,t,e),i}},resolution:function(t){return function(e){if(e.width<=0||e.height<=0)return e;var i=e.width,n=s()*i/t;return e.zoom=l(e.zoom,n,1/0),e}},visibleX:function(t,e){return function(i){var n=e-t;i.zoom>n&&(i.zoom=n);var r=t+.5*i.zoom,o=e-.5*i.zoom;return i.x=l(i.x,r,o),i}},visibleY:function(t,e){return function(i){if(i.width<=0||i.height<=0)return i;var n=i.width/i.height/i.mediaAspectRatio,r=(e-t)*n;i.zoom>r&&(i.zoom=r);var o=t+.5*i.zoom/n,s=e-.5*i.zoom/n;return i.y=l(i.y,o,s),i}},letterbox:function(){return function(t){if(t.width<=0||t.height<=0)return t;var e,i,n,r,o=t.width/t.height,s=1,a=o/t.mediaAspectRatio;return t.mediaAspectRatio>=o&&(t.zoom=Math.min(t.zoom,s)),t.mediaAspectRatio<=o&&(t.zoom=Math.min(t.zoom,a)),t.zoom>s?e=i=.5:(e=0+.5*t.zoom/s,i=1-.5*t.zoom/s),t.zoom>a?n=r=.5:(n=0+.5*t.zoom/a,r=1-.5*t.zoom/a),t.x=l(t.x,e,i),t.y=l(t.y,n,r),t}}},g.type=g.prototype.type="flat",e.exports=g},{"../util/clamp":75,"../util/clearOwnProperties":76,"../util/pixelRatio":95,"../util/real":98,"gl-matrix":3,"minimal-event-emitter":14}],103:[function(t,e,i){"use strict";var n=t("minimal-event-emitter"),r=t("gl-matrix").mat4,o=t("gl-matrix").vec4,s=t("../util/pixelRatio"),a=t("../util/convertFov"),l=t("../util/mod"),c=t("../util/real"),h=t("../util/clamp"),u=t("../util/decimal"),p=t("../util/compose"),d=t("../util/clearOwnProperties"),f=0,m=0,v=0,_=0,g=0,y=Math.PI/4,b=0,w=0,x=1e-6;function E(t,e){this._yaw=t&&null!=t.yaw?t.yaw:v,this._pitch=t&&null!=t.pitch?t.pitch:_,this._roll=t&&null!=t.roll?t.roll:g,this._fov=t&&null!=t.fov?t.fov:y,this._width=t&&null!=t.width?t.width:f,this._height=t&&null!=t.height?t.height:m,this._projectionCenterX=t&&null!=t.projectionCenterX?t.projectionCenterX:b,this._projectionCenterY=t&&null!=t.projectionCenterY?t.projectionCenterY:w,this._limiter=e||null,this._projMatrix=r.create(),this._invProjMatrix=r.create(),this._frustum=[o.create(),o.create(),o.create(),o.create(),o.create()],this._projectionChanged=!0,this._params={},this._fovs={},this._tmpVec=o.create(),this._update()}n(E),E.prototype.destroy=function(){d(this)},E.prototype.yaw=function(){return this._yaw},E.prototype.pitch=function(){return this._pitch},E.prototype.roll=function(){return this._roll},E.prototype.projectionCenterX=function(){return this._projectionCenterX},E.prototype.projectionCenterY=function(){return this._projectionCenterY},E.prototype.fov=function(){return this._fov},E.prototype.width=function(){return this._width},E.prototype.height=function(){return this._height},E.prototype.size=function(t){return(t=t||{}).width=this._width,t.height=this._height,t},E.prototype.parameters=function(t){return(t=t||{}).yaw=this._yaw,t.pitch=this._pitch,t.roll=this._roll,t.fov=this._fov,t},E.prototype.limiter=function(){return this._limiter},E.prototype.setYaw=function(t){this._resetParams(),this._params.yaw=t,this._update(this._params)},E.prototype.setPitch=function(t){this._resetParams(),this._params.pitch=t,this._update(this._params)},E.prototype.setRoll=function(t){this._resetParams(),this._params.roll=t,this._update(this._params)},E.prototype.setFov=function(t){this._resetParams(),this._params.fov=t,this._update(this._params)},E.prototype.setProjectionCenterX=function(t){this._resetParams(),this._params.projectionCenterX=t,this._update(this._params)},E.prototype.setProjectionCenterY=function(t){this._resetParams(),this._params.projectionCenterY=t,this._update(this._params)},E.prototype.offsetYaw=function(t){this.setYaw(this._yaw+t)},E.prototype.offsetPitch=function(t){this.setPitch(this._pitch+t)},E.prototype.offsetRoll=function(t){this.setRoll(this._roll+t)},E.prototype.offsetFov=function(t){this.setFov(this._fov+t)},E.prototype.setSize=function(t){this._resetParams(),this._params.width=t.width,this._params.height=t.height,this._update(this._params)},E.prototype.setParameters=function(t){this._resetParams(),this._params.yaw=t.yaw,this._params.pitch=t.pitch,this._params.roll=t.roll,this._params.fov=t.fov,this._params.projectionCenterX=t.projectionCenterX,this._params.projectionCenterY=t.projectionCenterY,this._update(this._params)},E.prototype.setLimiter=function(t){this._limiter=t||null,this._update()},E.prototype._resetParams=function(){var t=this._params;t.yaw=null,t.pitch=null,t.roll=null,t.fov=null,t.width=null,t.height=null},E.prototype._update=function(t){null==t&&(this._resetParams(),t=this._params);var e=this._yaw,i=this._pitch,n=this._roll,r=this._fov,o=this._projectionCenterX,s=this._projectionCenterY,a=this._width,l=this._height;if(t.yaw=null!=t.yaw?t.yaw:e,t.pitch=null!=t.pitch?t.pitch:i,t.roll=null!=t.roll?t.roll:n,t.fov=null!=t.fov?t.fov:r,t.width=null!=t.width?t.width:a,t.height=null!=t.height?t.height:l,t.projectionCenterX=null!=t.projectionCenterX?t.projectionCenterX:o,t.projectionCenterY=null!=t.projectionCenterY?t.projectionCenterY:s,this._limiter&&!(t=this._limiter(t)))throw new Error("Bad view limiter");var h=(t=this._normalize(t)).yaw,u=t.pitch,p=t.roll,d=t.fov,f=t.width,m=t.height,v=t.projectionCenterX,_=t.projectionCenterY;if(!(c(h)&&c(u)&&c(p)&&c(d)&&c(f)&&c(m)&&c(v)&&c(_)))throw new Error("Bad view - suspect a broken limiter");this._yaw=h,this._pitch=u,this._roll=p,this._fov=d,this._width=f,this._height=m,this._projectionCenterX=v,this._projectionCenterY=_,h===e&&u===i&&p===n&&d===r&&f===a&&m===l&&v===o&&_===s||(this._projectionChanged=!0,this.emit("change")),f===a&&m===l||this.emit("resize")},E.prototype._normalize=function(t){this._normalizeCoordinates(t);var e=a.htov(Math.PI,t.width,t.height),i=isNaN(e)?Math.PI:Math.min(Math.PI,e);return t.fov=h(t.fov,x,i-x),t},E.prototype._normalizeCoordinates=function(t){return"yaw"in t&&(t.yaw=l(t.yaw-Math.PI,-2*Math.PI)+Math.PI),"pitch"in t&&(t.pitch=l(t.pitch-Math.PI,-2*Math.PI)+Math.PI),"roll"in t&&(t.roll=l(t.roll-Math.PI,-2*Math.PI)+Math.PI),t},E.prototype.normalizeToClosest=function(t,e){var i=this._yaw,n=this._pitch,r=t.yaw,o=t.pitch,s=r-2*Math.PI,a=r+2*Math.PI;Math.abs(s-i)<Math.abs(r-i)?r=s:Math.abs(a-i)<Math.abs(r-i)&&(r=a);var l=o-2*Math.PI,c=o+2*Math.PI;return Math.abs(l-n)<Math.abs(o-n)?o=l:Math.abs(l-n)<Math.abs(o-n)&&(o=c),(e=e||{}).yaw=r,e.pitch=o,e},E.prototype.updateWithControlParameters=function(t){var e=this._fov,i=a.vtoh(e,this._width,this._height);isNaN(i)&&(i=e),this.offsetYaw(t.axisScaledX*i+2*t.x*i+t.yaw),this.offsetPitch(t.axisScaledY*e+2*t.y*i+t.pitch),this.offsetRoll(-t.roll),this.offsetFov(t.zoom*e)},E.prototype._updateProjection=function(){var t=this._projMatrix,e=this._invProjMatrix,i=this._frustum;if(this._projectionChanged){var n=this._width,o=this._height,s=this._fov,l=a.vtoh(s,n,o),c=n/o,h=this._projectionCenterX,u=this._projectionCenterY;if(0!==h||0!==u){var p=Math.atan(2*h*Math.tan(l/2)),d=Math.atan(2*u*Math.tan(s/2)),f=this._fovs;f.leftDegrees=180*(l/2+p)/Math.PI,f.rightDegrees=180*(l/2-p)/Math.PI,f.upDegrees=180*(s/2+d)/Math.PI,f.downDegrees=180*(s/2-d)/Math.PI,r.perspectiveFromFieldOfView(t,f,-1,1)}else r.perspective(t,s,c,-1,1);r.rotateZ(t,t,this._roll),r.rotateX(t,t,this._pitch),r.rotateY(t,t,this._yaw),r.invert(e,t),this._matrixToFrustum(t,i),this._projectionChanged=!1}},E.prototype._matrixToFrustum=function(t,e){o.set(e[0],t[3]+t[0],t[7]+t[4],t[11]+t[8],0),o.set(e[1],t[3]-t[0],t[7]-t[4],t[11]-t[8],0),o.set(e[2],t[3]+t[1],t[7]+t[5],t[11]+t[9],0),o.set(e[3],t[3]-t[1],t[7]-t[5],t[11]-t[9],0),o.set(e[4],t[3]+t[2],t[7]+t[6],t[11]+t[10],0)},E.prototype.projection=function(){return this._updateProjection(),this._projMatrix},E.prototype.inverseProjection=function(){return this._updateProjection(),this._invProjMatrix},E.prototype.intersects=function(t){this._updateProjection();for(var e=this._frustum,i=this._tmpVec,n=0;n<e.length;n++){for(var r=e[n],s=!1,a=0;a<t.length;a++){var l=t[a];o.set(i,l[0],l[1],l[2],0),o.dot(r,i)>=0&&(s=!0)}if(!s)return!1}return!0},E.prototype.selectLevel=function(t){for(var e=s()*this._height,i=Math.tan(.5*this._fov),n=0;n<t.length;n++){var r=t[n];if(i*r.height()>=e)return r}return t[t.length-1]},E.prototype.coordinatesToScreen=function(t,e){var i=this._tmpVec;e||(e={});var n=this._width,r=this._height;if(n<=0||r<=0)return e.x=null,e.y=null,null;var s=t.yaw,a=t.pitch,l=Math.sin(s)*Math.cos(a),c=-Math.sin(a),h=-Math.cos(s)*Math.cos(a);return o.set(i,l,c,h,1),o.transformMat4(i,i,this.projection()),i[3]>=0?(e.x=n*(i[0]/i[3]+1)/2,e.y=r*(1-i[1]/i[3])/2,e):(e.x=null,e.y=null,null)},E.prototype.screenToCoordinates=function(t,e){var i=this._tmpVec;e||(e={});var n=this._width,r=this._height,s=2*t.x/n-1,a=1-2*t.y/r;o.set(i,s,a,1,1),o.transformMat4(i,i,this.inverseProjection());var l=Math.sqrt(i[0]*i[0]+i[1]*i[1]+i[2]*i[2]);return e.yaw=Math.atan2(i[0],-i[2]),e.pitch=Math.acos(i[1]/l)-Math.PI/2,this._normalizeCoordinates(e),e},E.prototype.coordinatesToPerspectiveTransform=function(t,e,i){i=i||"";var n=this._height,r=this._width,o=this._fov,s=.5*n/Math.tan(o/2),a="";return a+="translateX("+u(r/2)+"px) ",a+="translateY("+u(n/2)+"px) ",a+="translateX(-50%) translateY(-50%) ",a+="perspective("+u(s)+"px) ",a+="translateZ("+u(s)+"px) ",a+="rotateZ("+u(-this._roll)+"rad) ",a+="rotateX("+u(-this._pitch)+"rad) ",a+="rotateY("+u(this._yaw)+"rad) ",a+="rotateY("+u(-t.yaw)+"rad) ",a+="rotateX("+u(t.pitch)+"rad) ",a+="translateZ("+u(-e)+"px) ",a+=i+" "},E.limit={yaw:function(t,e){return function(i){return i.yaw=h(i.yaw,t,e),i}},pitch:function(t,e){return function(i){return i.pitch=h(i.pitch,t,e),i}},roll:function(t,e){return function(i){return i.roll=h(i.roll,t,e),i}},hfov:function(t,e){return function(i){var n=i.width,r=i.height;if(n>0&&r>0){var o=a.htov(t,n,r),s=a.htov(e,n,r);i.fov=h(i.fov,o,s)}return i}},vfov:function(t,e){return function(i){return i.fov=h(i.fov,t,e),i}},resolution:function(t){return function(e){var i=e.height;if(i){var n=s()*i,r=2*Math.atan(n/t);e.fov=h(e.fov,r,1/0)}return e}},traditional:function(t,e,i){return i=null!=i?i:e,p(E.limit.resolution(t),E.limit.vfov(0,e),E.limit.hfov(0,i),E.limit.pitch(-Math.PI/2,Math.PI/2))}},E.type=E.prototype.type="rectilinear",e.exports=E},{"../util/clamp":75,"../util/clearOwnProperties":76,"../util/compose":78,"../util/convertFov":79,"../util/decimal":80,"../util/mod":91,"../util/pixelRatio":95,"../util/real":98,"gl-matrix":3,"minimal-event-emitter":14}]},{},[54])(54)},691:t=>{!function(){"use strict";var e="undefined"!=typeof window&&void 0!==window.document?window.document:{},i=t.exports,n="undefined"!=typeof Element&&"ALLOW_KEYBOARD_INPUT"in Element,r=function(){for(var t,i=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],n=0,r=i.length,o={};n<r;n++)if((t=i[n])&&t[1]in e){for(n=0;n<t.length;n++)o[i[0][n]]=t[n];return o}return!1}(),o={change:r.fullscreenchange,error:r.fullscreenerror},s={request:function(t){return new Promise(function(i){var o=r.requestFullscreen,s=function(){this.off("change",s),i()}.bind(this);t=t||e.documentElement,/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)?t[o]():t[o](n?Element.ALLOW_KEYBOARD_INPUT:{}),this.on("change",s)}.bind(this))},exit:function(){return new Promise(function(t){var i=function(){this.off("change",i),t()}.bind(this);e[r.exitFullscreen](),this.on("change",i)}.bind(this))},toggle:function(t){return this.isFullscreen?this.exit():this.request(t)},onchange:function(t){this.on("change",t)},onerror:function(t){this.on("error",t)},on:function(t,i){var n=o[t];n&&e.addEventListener(n,i,!1)},off:function(t,i){var n=o[t];n&&e.removeEventListener(n,i,!1)},raw:r};r?(Object.defineProperties(s,{isFullscreen:{get:function(){return Boolean(e[r.fullscreenElement])}},element:{enumerable:!0,get:function(){return e[r.fullscreenElement]}},enabled:{enumerable:!0,get:function(){return Boolean(e[r.fullscreenEnabled])}}}),i?t.exports=s:window.screenfull=s):i?t.exports=!1:window.screenfull=!1}()}},e={};function i(n){var r=e[n];if(void 0!==r)return r.exports;var o=e[n]={exports:{}};return t[n].call(o.exports,o,o.exports,i),o.exports}i.d=(t,e)=>{for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{"use strict";const t=JSON.parse('{"img-01":{"id":"img-01","name":"Grand Foyer","level":"lm2","map-position":[51,49],"map-role":"r-expo","hotspots":[{"type":"icon","yaw":-23.47,"pitch":0.66,"rotation":0,"icon":"fa-solid fa-restroom"},{"type":"nav","yaw":-151,"pitch":1.63,"rotation":0,"target":["img-07"]},{"type":"nav","yaw":10,"pitch":1.85,"rotation":0,"target":["img-02"]},{"type":"nav","yaw":29.02,"pitch":2.28,"rotation":0,"target":["img-03","img-04"]},{"type":"nav","yaw":-92,"pitch":2.9,"rotation":0,"target":["img-05"]},{"type":"nav","yaw":176.8,"pitch":0.96,"rotation":0,"target":["img-06"]},{"type":"stairs","yaw":0.165,"pitch":-2.8,"rotation":0,"target":"str-mezzanine"}]},"img-02":{"id":"img-02","name":"Vestiaires du Grand Auditorium","level":"lm2","map-position":[56,85],"map-role":"r-break","hotspots":[{"type":"nav","yaw":127.3,"pitch":1.65,"rotation":0,"target":["img-01"]},{"type":"nav","yaw":86.9,"pitch":5.2,"rotation":0,"target":["img-03"]}]},"img-03":{"id":"img-03","name":"Grand Auditorium","level":"lm2","map-position":[78,65],"map-role":"r-pres","hotspots":[{"type":"nav","yaw":39.03,"pitch":8.56,"rotation":0,"target":["img-01"]},{"type":"nav","yaw":107.1,"pitch":-2.4,"rotation":0,"target":["img-02"]},{"type":"nav","yaw":-7.2,"pitch":8.4,"rotation":0,"target":["img-04"]}]},"img-04":{"id":"img-04","name":"Grand Auditorium (scne)","level":"lm2","map-position":[77,45],"map-role":"r-hidden","hotspots":[{"type":"nav","yaw":117.12,"pitch":2.01,"rotation":0,"target":["img-01"]},{"type":"nav","yaw":178,"pitch":0.5,"rotation":0,"target":["img-03"]},{"type":"nav","yaw":150.87,"pitch":-4.9,"rotation":0,"target":["img-02"]}]},"img-05":{"id":"img-05","name":"Salle Carr","level":"lm2","map-position":[20,47.1],"map-role":"r-pres","hotspots":[{"type":"nav","yaw":-75.9,"pitch":2.8,"rotation":0,"target":["img-01"]}]},"img-06":{"id":"img-06","name":"Cour extrieure","level":"lm2","map-position":[56.5,14.5],"map-role":"r-break","hotspots":[{"type":"nav","yaw":-0.75,"pitch":1.36,"rotation":0,"target":["img-01"]}]},"img-07":{"id":"img-07","name":"Salle de preview","level":"lm2","map-position":[46.2,9],"map-role":"r-other","hotspots":[{"type":"nav","yaw":-28.52,"pitch":3.81,"rotation":0,"target":["img-01"]}]},"img-08":{"id":"img-08","name":"Mezzanine","level":"lm1","map-position":[33,76],"map-role":"r-break","hotspots":[{"type":"icon","yaw":160.81,"pitch":1.95,"rotation":0,"icon":"fa-solid fa-restroom"},{"type":"icon","yaw":172.84,"pitch":2.94,"rotation":0,"icon":"fa-solid fa-faucet"},{"type":"nav","yaw":68.5,"pitch":0.8,"rotation":0,"target":["img-09"]},{"type":"nav","yaw":-11.95,"pitch":8.24,"rotation":0,"target":["img-15"]},{"type":"nav","yaw":-87.42,"pitch":1.89,"rotation":0,"target":["img-60"]}]},"img-09":{"id":"img-09","name":"Couloirs","level":"lm1","map-position":[25,37],"map-role":"r-passage","hotspots":[{"type":"nav","yaw":-92.93,"pitch":6.33,"rotation":0,"target":["img-13","img-12","img-11","img-10"]},{"type":"nav","yaw":-178.25,"pitch":4.17,"rotation":0,"target":["img-08"]},{"type":"nav","yaw":1.51,"pitch":0.9,"rotation":0,"target":["img-14"]}]},"img-12":{"id":"img-12","name":"Salle 04","level":"lm1","map-position":[33,30.4],"map-role":"r-session","hotspots":[{"type":"nav","yaw":-98.16,"pitch":3.76,"rotation":0,"target":["img-09"]}]},"img-11":{"id":"img-11","name":"Salle 05","level":"lm1","map-position":[33,43.25],"map-role":"r-session","hotspots":[{"type":"nav","yaw":123.24,"pitch":4.42,"rotation":0,"target":["img-09"]}]},"img-10":{"id":"img-10","name":"Salle 06","level":"lm1","map-position":[33,55.5],"map-role":"r-session","hotspots":[{"type":"nav","yaw":-42.77,"pitch":3.82,"rotation":0,"target":["img-09"]}]},"img-13":{"id":"img-13","name":"Salle Comit d\'Organisation","level":"lm1","map-role":"r-out","hotspots":[{"type":"nav","yaw":91.4,"pitch":4.17,"rotation":0,"target":["img-09"]}]},"img-14":{"id":"img-14","name":"Salle Comit de Programme","level":"lm1","map-role":"r-out","hotspots":[{"type":"nav","yaw":-31,"pitch":2.96,"rotation":0,"target":["img-09"]}]},"img-15":{"id":"img-15","name":"Mezzanine : passage","level":"lm1","map-position":[42.3,66.5],"map-role":"r-passage","hotspots":[{"type":"nav","yaw":2.65,"pitch":25.89,"rotation":0,"target":["img-01"]},{"type":"nav","yaw":121.36,"pitch":0.73,"rotation":0,"target":["img-08"]},{"type":"nav","yaw":-177.22,"pitch":-12.22,"rotation":0,"target":["img-31"]}]},"img-60":{"id":"img-60","name":"Rgie du Grand Auditorium","level":"lm1","map-position":[65,80],"map-role":"r-other","hotspots":[{"type":"nav","yaw":-165.27,"pitch":2.85,"rotation":0,"target":["img-08"]}]},"img-16":{"id":"img-16","name":"Entre place Sainte-Anne","level":"rdc","map-position":[20,83],"map-role":"r-entrance","hotspots":[{"type":"nav","yaw":29.33,"pitch":0.99,"rotation":0,"target":["img-17"]}]},"img-17":{"id":"img-17","name":"Accueil","level":"rdc","map-position":[43,83],"map-role":"r-entrance","hotspots":[{"type":"nav","yaw":168.64,"pitch":3.1,"rotation":0,"target":["img-16"]},{"type":"nav","yaw":2.66,"pitch":1.51,"rotation":0,"target":["img-31"]}]},"img-18":{"id":"img-18","name":"Atrium","level":"rdc","map-position":[61,42],"map-role":"r-expo","hotspots":[{"type":"nav","yaw":92.14,"pitch":3.37,"rotation":0,"target":["img-19"]},{"type":"nav","yaw":-164.9,"pitch":1.05,"rotation":0,"target":["img-20","img-21"]},{"type":"nav","yaw":-11.95,"pitch":1.99,"rotation":0,"target":["img-23"]},{"type":"nav","yaw":9.78,"pitch":1.74,"rotation":0,"target":["img-31"]},{"type":"nav","yaw":36.15,"pitch":-10.3,"rotation":0,"target":["img-37"]}]},"img-19":{"id":"img-19","name":"La Halle [rdc]","level":"rdc","map-position":[78,58.5],"map-role":"r-expo","hotspots":[{"type":"nav","yaw":-42.83,"pitch":1.49,"rotation":0,"target":["img-18"]},{"type":"nav","yaw":19.02,"pitch":1.61,"rotation":0,"target":["img-31"]},{"type":"nav","yaw":10.37,"pitch":0.97,"rotation":0,"target":["img-23"]},{"type":"nav","yaw":-27.57,"pitch":-1.48,"rotation":0,"target":["img-37"]}]},"img-20":{"id":"img-20","name":"Rfectoire","level":"rdc","map-position":[52,42],"map-role":"r-poster","hotspots":[{"type":"nav","yaw":-2.52,"pitch":1.47,"rotation":0,"target":["img-21"]},{"type":"nav","yaw":-13.48,"pitch":2.01,"rotation":0,"target":["img-18"]},{"type":"nav","yaw":99.76,"pitch":6.11,"rotation":0,"target":["img-22"]}]},"img-21":{"id":"img-21","name":"Salle 07","level":"rdc","map-position":[52,20.8],"map-role":"r-poster","hotspots":[{"type":"nav","yaw":65.07,"pitch":5,"rotation":0,"target":["img-18"]},{"type":"nav","yaw":15.23,"pitch":2.56,"rotation":0,"target":["img-20"]},{"type":"nav","yaw":-119.69,"pitch":4.74,"rotation":0,"target":["img-26"]}]},"img-22":{"id":"img-22","name":"Galerie Ouest","level":"rdc","map-position":[43,35],"map-role":"r-passage","hotspots":[{"type":"nav","yaw":5.7,"pitch":1.31,"rotation":0,"target":["img-26"]},{"type":"stairs","yaw":-0.7,"pitch":1.31,"rotation":0,"target":"str-ouest"},{"type":"nav","yaw":-7.1,"pitch":1.31,"rotation":0,"target":["img-21"]},{"type":"nav","yaw":-179.34,"pitch":5.6,"rotation":0,"target":["img-23"]},{"type":"nav","yaw":-159.38,"pitch":4.47,"rotation":0,"target":["img-20"]},{"type":"nav","yaw":145.16,"pitch":4.46,"rotation":0,"target":["img-27"]}]},"img-23":{"id":"img-23","name":"Galerie Sud","level":"rdc","map-position":[30,58.45],"map-role":"r-passage","hotspots":[{"type":"nav","yaw":169.81,"pitch":3.43,"rotation":0,"target":["img-18"]},{"type":"nav","yaw":-153.23,"pitch":3.32,"rotation":0,"target":["img-22"]},{"type":"nav","yaw":1.55,"pitch":5.65,"rotation":0,"target":["img-24"]},{"type":"nav","yaw":95.99,"pitch":4.35,"rotation":0,"target":["img-29"]}]},"img-24":{"id":"img-24","name":"Chapelle Saint-Joseph","level":"rdc","map-position":[16,58.45],"map-role":"r-break","hotspots":[{"type":"nav","yaw":-91.27,"pitch":6.58,"rotation":0,"target":["img-23"]},{"type":"nav","yaw":5.21,"pitch":4.4,"rotation":0,"target":["img-25"]},{"type":"nav","yaw":78.86,"pitch":1.17,"rotation":0,"target":["img-45"]}]},"img-25":{"id":"img-25","name":"Galerie Est","level":"rdc","map-position":[16,35],"map-role":"r-passage","hotspots":[{"type":"nav","yaw":4.38,"pitch":0.23,"rotation":0,"target":["img-24"]},{"type":"stairs","yaw":-176.2,"pitch":0.81,"rotation":0,"target":"str-est"},{"type":"nav","yaw":171.44,"pitch":2.02,"rotation":0,"target":["img-26"]},{"type":"nav","yaw":80.38,"pitch":5.96,"rotation":0,"target":["img-27"]},{"type":"nav","yaw":-158.02,"pitch":4.35,"rotation":0,"target":["img-30"]}]},"img-26":{"id":"img-26","name":"Galerie Nord","level":"rdc","map-position":[30,20.8],"map-role":"r-passage","hotspots":[{"type":"icon","yaw":162.92,"pitch":4.8,"rotation":0,"icon":"fa-solid fa-faucet"},{"type":"icon","yaw":88.11,"pitch":-1.85,"rotation":0,"icon":"fa-solid fa-restroom"},{"type":"nav","yaw":-176.22,"pitch":2.04,"rotation":0,"target":["img-25"]},{"type":"stairs","yaw":168.23,"pitch":1.35,"rotation":0,"target":"str-est"},{"type":"stairs","yaw":1.73,"pitch":1.54,"rotation":0,"target":"str-ouest"},{"type":"nav","yaw":-4.21,"pitch":1.54,"rotation":0,"target":["img-21"]},{"type":"nav","yaw":-11.45,"pitch":1.54,"rotation":0,"target":["img-22"]},{"type":"nav","yaw":-23.84,"pitch":3.45,"rotation":0,"target":["img-27"]}]},"img-27":{"id":"img-27","name":"Jardin du Clotre","level":"rdc","map-position":[30,35],"map-role":"r-break","hotspots":[{"type":"nav","yaw":54.89,"pitch":0.06,"rotation":0,"target":["img-22"]},{"type":"nav","yaw":-125.8,"pitch":1.19,"rotation":0,"target":["img-25"]},{"type":"nav","yaw":159.24,"pitch":1.93,"rotation":0,"target":["img-26"]}]},"img-28":{"id":"img-28","name":"La Nef","level":"rdc","map-position":[43,69.8],"map-role":"r-pres","hotspots":[{"type":"nav","yaw":-3.1,"pitch":3.92,"rotation":0,"target":["img-29"]},{"type":"nav","yaw":30.87,"pitch":0.66,"rotation":0,"target":["img-23"]}]},"img-29":{"id":"img-29","name":"La Nef (scne)","level":"rdc","map-position":[30,69.8],"map-role":"r-hidden","hotspots":[{"type":"nav","yaw":-49.78,"pitch":1.31,"rotation":0,"target":["img-23"]},{"type":"nav","yaw":3.33,"pitch":1.17,"rotation":0,"target":["img-28"]}]},"img-30":{"id":"img-30","name":"Salle 08","level":"rdc","map-role":"r-out","hotspots":[{"type":"stairs","yaw":146.7,"pitch":3.49,"rotation":0,"target":"str-est"},{"type":"nav","yaw":79.26,"pitch":4.89,"rotation":0,"target":["img-25"]}]},"img-31":{"id":"img-31","name":"Entre congrs","level":"rdc","map-position":[61,77],"map-role":"r-entrance","hotspots":[{"type":"stairs","yaw":-28.51,"pitch":0.64,"rotation":0,"target":"str-sud"},{"type":"nav","yaw":95.25,"pitch":7.66,"rotation":0,"target":["img-17"]},{"type":"nav","yaw":-8.95,"pitch":1.23,"rotation":0,"target":["img-18"]},{"type":"stairs","yaw":3.99,"pitch":13.19,"rotation":0,"target":"str-mezzanine"}]},"img-45":{"id":"img-45","name":"Salle 9 : le Chur","level":"lm2","map-role":"r-out","hotspots":[{"type":"nav","yaw":-185,"pitch":4.79,"rotation":0,"target":["img-24"]}]},"img-33":{"id":"img-33","name":"La Halle [+1]","level":"lp1","map-position":[82,60],"map-role":"r-expo","hotspots":[{"type":"icon","yaw":115.72,"pitch":-0.06,"rotation":0,"icon":"fa-solid fa-restroom"},{"type":"stairs","yaw":166.84,"pitch":2.08,"rotation":0,"target":"str-nord"},{"type":"stairs","yaw":-48.37,"pitch":0.97,"rotation":0,"target":"str-sud"},{"type":"nav","yaw":-41.17,"pitch":0.85,"rotation":0,"target":["img-35"]},{"type":"nav","yaw":-55.66,"pitch":2.1,"rotation":0,"target":["img-37"]},{"type":"nav","yaw":-2.25,"pitch":5.95,"rotation":0,"target":["img-34"]}]},"img-34":{"id":"img-34","name":"La Halle [+1] (fond)","level":"lp1","map-position":[89,76],"map-role":"r-hidden","hotspots":[{"type":"stairs","yaw":39.99,"pitch":0.17,"rotation":0,"target":"str-sud"},{"type":"nav","yaw":-2.41,"pitch":6.67,"rotation":0,"target":["img-33"]},{"type":"nav","yaw":89.09,"pitch":1.54,"rotation":0,"target":["img-35"]},{"type":"nav","yaw":20.95,"pitch":0.42,"rotation":0,"target":["img-37"]}]},"img-35":{"id":"img-35","name":"Salle 11","level":"lp1","map-role":"r-out","hotspots":[{"type":"nav","yaw":175.76,"pitch":4.05,"rotation":0,"target":["img-34"]},{"type":"nav","yaw":-91.34,"pitch":4.42,"rotation":0,"target":["img-36"]}]},"img-36":{"id":"img-36","name":"Terrasse","level":"lp1","map-position":[64.5,76],"map-role":"r-break","hotspots":[{"type":"nav","yaw":-160.16,"pitch":4.07,"rotation":0,"target":["img-35"]},{"type":"nav","yaw":-25.05,"pitch":1.15,"rotation":0,"target":["img-37"]}]},"img-37":{"id":"img-37","name":"Passage vers La Halle [+1]","level":"lp1","map-position":[64.5,66.4],"map-role":"r-passage","hotspots":[{"type":"nav","yaw":33.43,"pitch":24.01,"rotation":0,"target":["img-18"]},{"type":"nav","yaw":-1.36,"pitch":0.83,"rotation":0,"target":["img-33","img-34"]},{"type":"nav","yaw":-32.22,"pitch":5.03,"rotation":0,"target":["img-36"]},{"type":"nav","yaw":166.94,"pitch":4.5,"rotation":0,"target":["img-38"]}]},"img-38":{"id":"img-38","name":"Les Dortoirs","level":"lp1","map-position":[55,50],"map-role":"r-pres","hotspots":[{"type":"nav","yaw":-154.37,"pitch":3.18,"rotation":0,"target":["img-37"]}]},"img-39":{"id":"img-39","name":"Salon Ouest","level":"lp1","map-position":[55,23],"map-role":"r-passage","hotspots":[{"type":"icon","yaw":52.5,"pitch":-0.56,"rotation":0,"icon":"fa-solid fa-restroom"},{"type":"stairs","yaw":-36.98,"pitch":2.97,"rotation":0,"target":"str-ouest"},{"type":"nav","yaw":-10.66,"pitch":4.22,"rotation":0,"target":["img-40"]}]},"img-40":{"id":"img-40","name":"Couloir","level":"lp1","map-position":[29.5,23],"map-role":"r-passage","hotspots":[{"type":"nav","yaw":-95.44,"pitch":6.15,"rotation":0,"target":["img-41","img-42"]},{"type":"nav","yaw":176.76,"pitch":4.92,"rotation":0,"target":["img-39"]},{"type":"nav","yaw":-3.86,"pitch":5.1,"rotation":0,"target":["img-43"]}]},"img-41":{"id":"img-41","name":"Salle 12","level":"lp1","map-position":[27.5,15],"map-role":"r-session","hotspots":[{"type":"nav","yaw":101.09,"pitch":4.1,"rotation":0,"target":["img-40"]}]},"img-42":{"id":"img-42","name":"Salle 13","level":"lp1","map-position":[17,15],"map-role":"r-session","hotspots":[{"type":"nav","yaw":-120.27,"pitch":6.8,"rotation":0,"target":["img-40"]}]},"img-43":{"id":"img-43","name":"Salon Est","level":"lp1","map-position":[6,23],"map-role":"r-passage","hotspots":[{"type":"stairs","yaw":138.09,"pitch":3.62,"rotation":0,"target":"str-est"},{"type":"nav","yaw":87.84,"pitch":4.96,"rotation":0,"target":["img-40"]},{"type":"nav","yaw":22.55,"pitch":3,"rotation":0,"target":["img-44"]}]},"img-44":{"id":"img-44","name":"Salle 14","level":"lp1","map-position":[6,40],"map-role":"r-session","hotspots":[{"type":"nav","yaw":159.78,"pitch":4.31,"rotation":0,"target":["img-43"]}]},"img-46":{"id":"img-46","name":"Salon Ouest","level":"lp2","map-role":"r-out","hotspots":[{"type":"stairs","yaw":-38.15,"pitch":1.9,"rotation":0,"target":"str-ouest"},{"type":"nav","yaw":8.05,"pitch":4.45,"rotation":0,"target":["img-47"]}]},"img-47":{"id":"img-47","name":"Couloir","level":"lp2","map-role":"r-out","hotspots":[{"type":"icon","yaw":-179.96,"pitch":1.86,"rotation":0,"icon":"fa-solid fa-restroom"},{"type":"nav","yaw":-101.23,"pitch":6.14,"rotation":0,"target":["img-48","img-49"]},{"type":"nav","yaw":173.84,"pitch":2.59,"rotation":0,"target":["img-46"]},{"type":"nav","yaw":-6.41,"pitch":0.83,"rotation":0,"target":["img-50"]}]},"img-48":{"id":"img-48","name":"Salle 18","level":"lp2","map-role":"r-out","hotspots":[{"type":"nav","yaw":110.2,"pitch":6.71,"rotation":0,"target":["img-47"]}]},"img-49":{"id":"img-49","name":"Salle 19","level":"lp2","map-role":"r-out","hotspots":[{"type":"nav","yaw":-54.61,"pitch":4.33,"rotation":0,"target":["img-47"]}]},"img-50":{"id":"img-50","name":"Salon Est","level":"lp2","map-role":"r-out","hotspots":[{"type":"stairs","yaw":47.88,"pitch":2.45,"rotation":0,"target":"str-est"},{"type":"nav","yaw":0.98,"pitch":4.44,"rotation":0,"target":["img-47"]}]},"img-51":{"id":"img-51","name":"Salon Est","level":"lp3","map-role":"r-out","hotspots":[{"type":"icon","yaw":-112.74,"pitch":-1.19,"rotation":0,"icon":"fa-solid fa-restroom"},{"type":"stairs","yaw":82.71,"pitch":-0.4,"rotation":0,"target":"str-est"},{"type":"nav","yaw":0.09,"pitch":6.89,"rotation":0,"target":["img-52"]}]},"img-52":{"id":"img-52","name":"Salle 21","level":"lp3","map-role":"r-out","hotspots":[{"type":"nav","yaw":-152.82,"pitch":3.69,"rotation":0,"target":["img-51"]},{"type":"nav","yaw":26.15,"pitch":1.66,"rotation":0,"target":["img-53"]},{"type":"nav","yaw":-17.64,"pitch":1.66,"rotation":0,"target":["img-53"]}]},"img-53":{"id":"img-53","name":"Salle 20","level":"lp3","map-role":"r-out","hotspots":[{"type":"nav","yaw":-33.97,"pitch":2.8,"rotation":0,"target":["img-52"]},{"type":"nav","yaw":31.48,"pitch":2.8,"rotation":0,"target":["img-52"]},{"type":"nav","yaw":146.29,"pitch":2.49,"rotation":0,"target":["img-54"]}]},"img-54":{"id":"img-54","name":"Salon Ouest","level":"lp3","map-role":"r-out","hotspots":[{"type":"icon","yaw":-107.91,"pitch":-0.23,"rotation":0,"icon":"fa-solid fa-restroom"},{"type":"stairs","yaw":8.85,"pitch":-0.5,"rotation":0,"target":"str-ouest"},{"type":"nav","yaw":93.1,"pitch":5.23,"rotation":0,"target":["img-53"]}]},"img-55":{"id":"img-55","name":"Salon Terrasse","level":"lp2","map-position":[48.5,33.8],"map-role":"r-passage","hotspots":[{"type":"icon","yaw":10.59,"pitch":-3.23,"rotation":0,"icon":"fa-solid fa-restroom"},{"type":"stairs","yaw":48.99,"pitch":-0.22,"rotation":0,"target":"str-nord"},{"type":"nav","yaw":141.73,"pitch":1.96,"rotation":0,"target":["img-56"]}]},"img-56":{"id":"img-56","name":"Le Belvdre","level":"lp2","map-position":[48.5,50],"map-role":"r-session","hotspots":[{"type":"stairs","yaw":63.14,"pitch":-0.15,"rotation":0,"target":"str-sud"},{"type":"nav","yaw":-68.03,"pitch":2.82,"rotation":0,"target":["img-55"]},{"type":"nav","yaw":119.65,"pitch":2.91,"rotation":0,"target":["img-57"]},{"type":"nav","yaw":136.67,"pitch":1.83,"rotation":0,"target":["img-59"]}]},"img-57":{"id":"img-57","name":"Les Horizons","level":"lp2","map-position":[52,68.5],"map-role":"r-session","hotspots":[{"type":"stairs","yaw":80.42,"pitch":-0.82,"rotation":0,"target":"str-sud"},{"type":"nav","yaw":-29.98,"pitch":3.1,"rotation":0,"target":["img-56"]},{"type":"nav","yaw":-167.14,"pitch":1.98,"rotation":0,"target":["img-58"]}]},"img-58":{"id":"img-58","name":"Terrasse","level":"lp2","map-position":[52,79.8],"map-role":"r-other","hotspots":[{"type":"nav","yaw":-86.23,"pitch":1.93,"rotation":0,"target":["img-57"]},{"type":"nav","yaw":-143.86,"pitch":10.96,"rotation":0,"target":["img-59"]}]},"img-59":{"id":"img-59","name":"Terrasse","level":"lp2","map-position":[60,45],"map-role":"r-other","hotspots":[{"type":"nav","yaw":-104.35,"pitch":1.36,"rotation":0,"target":["img-56"]},{"type":"nav","yaw":-90.78,"pitch":4.09,"rotation":0,"target":["img-58"]}]}}'),e=JSON.parse('{"str-ouest":{"target":["img-54","img-46","img-39","img-26","img-22"]},"str-est":{"target":["img-51","img-50","img-43","img-26","img-25"]},"str-mezzanine":{"target":["img-31","img-15","img-01"]},"str-nord":{"target":["img-55","img-33","img-18"]},"str-sud":{"target":["img-57","img-56","img-34","img-33","img-31"]}}'),n="assets/images/",r={"r-entrance":{label:"Entre du congrs",icon:"bi bi-door-open",tooltip:"Entre du congrs"},"r-important":{label:"Important",icon:"bi bi-exclamation-circle-fill",tooltip:"Important"},"r-pres":{label:"Prsentation",icon:"bi bi-easel3-fill",tooltip:"Prsentation"},"r-expo":{label:"Exposition",icon:"bi bi-easel",tooltip:"Exposition"},"r-session":{label:"Session Exposant",icon:"bi bi-person-video3",tooltip:"Session Exposant"},"r-poster":{label:"Salle Poster",icon:"bi bi-easel2",tooltip:"Salle Poster"},"r-break":{label:"Espace Dtente",icon:"bi bi-tree",tooltip:"Espace Dtente"},"r-other":{label:"Autre",icon:"bi bi-diamond",tooltip:"Autre"}},o={...r,"r-hidden":{label:"Cach",icon:"bi bi-diamond",tooltip:"Autre"},"r-passage":{label:"Couloir",icon:"fa-solid fa-shoe-prints",tooltip:"Couloir"},"r-out":{label:"Hors JRES",icon:"bi bi-exclamation-octagon",tooltip:"Hors JRES"}},s={lp2:{label:"+2","coords-dt":"0,93,330,165","coords-mb":"0,56,330,100"},lp1:{label:"+1","coords-dt":"0,165,330,286","coords-mb":"0,100,330,173"},rdc:{label:"rdc","coords-dt":"0,286,330,417","coords-mb":"0,173,330,252"},lm1:{label:"-1","coords-dt":"0,417,330,524","coords-mb":"0,252,330,317"},lm2:{label:"-2","coords-dt":"0,524,330,660","coords-mb":"0,317,330,400"}},a={lp3:"+3",lp2:"+2",lp1:"+1",rdc:"rdc",lm1:"-1",lm2:"-2"};function l(t,e,i=null,n=null){document.querySelectorAll(e).forEach((e=>{e.matches(t)?(null!=i&&e.classList.add(i),null!=n&&e.classList.remove(n)):(null!=i&&e.classList.remove(i),null!=n&&e.classList.add(n))}))}function c(t,i,n=null){let r=t[i];var s,a;l("#ar-scene-"+(s=r.data.id)+", #ls-scene-"+s+", #mr-scene-"+s,".scene","active"),l("#ar-map-pointer-"+s+", #ls-map-pointer-"+s,".map-pointer","active"),l("#axio-nav-"+(a=r.data.level),".axio-nav","active"),l("#axio-mask-"+a,".axio-mask","active","inactive"),l("#axio-scenes-"+a,".axio-scenes","active","inactive"),l("#map-scenes-"+a,".map-scenes","active","inactive"),l("#map-image-div-"+a,".map-image-div","active","inactive");let c=function(t,i){let n=null;return i?t.hotspots.forEach((t=>{"nav"==t.type?t.target.forEach((e=>{e==i&&null==n&&(n={pitch:t.pitch*Math.PI/-180,yaw:(t.yaw+180)%360*Math.PI/180})})):"stairs"==t.type&&e[t.target].target.forEach((e=>{e==i&&null==n&&(n={pitch:t.pitch*Math.PI/-180,yaw:(t.yaw+180)%360*Math.PI/180})}))})):t.initialViewParameters&&(n=t.initialViewParameters),null==n&&(n={pitch:0,yaw:0}),n}(r.data,n);r.view.setParameters(c),r.scene.switchTo(),function(t){let e=document.querySelector("#ttb-scene-title");e.textContent="";let i=document.createElement("i");i.classList.add(...o[t.data["map-role"]].icon.split(" "),"pe-1"),i.setAttribute("data-bs-toggle","tooltip"),i.setAttribute("data-bs-title",o[t.data["map-role"]].tooltip),i.setAttribute("data-bs-placement","bottom");let n=document.createElement("p");n.appendChild(document.createTextNode(t.data.name)),e.appendChild(i),e.appendChild(n),document.querySelector("#current-scene").setAttribute("data-id",t.data.id)}(r)}var h=i(187);i(248),i(691);var u=i(836);document.body.appendChild(function(){const i=document.createElement("div");return function(){const e=l(t,"map-role"),i=l(t,"level");var o=1,a=!0;function l(t,e){let i={};for(let n in t){let r=t[n][e];r in i||(i[r]={}),i[r][n]=t[n]}return i}function c(t,e,i){let n=document.createElement("a");n.id=t+"-scene-"+e.id,n.classList.add("scene"),n.setAttribute("data-id",e.id),n.setAttribute("data-lvl",e.level),n.setAttribute("href","javascript:void(0)");let r=document.createElement("div");r.classList.add("scene-id"),r.style.backgroundColor="var(--"+e["map-role"]+"-color)",r.appendChild(document.createTextNode(i));let o=document.createElement("div");return o.classList.add("scene-label"),o.appendChild(document.createTextNode((a?"["+s[e.level].label+"] ":"")+e.name)),n.appendChild(r),n.appendChild(o),n}function h(t){let e=document.createElement("div");e.classList.add("scene-title");let i=document.createElement("div");i.classList.add("scene-id"),i.style.backgroundColor="var(--"+t+"-color)";let n=document.createElement("i");n.classList.add(...r[t].icon.split(" ")),i.appendChild(n);let o=document.createElement("div");return o.classList.add("scene-label"),o.appendChild(document.createTextNode(r[t].label)),e.appendChild(i),e.appendChild(o),e}function u(t,e,i){let n=document.createElement("div");n.id=e+"-"+t,n.classList.add(e,"me-1"),n.appendChild(h(t));for(let t in i){let r=c(e,i[t],o);o+=1,n.appendChild(r)}return n}function p(t,e,i,n){let r=document.createElement("div");r.appendChild(h(e));let s=2;for(let e in n){let a=c(i,n[e],o);o+=1,s>0?(r.appendChild(a),1==s&&t.appendChild(r),s-=1):t.appendChild(a)}return r}function d(e,i){let n=t[i],r=document.createElement("div");r.id=e+"-map-pointer-"+n.id,r.classList.add("map-pointer"),r.setAttribute("data-id",n.id),r.style.top="calc("+n["map-position"][0].toString()+"% - var(--offset))",r.style.left="calc("+n["map-position"][1].toString()+"% - var(--offset))",r.style.backgroundColor="var(--"+n["map-role"]+"-color)";let o=document.createElement("p");return o.appendChild(document.createTextNode(document.querySelector("#"+e+"-scene-"+n.id).firstElementChild.textContent)),r.appendChild(o),r}!function(){let t=document.querySelector("#content-all-rooms");o=1,a=!0;for(let i in r)null!=e[i]&&p(t,i,"ar",e[i])}(),function(){let t=document.querySelector("#cmenu-content-axio-scenes");for(let e in s){let n=document.createElement("div");n.id="axio-scenes-"+e,n.classList.add("axio-scenes","inactive");let s=l(i[e],"map-role");o=1,a=!1;for(let t in r)null!=s[t]&&n.appendChild(u(t,"ls",s[t]));t.appendChild(n)}}(),function(){let t=document.querySelector("#cmenu-content-axio-nav");for(let e in s){let i=document.createElement("div");i.id="axio-nav-"+e,i.classList.add("btn","axio-nav"),i.setAttribute("data-lvl",e);let n=document.createElement("p");n.appendChild(document.createTextNode(s[e].label)),i.appendChild(n),t.appendChild(i)}}(),function(){let t=document.querySelector("#cmenu-content-axio-images"),e=document.createElement("div");e.classList.add("axio-cont");let i=document.createElement("img");i.classList.add("content-image","axio-image"),i.src=n+"axio/axio_all.jpg",e.appendChild(i);let r=document.createElement("img");r.id="axio-mask-map",r.src=n+"axio/axio_map.png",r.useMap="#axio-image-map";let o=document.createElement("map");o.id="axio-image-map",o.name="axio-image-map";for(let t in s){let i=document.createElement("img");i.id="axio-mask-"+t,i.classList.add("content-image","axio-mask","inactive"),i.src=n+"axio/axio_"+t+".png",i.setAttribute("data-lvl",t),e.appendChild(i);let r=document.createElement("area");r.id="axio-area-"+t,r.shape="rect",window.matchMedia("(min-width: 768px)").matches?r.coords=s[t]["coords-dt"]:r.coords=s[t]["coords-mb"],r.href="javascript:void(0)",r.setAttribute("data-lvl",t),o.appendChild(r)}e.appendChild(r),e.appendChild(o),t.appendChild(e)}(),function(){let t=document.querySelector("#cr-map-scenes");for(let e in s){let n=document.createElement("div");n.id="map-scenes-"+e,n.classList.add("map-scenes","d-flex","flex-wrap","inactive");let s=l(i[e],"map-role");o=1,a=!1;for(let t in r)if(null!=s[t])for(let e in s[t]){let i=c("mr",s[t][e],o);i.classList.add("flex-fill"),o+=1,n.appendChild(i)}t.appendChild(n)}}(),function(){let t=document.querySelector("#cr-map-image");for(let e in s){let i=document.createElement("div");i.id="map-image-div-"+e,i.classList.add("map-image-div","inactive"),i.setAttribute("data-lvl",e);let r=document.createElement("img");r.classList.add("content-image","map-image"),r.src=n+"maps/"+e+"-map.png",i.appendChild(r),t.appendChild(i)}}(),function(){for(let t in s){let e=document.querySelector("#map-image-div-"+t),n=document.createElement("div");n.id="ar-pointers-div-"+t,n.classList.add("ar-pointers-div","inactive");let o=document.createElement("div");o.id="ls-pointers-div-"+t,o.classList.add("ls-pointers-div","inactive");let s=l(i[t],"map-role");for(let t in r)for(let e in s[t]){let t=d("ar",e);n.appendChild(t);let i=d("ls",e);o.appendChild(i)}e.appendChild(n),e.appendChild(o)}}()}(),function(t){document.querySelectorAll(".axio-nav.btn, #axio-image-map>area").forEach((t=>{let e=t.getAttribute("data-lvl");t.addEventListener("mouseenter",(function(t){document.querySelector("#axio-nav-"+e).classList.add("hover"),document.querySelector("#axio-mask-"+e).classList.add("hover")})),t.addEventListener("mouseleave",(function(t){document.querySelector("#axio-nav-"+e).classList.remove("hover"),document.querySelector("#axio-mask-"+e).classList.remove("hover")})),t.addEventListener("click",(function(t){l("#axio-nav-"+e,".axio-nav","active"),l("#axio-mask-"+e,".axio-mask","active","inactive"),l("#axio-scenes-"+e,".axio-scenes","active","inactive"),l("#map-image-div-"+e,".map-image-div","active","inactive"),window.matchMedia("(max-width: 768px)").matches&&(l("#map-scenes-"+e,".map-scenes","active","inactive"),l("#button-map-mb",".buttons-mb","active"),l("#content-right","#content-right, #content-left","active","inactive"),l(".ls-pointers-div",".ar-pointers-div, .ls-pointers-div","active","inactive"))}))})),document.querySelectorAll("#content-left .scene").forEach((e=>{let i=e.getAttribute("data-id"),n=e.getAttribute("data-lvl");e.addEventListener("mouseenter",(function(t){e.classList.add("hover"),l("#map-image-div-"+n,".map-image-div","active","inactive"),l("#"+e.id.replace("scene","map-pointer"),".map-pointer","hover")})),e.addEventListener("mouseleave",(function(t){e.classList.remove("hover"),document.querySelector("#"+e.id.replace("scene","map-pointer")).classList.remove("hover")})),e.addEventListener("click",(function(e){c(t,i),document.querySelector("#cmenu").classList.remove("show"),document.querySelector("#ttb-cmenu-nav-button").classList.add("collapsed")}))})),document.querySelectorAll("#content-right .scene").forEach((e=>{let i=e.getAttribute("data-id");e.getAttribute("data-lvl"),e.addEventListener("mouseenter",(function(t){e.classList.add("hover")})),e.addEventListener("mouseleave",(function(t){e.classList.remove("hover")})),e.addEventListener("click",(function(e){c(t,i),document.querySelector("#cmenu").classList.remove("show"),document.querySelector("#ttb-cmenu-nav-button").classList.add("collapsed")}))})),document.querySelectorAll(".map-pointer").forEach((e=>{let i=e.getAttribute("data-id");e.addEventListener("mouseenter",(function(t){l("#"+e.id.replace("map-pointer","scene"),".scene","hover"),e.classList.add("hover")})),e.addEventListener("mouseleave",(function(t){document.querySelector("#"+e.id.replace("map-pointer","scene")).classList.remove("hover"),e.classList.remove("hover")})),e.addEventListener("click",(function(e){c(t,i),document.querySelector("#cmenu").classList.remove("show")}))})),document.querySelector("#button-all-rooms-dt").addEventListener("mouseup",(function(t){l("#button-all-rooms-dt",".buttons-dt","active"),l("#content-all-rooms",".content-dt","active","inactive"),l(".ar-pointers-div",".ar-pointers-div, .ls-pointers-div","active","inactive")})),document.querySelector("#button-levels-dt").addEventListener("mouseup",(function(t){l("#button-levels-dt",".buttons-dt","active"),l("#content-levels",".content-dt","active","inactive"),l(".ls-pointers-div",".ar-pointers-div, .ls-pointers-div","active","inactive"),l("#map-image-div-"+document.querySelector(".btn.axio-nav.active").getAttribute("data-lvl"),".map-image-div","active","inactive")})),document.querySelector("#button-all-rooms-mb").addEventListener("mouseup",(function(t){l("#button-all-rooms-mb",".buttons-mb","active"),l("#content-left","#content-right, #content-left","active","inactive"),l("#content-all-rooms",".content-mb","active","inactive"),l(".ls-pointers-div",".ar-pointers-div, .ls-pointers-div","active","inactive")})),document.querySelector("#button-levels-mb").addEventListener("mouseup",(function(t){l("#button-levels-mb",".buttons-mb","active"),l("#content-left","#content-right, #content-left","active","inactive"),l("#content-levels",".content-mb","active","inactive"),l(".ls-pointers-div",".ar-pointers-div, .ls-pointers-div","active","inactive")})),document.querySelector("#button-map-mb").addEventListener("mouseup",(function(t){l("#button-map-mb",".buttons-mb","active"),l("#content-right","#content-right, #content-left","active","inactive"),l(".ls-pointers-div",".ar-pointers-div, .ls-pointers-div","active","inactive")})),l("#button-levels-dt","#button-all-rooms-dt, #button-levels-dt","active"),l("#content-levels","#content-all-rooms, #content-levels","active","inactive"),l(".ls-pointers-div",".ar-pointers-div, .ls-pointers-div","active","inactive")}(function(){let i="drag",n="img-16",r=document.querySelector("#pano"),o={controls:{mouseViewMode:i}};var l=new h.Viewer(r,o);function u(t){["touchstart","touchmove","touchend","touchcancel","wheel","mousewheel"].forEach((e=>{t.addEventListener(e,(function(t){t.stopPropagation()}))}))}function p(e,i,n=!1){let r=document.createElement("div");r.classList.add("nav-target-cont","d-none","flex-column");for(let o in i){let s=document.createElement("div");if(s.classList.add("nav-target"),i[o]in t){let e="";n&&(e+="["+a[t[i[o]].level]+"] "),e+=t[i[o]].name,s.appendChild(document.createTextNode(e))}else console.log("Erreur: la target "+i[o]+" n'existe pas dans les scenes");1==i.length&&s.classList.add("mono"),s.addEventListener("click",(function(){c(m,[i[o]],e.id)})),r.appendChild(s)}return r}function d(t,i){let n=i.type,r=document.createElement("div");r.classList.add("hotspot",n+"-hotspot");let o=document.createElement("div");o.classList.add("nav-flex-cont","d-flex");let s=document.createElement("div");s.classList.add("nav-icon-cont","d-flex","justify-content-center","align-items-center");let a=document.createElement("i");"nav"==i.type&&a.classList.add("d-flex","bi","bi-caret-up-fill"),"stairs"==i.type&&a.classList.add("d-flex","fa-solid","fa-stairs"),s.appendChild(a);let l={};"nav"==i.type&&(l=p(t,i.target)),"stairs"==i.type&&(l=p(t,e[i.target].target.filter((e=>e!=t.id)),!0)),o.appendChild(s),o.appendChild(l),r.appendChild(o),u(r);let c=r.childNodes[0].childNodes[1];return r.addEventListener("mouseenter",(function(t){r.classList.add("hover")})),r.addEventListener("mouseleave",(function(t){r.classList.remove("hover"),c.classList.remove("d-flex"),c.classList.add("d-none")})),r.addEventListener("transitionend",(function(t){r.classList.contains("hover")&&(c.classList.add("d-flex"),c.classList.remove("d-none"))})),r}function f(t,e){let i=document.createElement("div");i.classList.add("hotspot","icon-hotspot");let n=document.createElement("div");n.classList.add("icon-flex-cont","d-flex","justify-content-center","align-items-center");let r=document.createElement("i");return r.classList.add("d-flex"),r.classList.add(...e.icon.split(" ")),n.appendChild(r),i.appendChild(n),u(i),i}addEventListener("change",(t=>{for(let t in s)window.matchMedia("(max-width: 768px)").matches?document.querySelector("#axio-area-"+t).coords=s[t]["coords-mb"]:document.querySelector("#axio-area-"+t).coords=s[t]["coords-dt"]}));var m=function(){let e="assets/tiles/",i=new h.CubeGeometry([{tileSize:256,size:256,fallbackOnly:!0},{tileSize:512,size:512},{tileSize:512,size:1024},{tileSize:512,size:2048}]),n=h.RectilinearView.limit.traditional(1520,100*Math.PI/180,120*Math.PI/180),r={};for(let o in t){let s=t[o],a=h.ImageUrlSource.fromString(e+o+"/{z}/{f}/{y}/{x}.jpg",{cubeMapPreviewUrl:e+o+"/preview.jpg"}),c=new h.RectilinearView(90*Math.PI/180,n),u=l.createScene({source:a,geometry:i,view:c,pinFirstLevel:!0});s.hotspots.forEach((function(t){try{let e={};switch(t.type){case"nav":case"stairs":e=d(s,t);break;case"icon":e=f(0,t)}u.hotspotContainer().createHotspot(e,{yaw:t.yaw*Math.PI/180,pitch:t.pitch*Math.PI/180})}catch(t){console.log(t)}})),r[o]={data:s,scene:u,view:c}}return r}();return[...document.querySelectorAll('[data-bs-toggle="tooltip"]')].map((t=>new bootstrap.Tooltip(t))),c(m,n),m}()),[...document.querySelectorAll('[data-bs-toggle="tooltip"]')].map((t=>new u.Tooltip(t))),i}())})()})();
//# sourceMappingURL=main.bundle.js.map